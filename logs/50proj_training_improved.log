==============================================
50プロジェクト IRL学習（AUC-ROC改善版）
==============================================

入力データ: data/openstack_50proj_2021_2024_feat.csv
出力先: outputs/50projects_irl_improved

==============================================
AUC-ROC改善のためのパラメータ設定
==============================================

【変更点】
1. エポック数: 20 → 50（より十分な学習）
2. 学習率: 0.0001 → 0.0003（より細かい調整）
3. Focal Loss alpha: auto → 0.3（負例により焦点）
4. Focal Loss gamma: auto → 2.0（難しい例により焦点）

【期待効果】
- エポック増加: モデルが十分に収束
- 学習率調整: ランキング性能の細かい最適化
- Focal alpha減少: 正例・負例のスコア差を拡大
- Focal gamma増加: 難しい例（境界付近）を重点学習

==============================================
IRL学習開始
==============================================
訓練: 2021年
評価: 2023年

--- [1/3] No Oversampling (Improved) ---
2025-12-14 14:15:58,367 - INFO - 訓練期間ベース: 2021-01-01 00:00:00
2025-12-14 14:15:58,367 - INFO - 評価期間ベース: 2023-01-01 00:00:00
2025-12-14 14:15:58,368 - INFO - 生成されたパターン数: 10
2025-12-14 14:15:58,368 - INFO -   0-3m → 0-3m
2025-12-14 14:15:58,368 - INFO -   0-3m → 3-6m
2025-12-14 14:15:58,368 - INFO -   0-3m → 6-9m
2025-12-14 14:15:58,368 - INFO -   0-3m → 9-12m
2025-12-14 14:15:58,368 - INFO -   3-6m → 3-6m
2025-12-14 14:15:58,368 - INFO -   3-6m → 6-9m
2025-12-14 14:15:58,368 - INFO -   3-6m → 9-12m
2025-12-14 14:15:58,368 - INFO -   6-9m → 6-9m
2025-12-14 14:15:58,368 - INFO -   6-9m → 9-12m
2025-12-14 14:15:58,368 - INFO -   9-12m → 9-12m
2025-12-14 14:15:58,368 - INFO - ================================================================================
2025-12-14 14:15:58,368 - INFO - 全10パターンの訓練・評価を開始
2025-12-14 14:15:58,368 - INFO - ================================================================================
2025-12-14 14:15:58,368 - INFO - 
【1/10】パターン実行中...
2025-12-14 14:15:58,368 - INFO - ================================================================================
2025-12-14 14:15:58,368 - INFO - パターン: 0-3m → 0-3m
2025-12-14 14:15:58,369 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:15:58,369 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 14:15:58,369 - INFO - ================================================================================
2025-12-14 14:15:59,697 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:16:00,097 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:16:00,097 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:16:00,097 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:16:00,098 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 14:16:00,098 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:16:00,098 - INFO - ================================================================================
2025-12-14 14:16:00,098 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:16:00,098 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:16:00,098 - INFO - 将来窓: 0～24ヶ月
2025-12-14 14:16:00,098 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:16:00,098 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:16:00,098 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:16:00,098 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:16:00,098 - INFO - ================================================================================
2025-12-14 14:16:00,098 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:16:00,098 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 14:16:00,111 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 14:16:03,997 - INFO - ================================================================================
2025-12-14 14:16:03,997 - INFO - 軌跡抽出完了: 401サンプル（レビュアー）
2025-12-14 14:16:03,997 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:16:03,997 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 93
2025-12-14 14:16:03,997 - INFO -   正例（この期間で承諾あり）: 352 (87.8%)
2025-12-14 14:16:03,997 - INFO -   負例（この期間で承諾なし）: 49 (12.2%)
2025-12-14 14:16:03,997 - INFO -     - 依頼あり→拒否（重み=1.0）: 49
2025-12-14 14:16:03,997 - INFO -   総ステップ数: 802
2025-12-14 14:16:03,997 - INFO -   継続ステップ率: 59.2% (475/802)
2025-12-14 14:16:03,997 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:16:04,463 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:16:04,463 - INFO - 訓練データ正例率: 87.8% (352/401)
2025-12-14 14:16:04,463 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:16:04,463 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:16:04,463 - INFO - IRLモデルを訓練...
2025-12-14 14:16:04,463 - INFO - ============================================================
2025-12-14 14:16:04,463 - INFO - 時系列IRL訓練開始
2025-12-14 14:16:04,463 - INFO - 軌跡数: 401
2025-12-14 14:16:04,463 - INFO - エポック数: 50
2025-12-14 14:16:04,463 - INFO - ============================================================
2025-12-14 14:16:05,119 - INFO - エポック 0: 平均損失 = 0.9893
2025-12-14 14:16:11,191 - INFO - エポック 10: 平均損失 = 0.7249
2025-12-14 14:16:17,398 - INFO - エポック 20: 平均損失 = 0.6781
2025-12-14 14:16:23,746 - INFO - エポック 30: 平均損失 = 0.6522
2025-12-14 14:16:30,829 - INFO - エポック 40: 平均損失 = 0.6147
2025-12-14 14:16:38,012 - INFO - 時系列IRL訓練完了
2025-12-14 14:16:38,012 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:16:38,216 - INFO - 最適閾値: 0.2415
2025-12-14 14:16:38,216 - INFO - 訓練データ性能: Precision=0.878, Recall=1.000, F1=0.935
2025-12-14 14:16:38,219 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_0-3m/irl_model.pt
2025-12-14 14:16:38,220 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_0-3m/optimal_threshold.json
2025-12-14 14:16:38,220 - INFO - 評価用軌跡を抽出...
2025-12-14 14:16:38,220 - INFO - ================================================================================
2025-12-14 14:16:38,220 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:16:38,220 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 14:16:38,220 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:16:38,220 - INFO - 将来窓: 21～24ヶ月
2025-12-14 14:16:38,220 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 14:16:38,220 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:16:38,220 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:16:38,220 - INFO - ================================================================================
2025-12-14 14:16:38,220 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:16:38,220 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 14:16:38,224 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 14:16:39,025 - INFO - ================================================================================
2025-12-14 14:16:39,025 - INFO - 評価用軌跡抽出完了: 225サンプル
2025-12-14 14:16:39,025 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:16:39,025 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 269
2025-12-14 14:16:39,025 - INFO -   正例（この期間で承諾あり）: 186 (82.7%)
2025-12-14 14:16:39,025 - INFO -   負例（この期間で承諾なし）: 39 (17.3%)
2025-12-14 14:16:39,025 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 14:16:39,025 - INFO - ================================================================================
2025-12-14 14:16:39,026 - INFO - 予測を実行...
2025-12-14 14:16:39,204 - INFO - ================================================================================
2025-12-14 14:16:39,204 - INFO - 評価結果 (0-3m → 0-3m):
2025-12-14 14:16:39,204 - INFO -   AUC-ROC: 0.6990
2025-12-14 14:16:39,204 - INFO -   AUC-PR: 0.9134
2025-12-14 14:16:39,204 - INFO -   Precision: 0.8267
2025-12-14 14:16:39,204 - INFO -   Recall: 1.0000
2025-12-14 14:16:39,204 - INFO -   F1 Score: 0.9051
2025-12-14 14:16:39,204 - INFO - ================================================================================
2025-12-14 14:16:39,207 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_0-3m/eval_0-3m
2025-12-14 14:16:39,214 - INFO - 
【2/10】パターン実行中...
2025-12-14 14:16:39,214 - INFO - ================================================================================
2025-12-14 14:16:39,214 - INFO - パターン: 0-3m → 3-6m
2025-12-14 14:16:39,214 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:16:39,214 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:16:39,214 - INFO - ================================================================================
2025-12-14 14:16:39,214 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:16:39,754 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:16:39,754 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:16:39,754 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:16:39,754 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 14:16:39,754 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:16:39,754 - INFO - ================================================================================
2025-12-14 14:16:39,754 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:16:39,754 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:16:39,754 - INFO - 将来窓: 0～27ヶ月
2025-12-14 14:16:39,754 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:16:39,754 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:16:39,754 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:16:39,754 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:16:39,754 - INFO - ================================================================================
2025-12-14 14:16:39,755 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:16:39,755 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:16:39,768 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 14:16:43,990 - INFO - ================================================================================
2025-12-14 14:16:43,990 - INFO - 軌跡抽出完了: 402サンプル（レビュアー）
2025-12-14 14:16:43,990 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:16:43,990 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 14:16:43,990 - INFO -   正例（この期間で承諾あり）: 352 (87.6%)
2025-12-14 14:16:43,990 - INFO -   負例（この期間で承諾なし）: 50 (12.4%)
2025-12-14 14:16:43,990 - INFO -     - 依頼あり→拒否（重み=1.0）: 50
2025-12-14 14:16:43,990 - INFO -   総ステップ数: 804
2025-12-14 14:16:43,991 - INFO -   継続ステップ率: 59.1% (475/804)
2025-12-14 14:16:43,991 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:16:43,994 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:16:43,994 - INFO - 訓練データ正例率: 87.6% (352/402)
2025-12-14 14:16:43,994 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:16:43,994 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:16:43,994 - INFO - IRLモデルを訓練...
2025-12-14 14:16:43,994 - INFO - ============================================================
2025-12-14 14:16:43,994 - INFO - 時系列IRL訓練開始
2025-12-14 14:16:43,994 - INFO - 軌跡数: 402
2025-12-14 14:16:43,994 - INFO - エポック数: 50
2025-12-14 14:16:43,995 - INFO - ============================================================
2025-12-14 14:16:44,648 - INFO - エポック 0: 平均損失 = 1.0180
2025-12-14 14:16:52,932 - INFO - エポック 10: 平均損失 = 0.7151
2025-12-14 14:16:59,475 - INFO - エポック 20: 平均損失 = 0.6832
2025-12-14 14:17:05,950 - INFO - エポック 30: 平均損失 = 0.6672
2025-12-14 14:17:12,317 - INFO - エポック 40: 平均損失 = 0.6119
2025-12-14 14:17:18,129 - INFO - 時系列IRL訓練完了
2025-12-14 14:17:18,129 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:17:18,296 - INFO - 最適閾値: 0.1986
2025-12-14 14:17:18,296 - INFO - 訓練データ性能: Precision=0.876, Recall=1.000, F1=0.934
2025-12-14 14:17:18,298 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_0-3m/irl_model.pt
2025-12-14 14:17:18,298 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_0-3m/optimal_threshold.json
2025-12-14 14:17:18,298 - INFO - 評価用軌跡を抽出...
2025-12-14 14:17:18,298 - INFO - ================================================================================
2025-12-14 14:17:18,298 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:17:18,298 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 14:17:18,298 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:17:18,298 - INFO - 将来窓: 24～27ヶ月
2025-12-14 14:17:18,298 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 14:17:18,298 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:17:18,298 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:17:18,298 - INFO - ================================================================================
2025-12-14 14:17:18,298 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:17:18,298 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:17:18,301 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 14:17:18,929 - INFO - ================================================================================
2025-12-14 14:17:18,929 - INFO - 評価用軌跡抽出完了: 195サンプル
2025-12-14 14:17:18,929 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:17:18,929 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 299
2025-12-14 14:17:18,929 - INFO -   正例（この期間で承諾あり）: 157 (80.5%)
2025-12-14 14:17:18,930 - INFO -   負例（この期間で承諾なし）: 38 (19.5%)
2025-12-14 14:17:18,930 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 14:17:18,930 - INFO - ================================================================================
2025-12-14 14:17:18,930 - INFO - 予測を実行...
2025-12-14 14:17:19,050 - INFO - ================================================================================
2025-12-14 14:17:19,050 - INFO - 評価結果 (0-3m → 3-6m):
2025-12-14 14:17:19,050 - INFO -   AUC-ROC: 0.6766
2025-12-14 14:17:19,050 - INFO -   AUC-PR: 0.9027
2025-12-14 14:17:19,050 - INFO -   Precision: 0.8051
2025-12-14 14:17:19,050 - INFO -   Recall: 1.0000
2025-12-14 14:17:19,050 - INFO -   F1 Score: 0.8920
2025-12-14 14:17:19,050 - INFO - ================================================================================
2025-12-14 14:17:19,052 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_0-3m/eval_3-6m
2025-12-14 14:17:19,058 - INFO - 
【3/10】パターン実行中...
2025-12-14 14:17:19,058 - INFO - ================================================================================
2025-12-14 14:17:19,058 - INFO - パターン: 0-3m → 6-9m
2025-12-14 14:17:19,058 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:17:19,058 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:17:19,058 - INFO - ================================================================================
2025-12-14 14:17:19,058 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:17:19,445 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:17:19,445 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:17:19,445 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:17:19,445 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 14:17:19,445 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:17:19,445 - INFO - ================================================================================
2025-12-14 14:17:19,445 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:17:19,445 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:17:19,445 - INFO - 将来窓: 0～30ヶ月
2025-12-14 14:17:19,445 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:17:19,445 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:17:19,445 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:17:19,445 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:17:19,445 - INFO - ================================================================================
2025-12-14 14:17:19,446 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:17:19,446 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:17:19,458 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 14:17:23,627 - INFO - ================================================================================
2025-12-14 14:17:23,627 - INFO - 軌跡抽出完了: 402サンプル（レビュアー）
2025-12-14 14:17:23,627 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:17:23,627 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 14:17:23,627 - INFO -   正例（この期間で承諾あり）: 354 (88.1%)
2025-12-14 14:17:23,627 - INFO -   負例（この期間で承諾なし）: 48 (11.9%)
2025-12-14 14:17:23,627 - INFO -     - 依頼あり→拒否（重み=1.0）: 48
2025-12-14 14:17:23,627 - INFO -   総ステップ数: 804
2025-12-14 14:17:23,627 - INFO -   継続ステップ率: 59.1% (475/804)
2025-12-14 14:17:23,627 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:17:23,631 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:17:23,631 - INFO - 訓練データ正例率: 88.1% (354/402)
2025-12-14 14:17:23,631 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:17:23,631 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:17:23,631 - INFO - IRLモデルを訓練...
2025-12-14 14:17:23,631 - INFO - ============================================================
2025-12-14 14:17:23,631 - INFO - 時系列IRL訓練開始
2025-12-14 14:17:23,631 - INFO - 軌跡数: 402
2025-12-14 14:17:23,631 - INFO - エポック数: 50
2025-12-14 14:17:23,631 - INFO - ============================================================
2025-12-14 14:17:24,282 - INFO - エポック 0: 平均損失 = 0.9879
2025-12-14 14:17:31,325 - INFO - エポック 10: 平均損失 = 0.7258
2025-12-14 14:17:38,525 - INFO - エポック 20: 平均損失 = 0.6767
2025-12-14 14:17:45,384 - INFO - エポック 30: 平均損失 = 0.6477
2025-12-14 14:17:52,166 - INFO - エポック 40: 平均損失 = 0.6271
2025-12-14 14:17:58,635 - INFO - 時系列IRL訓練完了
2025-12-14 14:17:58,635 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:17:58,809 - INFO - 最適閾値: 0.2657
2025-12-14 14:17:58,809 - INFO - 訓練データ性能: Precision=0.883, Recall=1.000, F1=0.938
2025-12-14 14:17:58,810 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_0-3m/irl_model.pt
2025-12-14 14:17:58,810 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_0-3m/optimal_threshold.json
2025-12-14 14:17:58,810 - INFO - 評価用軌跡を抽出...
2025-12-14 14:17:58,810 - INFO - ================================================================================
2025-12-14 14:17:58,810 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:17:58,810 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 14:17:58,810 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:17:58,810 - INFO - 将来窓: 27～30ヶ月
2025-12-14 14:17:58,810 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 14:17:58,811 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:17:58,811 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:17:58,811 - INFO - ================================================================================
2025-12-14 14:17:58,811 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:17:58,811 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:17:58,814 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 14:17:59,415 - INFO - ================================================================================
2025-12-14 14:17:59,415 - INFO - 評価用軌跡抽出完了: 177サンプル
2025-12-14 14:17:59,415 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:17:59,415 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 317
2025-12-14 14:17:59,415 - INFO -   正例（この期間で承諾あり）: 160 (90.4%)
2025-12-14 14:17:59,415 - INFO -   負例（この期間で承諾なし）: 17 (9.6%)
2025-12-14 14:17:59,415 - INFO -     - 依頼あり→拒否（重み=1.0）: 17
2025-12-14 14:17:59,416 - INFO - ================================================================================
2025-12-14 14:17:59,416 - INFO - 予測を実行...
2025-12-14 14:17:59,524 - INFO - ================================================================================
2025-12-14 14:17:59,524 - INFO - 評価結果 (0-3m → 6-9m):
2025-12-14 14:17:59,524 - INFO -   AUC-ROC: 0.6599
2025-12-14 14:17:59,524 - INFO -   AUC-PR: 0.9412
2025-12-14 14:17:59,524 - INFO -   Precision: 0.9040
2025-12-14 14:17:59,524 - INFO -   Recall: 1.0000
2025-12-14 14:17:59,524 - INFO -   F1 Score: 0.9496
2025-12-14 14:17:59,524 - INFO - ================================================================================
2025-12-14 14:17:59,526 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_0-3m/eval_6-9m
2025-12-14 14:17:59,533 - INFO - 
【4/10】パターン実行中...
2025-12-14 14:17:59,533 - INFO - ================================================================================
2025-12-14 14:17:59,533 - INFO - パターン: 0-3m → 9-12m
2025-12-14 14:17:59,533 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:17:59,533 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:17:59,533 - INFO - ================================================================================
2025-12-14 14:17:59,533 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:17:59,961 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:17:59,962 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:17:59,962 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:17:59,962 - INFO - 将来窓設定: 0～33ヶ月
2025-12-14 14:17:59,962 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:17:59,962 - INFO - ================================================================================
2025-12-14 14:17:59,962 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:17:59,962 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:17:59,962 - INFO - 将来窓: 0～33ヶ月
2025-12-14 14:17:59,962 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:17:59,962 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:17:59,962 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:17:59,962 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:17:59,962 - INFO - ================================================================================
2025-12-14 14:17:59,962 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:17:59,962 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:17:59,976 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 14:18:04,311 - INFO - ================================================================================
2025-12-14 14:18:04,311 - INFO - 軌跡抽出完了: 404サンプル（レビュアー）
2025-12-14 14:18:04,311 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:18:04,311 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 90
2025-12-14 14:18:04,311 - INFO -   正例（この期間で承諾あり）: 357 (88.4%)
2025-12-14 14:18:04,311 - INFO -   負例（この期間で承諾なし）: 47 (11.6%)
2025-12-14 14:18:04,311 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 14:18:04,311 - INFO -   総ステップ数: 808
2025-12-14 14:18:04,311 - INFO -   継続ステップ率: 58.8% (475/808)
2025-12-14 14:18:04,311 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:18:04,316 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:18:04,316 - INFO - 訓練データ正例率: 88.4% (357/404)
2025-12-14 14:18:04,316 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:18:04,316 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:18:04,316 - INFO - IRLモデルを訓練...
2025-12-14 14:18:04,316 - INFO - ============================================================
2025-12-14 14:18:04,316 - INFO - 時系列IRL訓練開始
2025-12-14 14:18:04,316 - INFO - 軌跡数: 404
2025-12-14 14:18:04,316 - INFO - エポック数: 50
2025-12-14 14:18:04,316 - INFO - ============================================================
2025-12-14 14:18:04,953 - INFO - エポック 0: 平均損失 = 0.9906
2025-12-14 14:18:11,581 - INFO - エポック 10: 平均損失 = 0.7155
2025-12-14 14:18:18,039 - INFO - エポック 20: 平均損失 = 0.6768
2025-12-14 14:18:24,835 - INFO - エポック 30: 平均損失 = 0.6601
2025-12-14 14:18:31,384 - INFO - エポック 40: 平均損失 = 0.6235
2025-12-14 14:18:37,355 - INFO - 時系列IRL訓練完了
2025-12-14 14:18:37,355 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:18:37,528 - INFO - 最適閾値: 0.2694
2025-12-14 14:18:37,528 - INFO - 訓練データ性能: Precision=0.884, Recall=1.000, F1=0.938
2025-12-14 14:18:37,529 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_0-3m/irl_model.pt
2025-12-14 14:18:37,529 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_0-3m/optimal_threshold.json
2025-12-14 14:18:37,529 - INFO - 評価用軌跡を抽出...
2025-12-14 14:18:37,529 - INFO - ================================================================================
2025-12-14 14:18:37,529 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:18:37,529 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 14:18:37,529 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:18:37,530 - INFO - 将来窓: 30～33ヶ月
2025-12-14 14:18:37,530 - INFO - 拡張ラベル期間: 30～12ヶ月
2025-12-14 14:18:37,530 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:18:37,530 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:18:37,530 - INFO - ================================================================================
2025-12-14 14:18:37,530 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:18:37,530 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:18:37,533 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 14:18:38,146 - INFO - ================================================================================
2025-12-14 14:18:38,146 - INFO - 評価用軌跡抽出完了: 165サンプル
2025-12-14 14:18:38,146 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:18:38,146 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 329
2025-12-14 14:18:38,146 - INFO -   正例（この期間で承諾あり）: 129 (78.2%)
2025-12-14 14:18:38,146 - INFO -   負例（この期間で承諾なし）: 36 (21.8%)
2025-12-14 14:18:38,146 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 14:18:38,146 - INFO - ================================================================================
2025-12-14 14:18:38,147 - INFO - 予測を実行...
2025-12-14 14:18:38,258 - INFO - ================================================================================
2025-12-14 14:18:38,258 - INFO - 評価結果 (0-3m → 9-12m):
2025-12-14 14:18:38,258 - INFO -   AUC-ROC: 0.5564
2025-12-14 14:18:38,258 - INFO -   AUC-PR: 0.7958
2025-12-14 14:18:38,258 - INFO -   Precision: 0.7818
2025-12-14 14:18:38,258 - INFO -   Recall: 1.0000
2025-12-14 14:18:38,258 - INFO -   F1 Score: 0.8776
2025-12-14 14:18:38,258 - INFO - ================================================================================
2025-12-14 14:18:38,259 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_0-3m/eval_9-12m
2025-12-14 14:18:38,267 - INFO - 
【5/10】パターン実行中...
2025-12-14 14:18:38,267 - INFO - ================================================================================
2025-12-14 14:18:38,267 - INFO - パターン: 3-6m → 3-6m
2025-12-14 14:18:38,267 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:18:38,267 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:18:38,267 - INFO - ================================================================================
2025-12-14 14:18:38,267 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:18:38,663 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:18:38,663 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:18:38,664 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:18:38,664 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 14:18:38,664 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:18:38,664 - INFO - ================================================================================
2025-12-14 14:18:38,664 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:18:38,664 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:18:38,664 - INFO - 将来窓: 0～24ヶ月
2025-12-14 14:18:38,664 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:18:38,664 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:18:38,664 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:18:38,664 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:18:38,664 - INFO - ================================================================================
2025-12-14 14:18:38,664 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:18:38,664 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:18:38,674 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 14:18:42,585 - INFO - ================================================================================
2025-12-14 14:18:42,585 - INFO - 軌跡抽出完了: 392サンプル（レビュアー）
2025-12-14 14:18:42,585 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:18:42,585 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 14:18:42,585 - INFO -   正例（この期間で承諾あり）: 345 (88.0%)
2025-12-14 14:18:42,585 - INFO -   負例（この期間で承諾なし）: 47 (12.0%)
2025-12-14 14:18:42,585 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 14:18:42,585 - INFO -   総ステップ数: 784
2025-12-14 14:18:42,585 - INFO -   継続ステップ率: 53.3% (418/784)
2025-12-14 14:18:42,585 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:18:42,588 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:18:42,588 - INFO - 訓練データ正例率: 88.0% (345/392)
2025-12-14 14:18:42,588 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:18:42,588 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:18:42,588 - INFO - IRLモデルを訓練...
2025-12-14 14:18:42,588 - INFO - ============================================================
2025-12-14 14:18:42,588 - INFO - 時系列IRL訓練開始
2025-12-14 14:18:42,588 - INFO - 軌跡数: 392
2025-12-14 14:18:42,588 - INFO - エポック数: 50
2025-12-14 14:18:42,588 - INFO - ============================================================
2025-12-14 14:18:43,259 - INFO - エポック 0: 平均損失 = 0.9322
2025-12-14 14:18:49,767 - INFO - エポック 10: 平均損失 = 0.6677
2025-12-14 14:18:56,312 - INFO - エポック 20: 平均損失 = 0.6296
2025-12-14 14:19:02,864 - INFO - エポック 30: 平均損失 = 0.5946
2025-12-14 14:19:09,489 - INFO - エポック 40: 平均損失 = 0.5906
2025-12-14 14:19:15,416 - INFO - 時系列IRL訓練完了
2025-12-14 14:19:15,416 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:19:15,570 - INFO - 最適閾値: 0.2412
2025-12-14 14:19:15,570 - INFO - 訓練データ性能: Precision=0.886, Recall=0.994, F1=0.937
2025-12-14 14:19:15,571 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_3-6m/irl_model.pt
2025-12-14 14:19:15,571 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_3-6m/optimal_threshold.json
2025-12-14 14:19:15,571 - INFO - 評価用軌跡を抽出...
2025-12-14 14:19:15,571 - INFO - ================================================================================
2025-12-14 14:19:15,571 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:19:15,571 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 14:19:15,571 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:19:15,571 - INFO - 将来窓: 21～24ヶ月
2025-12-14 14:19:15,571 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 14:19:15,571 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:19:15,571 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:19:15,572 - INFO - ================================================================================
2025-12-14 14:19:15,572 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:19:15,572 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:19:15,574 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 14:19:16,131 - INFO - ================================================================================
2025-12-14 14:19:16,131 - INFO - 評価用軌跡抽出完了: 197サンプル
2025-12-14 14:19:16,131 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:19:16,131 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 264
2025-12-14 14:19:16,131 - INFO -   正例（この期間で承諾あり）: 160 (81.2%)
2025-12-14 14:19:16,131 - INFO -   負例（この期間で承諾なし）: 37 (18.8%)
2025-12-14 14:19:16,131 - INFO -     - 依頼あり→拒否（重み=1.0）: 37
2025-12-14 14:19:16,131 - INFO - ================================================================================
2025-12-14 14:19:16,132 - INFO - 予測を実行...
2025-12-14 14:19:16,239 - INFO - ================================================================================
2025-12-14 14:19:16,239 - INFO - 評価結果 (3-6m → 3-6m):
2025-12-14 14:19:16,239 - INFO -   AUC-ROC: 0.7067
2025-12-14 14:19:16,239 - INFO -   AUC-PR: 0.9139
2025-12-14 14:19:16,239 - INFO -   Precision: 0.8163
2025-12-14 14:19:16,239 - INFO -   Recall: 1.0000
2025-12-14 14:19:16,239 - INFO -   F1 Score: 0.8989
2025-12-14 14:19:16,239 - INFO - ================================================================================
2025-12-14 14:19:16,241 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_3-6m/eval_3-6m
2025-12-14 14:19:16,249 - INFO - 
【6/10】パターン実行中...
2025-12-14 14:19:16,249 - INFO - ================================================================================
2025-12-14 14:19:16,249 - INFO - パターン: 3-6m → 6-9m
2025-12-14 14:19:16,249 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:19:16,249 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:19:16,249 - INFO - ================================================================================
2025-12-14 14:19:16,249 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:19:16,660 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:19:16,660 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:19:16,660 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:19:16,660 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 14:19:16,660 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:19:16,660 - INFO - ================================================================================
2025-12-14 14:19:16,660 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:19:16,660 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:19:16,660 - INFO - 将来窓: 0～27ヶ月
2025-12-14 14:19:16,660 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:19:16,660 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:19:16,660 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:19:16,660 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:19:16,660 - INFO - ================================================================================
2025-12-14 14:19:16,661 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:19:16,661 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:19:16,672 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 14:19:20,681 - INFO - ================================================================================
2025-12-14 14:19:20,681 - INFO - 軌跡抽出完了: 392サンプル（レビュアー）
2025-12-14 14:19:20,681 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:19:20,681 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 14:19:20,681 - INFO -   正例（この期間で承諾あり）: 350 (89.3%)
2025-12-14 14:19:20,681 - INFO -   負例（この期間で承諾なし）: 42 (10.7%)
2025-12-14 14:19:20,681 - INFO -     - 依頼あり→拒否（重み=1.0）: 42
2025-12-14 14:19:20,681 - INFO -   総ステップ数: 784
2025-12-14 14:19:20,681 - INFO -   継続ステップ率: 53.3% (418/784)
2025-12-14 14:19:20,681 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:19:20,685 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:19:20,685 - INFO - 訓練データ正例率: 89.3% (350/392)
2025-12-14 14:19:20,685 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:19:20,685 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:19:20,685 - INFO - IRLモデルを訓練...
2025-12-14 14:19:20,685 - INFO - ============================================================
2025-12-14 14:19:20,685 - INFO - 時系列IRL訓練開始
2025-12-14 14:19:20,685 - INFO - 軌跡数: 392
2025-12-14 14:19:20,685 - INFO - エポック数: 50
2025-12-14 14:19:20,685 - INFO - ============================================================
2025-12-14 14:19:21,425 - INFO - エポック 0: 平均損失 = 0.9467
2025-12-14 14:19:28,092 - INFO - エポック 10: 平均損失 = 0.6752
2025-12-14 14:19:34,751 - INFO - エポック 20: 平均損失 = 0.6298
2025-12-14 14:19:41,503 - INFO - エポック 30: 平均損失 = 0.5991
2025-12-14 14:19:48,156 - INFO - エポック 40: 平均損失 = 0.5871
2025-12-14 14:19:54,296 - INFO - 時系列IRL訓練完了
2025-12-14 14:19:54,296 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:19:54,449 - INFO - 最適閾値: 0.2648
2025-12-14 14:19:54,449 - INFO - 訓練データ性能: Precision=0.893, Recall=1.000, F1=0.943
2025-12-14 14:19:54,450 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_3-6m/irl_model.pt
2025-12-14 14:19:54,451 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_3-6m/optimal_threshold.json
2025-12-14 14:19:54,451 - INFO - 評価用軌跡を抽出...
2025-12-14 14:19:54,451 - INFO - ================================================================================
2025-12-14 14:19:54,451 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:19:54,451 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 14:19:54,451 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:19:54,451 - INFO - 将来窓: 24～27ヶ月
2025-12-14 14:19:54,451 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 14:19:54,451 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:19:54,451 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:19:54,451 - INFO - ================================================================================
2025-12-14 14:19:54,451 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:19:54,451 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:19:54,454 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 14:19:54,994 - INFO - ================================================================================
2025-12-14 14:19:54,994 - INFO - 評価用軌跡抽出完了: 184サンプル
2025-12-14 14:19:54,994 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:19:54,994 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 277
2025-12-14 14:19:54,994 - INFO -   正例（この期間で承諾あり）: 165 (89.7%)
2025-12-14 14:19:54,994 - INFO -   負例（この期間で承諾なし）: 19 (10.3%)
2025-12-14 14:19:54,994 - INFO -     - 依頼あり→拒否（重み=1.0）: 19
2025-12-14 14:19:54,994 - INFO - ================================================================================
2025-12-14 14:19:54,995 - INFO - 予測を実行...
2025-12-14 14:19:55,093 - INFO - ================================================================================
2025-12-14 14:19:55,093 - INFO - 評価結果 (3-6m → 6-9m):
2025-12-14 14:19:55,093 - INFO -   AUC-ROC: 0.6947
2025-12-14 14:19:55,093 - INFO -   AUC-PR: 0.9380
2025-12-14 14:19:55,093 - INFO -   Precision: 0.8967
2025-12-14 14:19:55,093 - INFO -   Recall: 1.0000
2025-12-14 14:19:55,093 - INFO -   F1 Score: 0.9456
2025-12-14 14:19:55,093 - INFO - ================================================================================
2025-12-14 14:19:55,095 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_3-6m/eval_6-9m
2025-12-14 14:19:55,102 - INFO - 
【7/10】パターン実行中...
2025-12-14 14:19:55,102 - INFO - ================================================================================
2025-12-14 14:19:55,102 - INFO - パターン: 3-6m → 9-12m
2025-12-14 14:19:55,102 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:19:55,102 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:19:55,102 - INFO - ================================================================================
2025-12-14 14:19:55,102 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:19:55,588 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:19:55,588 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:19:55,588 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:19:55,588 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 14:19:55,588 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:19:55,588 - INFO - ================================================================================
2025-12-14 14:19:55,588 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:19:55,588 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:19:55,588 - INFO - 将来窓: 0～30ヶ月
2025-12-14 14:19:55,588 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:19:55,588 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:19:55,588 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:19:55,588 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:19:55,589 - INFO - ================================================================================
2025-12-14 14:19:55,589 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:19:55,589 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:19:55,600 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 14:19:59,557 - INFO - ================================================================================
2025-12-14 14:19:59,557 - INFO - 軌跡抽出完了: 392サンプル（レビュアー）
2025-12-14 14:19:59,557 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:19:59,557 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 14:19:59,557 - INFO -   正例（この期間で承諾あり）: 353 (90.1%)
2025-12-14 14:19:59,557 - INFO -   負例（この期間で承諾なし）: 39 (9.9%)
2025-12-14 14:19:59,557 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 14:19:59,557 - INFO -   総ステップ数: 784
2025-12-14 14:19:59,557 - INFO -   継続ステップ率: 53.3% (418/784)
2025-12-14 14:19:59,557 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:19:59,561 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:19:59,561 - INFO - 訓練データ正例率: 90.1% (353/392)
2025-12-14 14:19:59,561 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:19:59,561 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:19:59,561 - INFO - IRLモデルを訓練...
2025-12-14 14:19:59,561 - INFO - ============================================================
2025-12-14 14:19:59,561 - INFO - 時系列IRL訓練開始
2025-12-14 14:19:59,561 - INFO - 軌跡数: 392
2025-12-14 14:19:59,561 - INFO - エポック数: 50
2025-12-14 14:19:59,561 - INFO - ============================================================
2025-12-14 14:20:00,299 - INFO - エポック 0: 平均損失 = 0.9459
2025-12-14 14:20:07,676 - INFO - エポック 10: 平均損失 = 0.6764
2025-12-14 14:20:15,155 - INFO - エポック 20: 平均損失 = 0.6377
2025-12-14 14:20:22,575 - INFO - エポック 30: 平均損失 = 0.6202
2025-12-14 14:20:29,995 - INFO - エポック 40: 平均損失 = 0.5808
2025-12-14 14:20:36,647 - INFO - 時系列IRL訓練完了
2025-12-14 14:20:36,647 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:20:36,798 - INFO - 最適閾値: 0.2567
2025-12-14 14:20:36,798 - INFO - 訓練データ性能: Precision=0.901, Recall=1.000, F1=0.948
2025-12-14 14:20:36,799 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_3-6m/irl_model.pt
2025-12-14 14:20:36,799 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_3-6m/optimal_threshold.json
2025-12-14 14:20:36,799 - INFO - 評価用軌跡を抽出...
2025-12-14 14:20:36,799 - INFO - ================================================================================
2025-12-14 14:20:36,799 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:20:36,799 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 14:20:36,799 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:20:36,799 - INFO - 将来窓: 27～30ヶ月
2025-12-14 14:20:36,799 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 14:20:36,799 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:20:36,799 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:20:36,799 - INFO - ================================================================================
2025-12-14 14:20:36,799 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:20:36,799 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:20:36,802 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 14:20:37,304 - INFO - ================================================================================
2025-12-14 14:20:37,305 - INFO - 評価用軌跡抽出完了: 168サンプル
2025-12-14 14:20:37,305 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:20:37,305 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 293
2025-12-14 14:20:37,305 - INFO -   正例（この期間で承諾あり）: 132 (78.6%)
2025-12-14 14:20:37,305 - INFO -   負例（この期間で承諾なし）: 36 (21.4%)
2025-12-14 14:20:37,305 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 14:20:37,305 - INFO - ================================================================================
2025-12-14 14:20:37,306 - INFO - 予測を実行...
2025-12-14 14:20:37,448 - INFO - ================================================================================
2025-12-14 14:20:37,448 - INFO - 評価結果 (3-6m → 9-12m):
2025-12-14 14:20:37,448 - INFO -   AUC-ROC: 0.6010
2025-12-14 14:20:37,448 - INFO -   AUC-PR: 0.8334
2025-12-14 14:20:37,448 - INFO -   Precision: 0.7857
2025-12-14 14:20:37,448 - INFO -   Recall: 1.0000
2025-12-14 14:20:37,448 - INFO -   F1 Score: 0.8800
2025-12-14 14:20:37,448 - INFO - ================================================================================
2025-12-14 14:20:37,449 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_3-6m/eval_9-12m
2025-12-14 14:20:37,456 - INFO - 
【8/10】パターン実行中...
2025-12-14 14:20:37,456 - INFO - ================================================================================
2025-12-14 14:20:37,456 - INFO - パターン: 6-9m → 6-9m
2025-12-14 14:20:37,456 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:20:37,456 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:20:37,456 - INFO - ================================================================================
2025-12-14 14:20:37,456 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:20:37,909 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:20:37,909 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:20:37,909 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:20:37,909 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 14:20:37,909 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:20:37,909 - INFO - ================================================================================
2025-12-14 14:20:37,909 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:20:37,909 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:20:37,909 - INFO - 将来窓: 0～24ヶ月
2025-12-14 14:20:37,909 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:20:37,909 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:20:37,909 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:20:37,909 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:20:37,910 - INFO - ================================================================================
2025-12-14 14:20:37,910 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:20:37,910 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:20:37,924 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 14:20:41,586 - INFO - ================================================================================
2025-12-14 14:20:41,586 - INFO - 軌跡抽出完了: 359サンプル（レビュアー）
2025-12-14 14:20:41,586 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:20:41,586 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 113
2025-12-14 14:20:41,586 - INFO -   正例（この期間で承諾あり）: 321 (89.4%)
2025-12-14 14:20:41,586 - INFO -   負例（この期間で承諾なし）: 38 (10.6%)
2025-12-14 14:20:41,586 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 14:20:41,586 - INFO -   総ステップ数: 718
2025-12-14 14:20:41,586 - INFO -   継続ステップ率: 59.6% (428/718)
2025-12-14 14:20:41,586 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:20:41,590 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:20:41,590 - INFO - 訓練データ正例率: 89.4% (321/359)
2025-12-14 14:20:41,590 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:20:41,590 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:20:41,590 - INFO - IRLモデルを訓練...
2025-12-14 14:20:41,590 - INFO - ============================================================
2025-12-14 14:20:41,590 - INFO - 時系列IRL訓練開始
2025-12-14 14:20:41,590 - INFO - 軌跡数: 359
2025-12-14 14:20:41,590 - INFO - エポック数: 50
2025-12-14 14:20:41,590 - INFO - ============================================================
2025-12-14 14:20:42,272 - INFO - エポック 0: 平均損失 = 0.9152
2025-12-14 14:20:48,761 - INFO - エポック 10: 平均損失 = 0.6762
2025-12-14 14:20:55,171 - INFO - エポック 20: 平均損失 = 0.6552
2025-12-14 14:21:01,586 - INFO - エポック 30: 平均損失 = 0.6243
2025-12-14 14:21:07,900 - INFO - エポック 40: 平均損失 = 0.5949
2025-12-14 14:21:13,658 - INFO - 時系列IRL訓練完了
2025-12-14 14:21:13,658 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:21:13,802 - INFO - 最適閾値: 0.1629
2025-12-14 14:21:13,802 - INFO - 訓練データ性能: Precision=0.894, Recall=1.000, F1=0.944
2025-12-14 14:21:13,803 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_6-9m/irl_model.pt
2025-12-14 14:21:13,803 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_6-9m/optimal_threshold.json
2025-12-14 14:21:13,803 - INFO - 評価用軌跡を抽出...
2025-12-14 14:21:13,804 - INFO - ================================================================================
2025-12-14 14:21:13,804 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:21:13,804 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 14:21:13,804 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:21:13,804 - INFO - 将来窓: 21～24ヶ月
2025-12-14 14:21:13,804 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 14:21:13,804 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:21:13,804 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:21:13,804 - INFO - ================================================================================
2025-12-14 14:21:13,804 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:21:13,804 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:21:13,807 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 14:21:14,405 - INFO - ================================================================================
2025-12-14 14:21:14,405 - INFO - 評価用軌跡抽出完了: 183サンプル
2025-12-14 14:21:14,405 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:21:14,405 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 289
2025-12-14 14:21:14,405 - INFO -   正例（この期間で承諾あり）: 165 (90.2%)
2025-12-14 14:21:14,405 - INFO -   負例（この期間で承諾なし）: 18 (9.8%)
2025-12-14 14:21:14,405 - INFO -     - 依頼あり→拒否（重み=1.0）: 18
2025-12-14 14:21:14,405 - INFO - ================================================================================
2025-12-14 14:21:14,405 - INFO - 予測を実行...
2025-12-14 14:21:14,509 - INFO - ================================================================================
2025-12-14 14:21:14,509 - INFO - 評価結果 (6-9m → 6-9m):
2025-12-14 14:21:14,509 - INFO -   AUC-ROC: 0.7030
2025-12-14 14:21:14,509 - INFO -   AUC-PR: 0.9407
2025-12-14 14:21:14,509 - INFO -   Precision: 0.9016
2025-12-14 14:21:14,509 - INFO -   Recall: 1.0000
2025-12-14 14:21:14,509 - INFO -   F1 Score: 0.9483
2025-12-14 14:21:14,509 - INFO - ================================================================================
2025-12-14 14:21:14,510 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_6-9m/eval_6-9m
2025-12-14 14:21:14,519 - INFO - 
【9/10】パターン実行中...
2025-12-14 14:21:14,519 - INFO - ================================================================================
2025-12-14 14:21:14,519 - INFO - パターン: 6-9m → 9-12m
2025-12-14 14:21:14,519 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:21:14,519 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:21:14,519 - INFO - ================================================================================
2025-12-14 14:21:14,519 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:21:14,926 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:21:14,926 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:21:14,926 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:21:14,926 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 14:21:14,926 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:21:14,926 - INFO - ================================================================================
2025-12-14 14:21:14,926 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:21:14,926 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:21:14,926 - INFO - 将来窓: 0～27ヶ月
2025-12-14 14:21:14,926 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:21:14,926 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:21:14,926 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:21:14,926 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:21:14,926 - INFO - ================================================================================
2025-12-14 14:21:14,926 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:21:14,926 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:21:14,937 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 14:21:18,674 - INFO - ================================================================================
2025-12-14 14:21:18,674 - INFO - 軌跡抽出完了: 361サンプル（レビュアー）
2025-12-14 14:21:18,674 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:21:18,674 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 111
2025-12-14 14:21:18,674 - INFO -   正例（この期間で承諾あり）: 322 (89.2%)
2025-12-14 14:21:18,674 - INFO -   負例（この期間で承諾なし）: 39 (10.8%)
2025-12-14 14:21:18,674 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 14:21:18,674 - INFO -   総ステップ数: 722
2025-12-14 14:21:18,674 - INFO -   継続ステップ率: 59.4% (429/722)
2025-12-14 14:21:18,674 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:21:18,678 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:21:18,678 - INFO - 訓練データ正例率: 89.2% (322/361)
2025-12-14 14:21:18,678 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:21:18,678 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:21:18,678 - INFO - IRLモデルを訓練...
2025-12-14 14:21:18,678 - INFO - ============================================================
2025-12-14 14:21:18,678 - INFO - 時系列IRL訓練開始
2025-12-14 14:21:18,678 - INFO - 軌跡数: 361
2025-12-14 14:21:18,678 - INFO - エポック数: 50
2025-12-14 14:21:18,678 - INFO - ============================================================
2025-12-14 14:21:19,368 - INFO - エポック 0: 平均損失 = 0.9499
2025-12-14 14:21:26,137 - INFO - エポック 10: 平均損失 = 0.6973
2025-12-14 14:21:32,651 - INFO - エポック 20: 平均損失 = 0.6576
2025-12-14 14:21:39,121 - INFO - エポック 30: 平均損失 = 0.6214
2025-12-14 14:21:46,001 - INFO - エポック 40: 平均損失 = 0.5929
2025-12-14 14:21:52,229 - INFO - 時系列IRL訓練完了
2025-12-14 14:21:52,229 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:21:52,377 - INFO - 最適閾値: 0.1815
2025-12-14 14:21:52,377 - INFO - 訓練データ性能: Precision=0.892, Recall=1.000, F1=0.943
2025-12-14 14:21:52,378 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_6-9m/irl_model.pt
2025-12-14 14:21:52,378 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_6-9m/optimal_threshold.json
2025-12-14 14:21:52,378 - INFO - 評価用軌跡を抽出...
2025-12-14 14:21:52,378 - INFO - ================================================================================
2025-12-14 14:21:52,379 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:21:52,379 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 14:21:52,379 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:21:52,379 - INFO - 将来窓: 24～27ヶ月
2025-12-14 14:21:52,379 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 14:21:52,379 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:21:52,379 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:21:52,379 - INFO - ================================================================================
2025-12-14 14:21:52,379 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:21:52,379 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:21:52,381 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 14:21:52,901 - INFO - ================================================================================
2025-12-14 14:21:52,902 - INFO - 評価用軌跡抽出完了: 160サンプル
2025-12-14 14:21:52,902 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:21:52,902 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 312
2025-12-14 14:21:52,902 - INFO -   正例（この期間で承諾あり）: 126 (78.8%)
2025-12-14 14:21:52,902 - INFO -   負例（この期間で承諾なし）: 34 (21.2%)
2025-12-14 14:21:52,902 - INFO -     - 依頼あり→拒否（重み=1.0）: 34
2025-12-14 14:21:52,902 - INFO - ================================================================================
2025-12-14 14:21:52,903 - INFO - 予測を実行...
2025-12-14 14:21:52,999 - INFO - ================================================================================
2025-12-14 14:21:52,999 - INFO - 評価結果 (6-9m → 9-12m):
2025-12-14 14:21:52,999 - INFO -   AUC-ROC: 0.6611
2025-12-14 14:21:52,999 - INFO -   AUC-PR: 0.8463
2025-12-14 14:21:52,999 - INFO -   Precision: 0.7875
2025-12-14 14:21:52,999 - INFO -   Recall: 1.0000
2025-12-14 14:21:52,999 - INFO -   F1 Score: 0.8811
2025-12-14 14:21:52,999 - INFO - ================================================================================
2025-12-14 14:21:53,000 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_6-9m/eval_9-12m
2025-12-14 14:21:53,007 - INFO - 
【10/10】パターン実行中...
2025-12-14 14:21:53,008 - INFO - ================================================================================
2025-12-14 14:21:53,008 - INFO - パターン: 9-12m → 9-12m
2025-12-14 14:21:53,008 - INFO - 訓練期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 14:21:53,008 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:21:53,008 - INFO - ================================================================================
2025-12-14 14:21:53,008 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:21:53,445 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:21:53,446 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:21:53,446 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:21:53,446 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 14:21:53,446 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:21:53,446 - INFO - ================================================================================
2025-12-14 14:21:53,446 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:21:53,446 - INFO - 訓練期間全体: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 14:21:53,446 - INFO - 将来窓: 0～24ヶ月
2025-12-14 14:21:53,446 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:21:53,446 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:21:53,446 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:21:53,446 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:21:53,446 - INFO - ================================================================================
2025-12-14 14:21:53,446 - INFO - 特徴量計算期間（訓練全体）: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 14:21:53,446 - INFO - 全体ラベル期間（train_end時点から）: 2022-01-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:21:53,457 - INFO - 特徴量計算期間内のレビュアー数: 449
2025-12-14 14:21:56,845 - INFO - ================================================================================
2025-12-14 14:21:56,845 - INFO - 軌跡抽出完了: 349サンプル（レビュアー）
2025-12-14 14:21:56,845 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:21:56,845 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 100
2025-12-14 14:21:56,845 - INFO -   正例（この期間で承諾あり）: 313 (89.7%)
2025-12-14 14:21:56,845 - INFO -   負例（この期間で承諾なし）: 36 (10.3%)
2025-12-14 14:21:56,845 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 14:21:56,845 - INFO -   総ステップ数: 698
2025-12-14 14:21:56,845 - INFO -   継続ステップ率: 50.1% (350/698)
2025-12-14 14:21:56,845 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:21:56,848 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:21:56,848 - INFO - 訓練データ正例率: 89.7% (313/349)
2025-12-14 14:21:56,848 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:21:56,848 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:21:56,848 - INFO - IRLモデルを訓練...
2025-12-14 14:21:56,848 - INFO - ============================================================
2025-12-14 14:21:56,848 - INFO - 時系列IRL訓練開始
2025-12-14 14:21:56,848 - INFO - 軌跡数: 349
2025-12-14 14:21:56,848 - INFO - エポック数: 50
2025-12-14 14:21:56,848 - INFO - ============================================================
2025-12-14 14:21:57,440 - INFO - エポック 0: 平均損失 = 0.9970
2025-12-14 14:22:03,536 - INFO - エポック 10: 平均損失 = 0.6997
2025-12-14 14:22:09,501 - INFO - エポック 20: 平均損失 = 0.6779
2025-12-14 14:22:15,631 - INFO - エポック 30: 平均損失 = 0.6349
2025-12-14 14:22:21,683 - INFO - エポック 40: 平均損失 = 0.6082
2025-12-14 14:22:27,017 - INFO - 時系列IRL訓練完了
2025-12-14 14:22:27,017 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:22:27,146 - INFO - 最適閾値: 0.1886
2025-12-14 14:22:27,146 - INFO - 訓練データ性能: Precision=0.897, Recall=1.000, F1=0.946
2025-12-14 14:22:27,147 - INFO - モデルを保存: outputs/50projects_irl_improved/no_os/train_9-12m/irl_model.pt
2025-12-14 14:22:27,147 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/no_os/train_9-12m/optimal_threshold.json
2025-12-14 14:22:27,147 - INFO - 評価用軌跡を抽出...
2025-12-14 14:22:27,147 - INFO - ================================================================================
2025-12-14 14:22:27,147 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:22:27,147 - INFO - Cutoff日: 2022-01-01 00:00:00
2025-12-14 14:22:27,147 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:22:27,147 - INFO - 将来窓: 21～24ヶ月
2025-12-14 14:22:27,147 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 14:22:27,147 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:22:27,147 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:22:27,147 - INFO - ================================================================================
2025-12-14 14:22:27,148 - INFO - 履歴期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 14:22:27,148 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:22:27,151 - INFO - 履歴期間内のレビュアー数: 449
2025-12-14 14:22:27,640 - INFO - ================================================================================
2025-12-14 14:22:27,640 - INFO - 評価用軌跡抽出完了: 167サンプル
2025-12-14 14:22:27,640 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:22:27,640 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 282
2025-12-14 14:22:27,640 - INFO -   正例（この期間で承諾あり）: 131 (78.4%)
2025-12-14 14:22:27,640 - INFO -   負例（この期間で承諾なし）: 36 (21.6%)
2025-12-14 14:22:27,640 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 14:22:27,640 - INFO - ================================================================================
2025-12-14 14:22:27,641 - INFO - 予測を実行...
2025-12-14 14:22:27,729 - INFO - ================================================================================
2025-12-14 14:22:27,729 - INFO - 評価結果 (9-12m → 9-12m):
2025-12-14 14:22:27,729 - INFO -   AUC-ROC: 0.6541
2025-12-14 14:22:27,729 - INFO -   AUC-PR: 0.8596
2025-12-14 14:22:27,729 - INFO -   Precision: 0.7844
2025-12-14 14:22:27,729 - INFO -   Recall: 1.0000
2025-12-14 14:22:27,729 - INFO -   F1 Score: 0.8792
2025-12-14 14:22:27,729 - INFO - ================================================================================
2025-12-14 14:22:27,730 - INFO - 結果を保存: outputs/50projects_irl_improved/no_os/train_9-12m/eval_9-12m
2025-12-14 14:22:27,737 - INFO - ================================================================================
2025-12-14 14:22:27,737 - INFO - メトリクスマトリクスを作成中...
2025-12-14 14:22:27,737 - INFO - ================================================================================
2025-12-14 14:22:27,742 - INFO - 保存: outputs/50projects_irl_improved/no_os/matrix_AUC_ROC.csv
2025-12-14 14:22:27,745 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.698994  0.676584  0.659926  0.556417
3-6m        NaN  0.706672  0.694737  0.601010
6-9m        NaN       NaN  0.703030  0.661064
9-12m       NaN       NaN       NaN  0.654050
2025-12-14 14:22:27,745 - INFO - 保存: outputs/50projects_irl_improved/no_os/matrix_AUC_PR.csv
2025-12-14 14:22:27,746 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.913426  0.902717  0.941199  0.795776
3-6m        NaN  0.913875  0.938010  0.833411
6-9m        NaN       NaN  0.940674  0.846303
9-12m       NaN       NaN       NaN  0.859640
2025-12-14 14:22:27,746 - INFO - 保存: outputs/50projects_irl_improved/no_os/matrix_PRECISION.csv
2025-12-14 14:22:27,747 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.826667  0.805128  0.903955  0.781818
3-6m        NaN  0.816327  0.896739  0.785714
6-9m        NaN       NaN  0.901639  0.787500
9-12m       NaN       NaN       NaN  0.784431
2025-12-14 14:22:27,747 - INFO - 保存: outputs/50projects_irl_improved/no_os/matrix_RECALL.csv
2025-12-14 14:22:27,749 - INFO - 
       0-3m  3-6m  6-9m  9-12m
0-3m    1.0   1.0   1.0    1.0
3-6m    NaN   1.0   1.0    1.0
6-9m    NaN   NaN   1.0    1.0
9-12m   NaN   NaN   NaN    1.0
2025-12-14 14:22:27,749 - INFO - 保存: outputs/50projects_irl_improved/no_os/matrix_f1_score.csv
2025-12-14 14:22:27,750 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.905109  0.892045  0.949555  0.877551
3-6m        NaN  0.898876  0.945559  0.880000
6-9m        NaN       NaN  0.948276  0.881119
9-12m       NaN       NaN       NaN  0.879195
2025-12-14 14:22:27,750 - INFO - ================================================================================
2025-12-14 14:22:27,750 - INFO - マトリクス作成完了
2025-12-14 14:22:27,750 - INFO - ================================================================================
2025-12-14 14:22:27,750 - INFO - ================================================================================
2025-12-14 14:22:27,750 - INFO - 全パターンの訓練・評価が完了しました
2025-12-14 14:22:27,750 - INFO - 結果: outputs/50projects_irl_improved/no_os
2025-12-14 14:22:27,750 - INFO - ================================================================================

--- [2/3] 2x Oversampling (Improved) ---
2025-12-14 14:22:28,363 - INFO - 訓練期間ベース: 2021-01-01 00:00:00
2025-12-14 14:22:28,363 - INFO - 評価期間ベース: 2023-01-01 00:00:00
2025-12-14 14:22:28,363 - INFO - 生成されたパターン数: 10
2025-12-14 14:22:28,363 - INFO -   0-3m → 0-3m
2025-12-14 14:22:28,363 - INFO -   0-3m → 3-6m
2025-12-14 14:22:28,363 - INFO -   0-3m → 6-9m
2025-12-14 14:22:28,363 - INFO -   0-3m → 9-12m
2025-12-14 14:22:28,363 - INFO -   3-6m → 3-6m
2025-12-14 14:22:28,363 - INFO -   3-6m → 6-9m
2025-12-14 14:22:28,363 - INFO -   3-6m → 9-12m
2025-12-14 14:22:28,364 - INFO -   6-9m → 6-9m
2025-12-14 14:22:28,364 - INFO -   6-9m → 9-12m
2025-12-14 14:22:28,364 - INFO -   9-12m → 9-12m
2025-12-14 14:22:28,364 - INFO - ================================================================================
2025-12-14 14:22:28,364 - INFO - 全10パターンの訓練・評価を開始
2025-12-14 14:22:28,364 - INFO - ================================================================================
2025-12-14 14:22:28,364 - INFO - 
【1/10】パターン実行中...
2025-12-14 14:22:28,364 - INFO - ================================================================================
2025-12-14 14:22:28,364 - INFO - パターン: 0-3m → 0-3m
2025-12-14 14:22:28,364 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:22:28,364 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 14:22:28,364 - INFO - ================================================================================
2025-12-14 14:22:29,410 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:22:29,810 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:22:29,811 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:22:29,811 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:22:29,811 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 14:22:29,811 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:22:29,811 - INFO - ================================================================================
2025-12-14 14:22:29,811 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:22:29,811 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:22:29,811 - INFO - 将来窓: 0～24ヶ月
2025-12-14 14:22:29,811 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:22:29,811 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:22:29,811 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:22:29,811 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:22:29,811 - INFO - ================================================================================
2025-12-14 14:22:29,811 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:22:29,811 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 14:22:29,822 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 14:22:33,920 - INFO - 負例をオーバーサンプリング: 元49件 -> 98件
2025-12-14 14:22:33,921 - INFO - ================================================================================
2025-12-14 14:22:33,921 - INFO - 軌跡抽出完了: 450サンプル（レビュアー）
2025-12-14 14:22:33,921 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:22:33,921 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 93
2025-12-14 14:22:33,921 - INFO -   正例（この期間で承諾あり）: 352 (78.2%)
2025-12-14 14:22:33,921 - INFO -   負例（この期間で承諾なし）: 49 (10.9%)
2025-12-14 14:22:33,921 - INFO -     - 依頼あり→拒否（重み=1.0）: 49
2025-12-14 14:22:33,921 - INFO -   総ステップ数: 900
2025-12-14 14:22:33,921 - INFO -   継続ステップ率: 54.9% (494/900)
2025-12-14 14:22:33,921 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:22:34,402 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:22:34,402 - INFO - 訓練データ正例率: 78.2% (352/450)
2025-12-14 14:22:34,402 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:22:34,402 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:22:34,402 - INFO - IRLモデルを訓練...
2025-12-14 14:22:34,402 - INFO - ============================================================
2025-12-14 14:22:34,402 - INFO - 時系列IRL訓練開始
2025-12-14 14:22:34,402 - INFO - 軌跡数: 450
2025-12-14 14:22:34,402 - INFO - エポック数: 50
2025-12-14 14:22:34,402 - INFO - ============================================================
2025-12-14 14:22:35,170 - INFO - エポック 0: 平均損失 = 0.9595
2025-12-14 14:22:42,617 - INFO - エポック 10: 平均損失 = 0.7284
2025-12-14 14:22:49,889 - INFO - エポック 20: 平均損失 = 0.7006
2025-12-14 14:22:57,073 - INFO - エポック 30: 平均損失 = 0.6485
2025-12-14 14:23:04,347 - INFO - エポック 40: 平均損失 = 0.5973
2025-12-14 14:23:10,972 - INFO - 時系列IRL訓練完了
2025-12-14 14:23:10,972 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:23:11,153 - INFO - 最適閾値: 0.2778
2025-12-14 14:23:11,154 - INFO - 訓練データ性能: Precision=0.792, Recall=0.986, F1=0.878
2025-12-14 14:23:11,157 - INFO - モデルを保存: outputs/50projects_irl_improved/2x_os/train_0-3m/irl_model.pt
2025-12-14 14:23:11,157 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/2x_os/train_0-3m/optimal_threshold.json
2025-12-14 14:23:11,157 - INFO - 評価用軌跡を抽出...
2025-12-14 14:23:11,157 - INFO - ================================================================================
2025-12-14 14:23:11,157 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:23:11,157 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 14:23:11,157 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:23:11,157 - INFO - 将来窓: 21～24ヶ月
2025-12-14 14:23:11,157 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 14:23:11,157 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:23:11,157 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:23:11,157 - INFO - ================================================================================
2025-12-14 14:23:11,158 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:23:11,158 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 14:23:11,161 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 14:23:11,838 - INFO - ================================================================================
2025-12-14 14:23:11,839 - INFO - 評価用軌跡抽出完了: 225サンプル
2025-12-14 14:23:11,839 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:23:11,839 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 269
2025-12-14 14:23:11,839 - INFO -   正例（この期間で承諾あり）: 186 (82.7%)
2025-12-14 14:23:11,839 - INFO -   負例（この期間で承諾なし）: 39 (17.3%)
2025-12-14 14:23:11,839 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 14:23:11,839 - INFO - ================================================================================
2025-12-14 14:23:11,839 - INFO - 予測を実行...
2025-12-14 14:23:11,975 - INFO - ================================================================================
2025-12-14 14:23:11,975 - INFO - 評価結果 (0-3m → 0-3m):
2025-12-14 14:23:11,975 - INFO -   AUC-ROC: 0.6921
2025-12-14 14:23:11,975 - INFO -   AUC-PR: 0.9109
2025-12-14 14:23:11,975 - INFO -   Precision: 0.8281
2025-12-14 14:23:11,975 - INFO -   Recall: 0.9839
2025-12-14 14:23:11,975 - INFO -   F1 Score: 0.8993
2025-12-14 14:23:11,975 - INFO - ================================================================================
2025-12-14 14:23:11,978 - INFO - 結果を保存: outputs/50projects_irl_improved/2x_os/train_0-3m/eval_0-3m
2025-12-14 14:23:11,985 - INFO - 
【2/10】パターン実行中...
2025-12-14 14:23:11,985 - INFO - ================================================================================
2025-12-14 14:23:11,985 - INFO - パターン: 0-3m → 3-6m
2025-12-14 14:23:11,985 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:23:11,985 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:23:11,985 - INFO - ================================================================================
2025-12-14 14:23:11,986 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:23:12,377 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:23:12,377 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:23:12,378 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:23:12,378 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 14:23:12,378 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:23:12,378 - INFO - ================================================================================
2025-12-14 14:23:12,378 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:23:12,378 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:23:12,378 - INFO - 将来窓: 0～27ヶ月
2025-12-14 14:23:12,378 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:23:12,378 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:23:12,378 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:23:12,378 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:23:12,378 - INFO - ================================================================================
2025-12-14 14:23:12,378 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:23:12,378 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:23:12,390 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 14:23:16,521 - INFO - 負例をオーバーサンプリング: 元50件 -> 100件
2025-12-14 14:23:16,521 - INFO - ================================================================================
2025-12-14 14:23:16,521 - INFO - 軌跡抽出完了: 452サンプル（レビュアー）
2025-12-14 14:23:16,521 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:23:16,521 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 14:23:16,521 - INFO -   正例（この期間で承諾あり）: 352 (77.9%)
2025-12-14 14:23:16,521 - INFO -   負例（この期間で承諾なし）: 50 (11.1%)
2025-12-14 14:23:16,521 - INFO -     - 依頼あり→拒否（重み=1.0）: 50
2025-12-14 14:23:16,521 - INFO -   総ステップ数: 904
2025-12-14 14:23:16,521 - INFO -   継続ステップ率: 54.1% (489/904)
2025-12-14 14:23:16,521 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:23:16,526 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:23:16,526 - INFO - 訓練データ正例率: 77.9% (352/452)
2025-12-14 14:23:16,526 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:23:16,526 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:23:16,526 - INFO - IRLモデルを訓練...
2025-12-14 14:23:16,526 - INFO - ============================================================
2025-12-14 14:23:16,526 - INFO - 時系列IRL訓練開始
2025-12-14 14:23:16,526 - INFO - 軌跡数: 452
2025-12-14 14:23:16,526 - INFO - エポック数: 50
2025-12-14 14:23:16,526 - INFO - ============================================================
2025-12-14 14:23:17,288 - INFO - エポック 0: 平均損失 = 0.9677
2025-12-14 14:23:24,751 - INFO - エポック 10: 平均損失 = 0.7194
2025-12-14 14:23:31,872 - INFO - エポック 20: 平均損失 = 0.6862
2025-12-14 14:23:39,098 - INFO - エポック 30: 平均損失 = 0.6494
2025-12-14 14:23:46,339 - INFO - エポック 40: 平均損失 = 0.6255
2025-12-14 14:23:52,885 - INFO - 時系列IRL訓練完了
2025-12-14 14:23:52,886 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:23:53,065 - INFO - 最適閾値: 0.2339
2025-12-14 14:23:53,065 - INFO - 訓練データ性能: Precision=0.815, Recall=0.949, F1=0.877
2025-12-14 14:23:53,067 - INFO - モデルを保存: outputs/50projects_irl_improved/2x_os/train_0-3m/irl_model.pt
2025-12-14 14:23:53,067 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/2x_os/train_0-3m/optimal_threshold.json
2025-12-14 14:23:53,067 - INFO - 評価用軌跡を抽出...
2025-12-14 14:23:53,067 - INFO - ================================================================================
2025-12-14 14:23:53,067 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:23:53,067 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 14:23:53,067 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:23:53,067 - INFO - 将来窓: 24～27ヶ月
2025-12-14 14:23:53,067 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 14:23:53,067 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:23:53,067 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:23:53,067 - INFO - ================================================================================
2025-12-14 14:23:53,068 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:23:53,068 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:23:53,072 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 14:23:53,708 - INFO - ================================================================================
2025-12-14 14:23:53,708 - INFO - 評価用軌跡抽出完了: 195サンプル
2025-12-14 14:23:53,708 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:23:53,708 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 299
2025-12-14 14:23:53,708 - INFO -   正例（この期間で承諾あり）: 157 (80.5%)
2025-12-14 14:23:53,708 - INFO -   負例（この期間で承諾なし）: 38 (19.5%)
2025-12-14 14:23:53,708 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 14:23:53,708 - INFO - ================================================================================
2025-12-14 14:23:53,710 - INFO - 予測を実行...
2025-12-14 14:23:53,829 - INFO - ================================================================================
2025-12-14 14:23:53,829 - INFO - 評価結果 (0-3m → 3-6m):
2025-12-14 14:23:53,829 - INFO -   AUC-ROC: 0.6734
2025-12-14 14:23:53,829 - INFO -   AUC-PR: 0.9005
2025-12-14 14:23:53,829 - INFO -   Precision: 0.8118
2025-12-14 14:23:53,829 - INFO -   Recall: 0.9618
2025-12-14 14:23:53,829 - INFO -   F1 Score: 0.8805
2025-12-14 14:23:53,829 - INFO - ================================================================================
2025-12-14 14:23:53,831 - INFO - 結果を保存: outputs/50projects_irl_improved/2x_os/train_0-3m/eval_3-6m
2025-12-14 14:23:53,839 - INFO - 
【3/10】パターン実行中...
2025-12-14 14:23:53,839 - INFO - ================================================================================
2025-12-14 14:23:53,839 - INFO - パターン: 0-3m → 6-9m
2025-12-14 14:23:53,839 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:23:53,839 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:23:53,839 - INFO - ================================================================================
2025-12-14 14:23:53,839 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:23:54,246 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:23:54,246 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:23:54,246 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:23:54,246 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 14:23:54,246 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:23:54,246 - INFO - ================================================================================
2025-12-14 14:23:54,246 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:23:54,246 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:23:54,246 - INFO - 将来窓: 0～30ヶ月
2025-12-14 14:23:54,246 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:23:54,246 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:23:54,246 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:23:54,246 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:23:54,247 - INFO - ================================================================================
2025-12-14 14:23:54,247 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:23:54,247 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:23:54,259 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 14:23:58,903 - INFO - 負例をオーバーサンプリング: 元48件 -> 96件
2025-12-14 14:23:58,903 - INFO - ================================================================================
2025-12-14 14:23:58,903 - INFO - 軌跡抽出完了: 450サンプル（レビュアー）
2025-12-14 14:23:58,903 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:23:58,903 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 14:23:58,903 - INFO -   正例（この期間で承諾あり）: 354 (78.7%)
2025-12-14 14:23:58,903 - INFO -   負例（この期間で承諾なし）: 48 (10.7%)
2025-12-14 14:23:58,903 - INFO -     - 依頼あり→拒否（重み=1.0）: 48
2025-12-14 14:23:58,903 - INFO -   総ステップ数: 900
2025-12-14 14:23:58,903 - INFO -   継続ステップ率: 54.3% (489/900)
2025-12-14 14:23:58,903 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:23:58,907 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:23:58,908 - INFO - 訓練データ正例率: 78.7% (354/450)
2025-12-14 14:23:58,908 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:23:58,908 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:23:58,908 - INFO - IRLモデルを訓練...
2025-12-14 14:23:58,908 - INFO - ============================================================
2025-12-14 14:23:58,908 - INFO - 時系列IRL訓練開始
2025-12-14 14:23:58,908 - INFO - 軌跡数: 450
2025-12-14 14:23:58,908 - INFO - エポック数: 50
2025-12-14 14:23:58,908 - INFO - ============================================================
2025-12-14 14:23:59,614 - INFO - エポック 0: 平均損失 = 0.9283
2025-12-14 14:24:06,716 - INFO - エポック 10: 平均損失 = 0.7227
2025-12-14 14:24:13,854 - INFO - エポック 20: 平均損失 = 0.6736
2025-12-14 14:24:20,971 - INFO - エポック 30: 平均損失 = 0.6406
2025-12-14 14:24:28,096 - INFO - エポック 40: 平均損失 = 0.6102
2025-12-14 14:24:34,458 - INFO - 時系列IRL訓練完了
2025-12-14 14:24:34,458 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:24:34,638 - INFO - 最適閾値: 0.2195
2025-12-14 14:24:34,638 - INFO - 訓練データ性能: Precision=0.787, Recall=1.000, F1=0.881
2025-12-14 14:24:34,639 - INFO - モデルを保存: outputs/50projects_irl_improved/2x_os/train_0-3m/irl_model.pt
2025-12-14 14:24:34,639 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/2x_os/train_0-3m/optimal_threshold.json
2025-12-14 14:24:34,639 - INFO - 評価用軌跡を抽出...
2025-12-14 14:24:34,639 - INFO - ================================================================================
2025-12-14 14:24:34,639 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:24:34,639 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 14:24:34,639 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:24:34,639 - INFO - 将来窓: 27～30ヶ月
2025-12-14 14:24:34,639 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 14:24:34,639 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:24:34,639 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:24:34,639 - INFO - ================================================================================
2025-12-14 14:24:34,639 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:24:34,639 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:24:34,643 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 14:24:35,248 - INFO - ================================================================================
2025-12-14 14:24:35,249 - INFO - 評価用軌跡抽出完了: 177サンプル
2025-12-14 14:24:35,249 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:24:35,249 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 317
2025-12-14 14:24:35,249 - INFO -   正例（この期間で承諾あり）: 160 (90.4%)
2025-12-14 14:24:35,249 - INFO -   負例（この期間で承諾なし）: 17 (9.6%)
2025-12-14 14:24:35,249 - INFO -     - 依頼あり→拒否（重み=1.0）: 17
2025-12-14 14:24:35,249 - INFO - ================================================================================
2025-12-14 14:24:35,250 - INFO - 予測を実行...
2025-12-14 14:24:35,356 - INFO - ================================================================================
2025-12-14 14:24:35,356 - INFO - 評価結果 (0-3m → 6-9m):
2025-12-14 14:24:35,356 - INFO -   AUC-ROC: 0.6364
2025-12-14 14:24:35,356 - INFO -   AUC-PR: 0.9377
2025-12-14 14:24:35,356 - INFO -   Precision: 0.9040
2025-12-14 14:24:35,356 - INFO -   Recall: 1.0000
2025-12-14 14:24:35,356 - INFO -   F1 Score: 0.9496
2025-12-14 14:24:35,356 - INFO - ================================================================================
2025-12-14 14:24:35,358 - INFO - 結果を保存: outputs/50projects_irl_improved/2x_os/train_0-3m/eval_6-9m
2025-12-14 14:24:35,365 - INFO - 
【4/10】パターン実行中...
2025-12-14 14:24:35,366 - INFO - ================================================================================
2025-12-14 14:24:35,366 - INFO - パターン: 0-3m → 9-12m
2025-12-14 14:24:35,366 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:24:35,366 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:24:35,366 - INFO - ================================================================================
2025-12-14 14:24:35,366 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:24:35,761 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:24:35,761 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:24:35,762 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:24:35,762 - INFO - 将来窓設定: 0～33ヶ月
2025-12-14 14:24:35,762 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:24:35,762 - INFO - ================================================================================
2025-12-14 14:24:35,762 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:24:35,762 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:24:35,762 - INFO - 将来窓: 0～33ヶ月
2025-12-14 14:24:35,762 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:24:35,762 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:24:35,762 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:24:35,762 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:24:35,762 - INFO - ================================================================================
2025-12-14 14:24:35,762 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:24:35,762 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:24:35,774 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 14:24:40,098 - INFO - 負例をオーバーサンプリング: 元47件 -> 94件
2025-12-14 14:24:40,098 - INFO - ================================================================================
2025-12-14 14:24:40,098 - INFO - 軌跡抽出完了: 451サンプル（レビュアー）
2025-12-14 14:24:40,098 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:24:40,098 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 90
2025-12-14 14:24:40,098 - INFO -   正例（この期間で承諾あり）: 357 (79.2%)
2025-12-14 14:24:40,098 - INFO -   負例（この期間で承諾なし）: 47 (10.4%)
2025-12-14 14:24:40,098 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 14:24:40,098 - INFO -   総ステップ数: 902
2025-12-14 14:24:40,098 - INFO -   継続ステップ率: 54.9% (495/902)
2025-12-14 14:24:40,098 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:24:40,102 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:24:40,102 - INFO - 訓練データ正例率: 79.2% (357/451)
2025-12-14 14:24:40,102 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:24:40,102 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:24:40,102 - INFO - IRLモデルを訓練...
2025-12-14 14:24:40,102 - INFO - ============================================================
2025-12-14 14:24:40,102 - INFO - 時系列IRL訓練開始
2025-12-14 14:24:40,102 - INFO - 軌跡数: 451
2025-12-14 14:24:40,102 - INFO - エポック数: 50
2025-12-14 14:24:40,102 - INFO - ============================================================
2025-12-14 14:24:40,829 - INFO - エポック 0: 平均損失 = 0.9644
2025-12-14 14:24:48,114 - INFO - エポック 10: 平均損失 = 0.7383
2025-12-14 14:24:55,466 - INFO - エポック 20: 平均損失 = 0.6958
2025-12-14 14:25:02,965 - INFO - エポック 30: 平均損失 = 0.6532
2025-12-14 14:25:10,340 - INFO - エポック 40: 平均損失 = 0.6220
2025-12-14 14:25:16,868 - INFO - 時系列IRL訓練完了
2025-12-14 14:25:16,869 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:25:17,047 - INFO - 最適閾値: 0.2411
2025-12-14 14:25:17,047 - INFO - 訓練データ性能: Precision=0.800, Recall=0.994, F1=0.886
2025-12-14 14:25:17,048 - INFO - モデルを保存: outputs/50projects_irl_improved/2x_os/train_0-3m/irl_model.pt
2025-12-14 14:25:17,048 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/2x_os/train_0-3m/optimal_threshold.json
2025-12-14 14:25:17,048 - INFO - 評価用軌跡を抽出...
2025-12-14 14:25:17,048 - INFO - ================================================================================
2025-12-14 14:25:17,048 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:25:17,048 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 14:25:17,048 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:25:17,048 - INFO - 将来窓: 30～33ヶ月
2025-12-14 14:25:17,048 - INFO - 拡張ラベル期間: 30～12ヶ月
2025-12-14 14:25:17,048 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:25:17,048 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:25:17,048 - INFO - ================================================================================
2025-12-14 14:25:17,048 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 14:25:17,048 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:25:17,051 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 14:25:17,616 - INFO - ================================================================================
2025-12-14 14:25:17,616 - INFO - 評価用軌跡抽出完了: 165サンプル
2025-12-14 14:25:17,616 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:25:17,616 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 329
2025-12-14 14:25:17,616 - INFO -   正例（この期間で承諾あり）: 129 (78.2%)
2025-12-14 14:25:17,616 - INFO -   負例（この期間で承諾なし）: 36 (21.8%)
2025-12-14 14:25:17,616 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 14:25:17,616 - INFO - ================================================================================
2025-12-14 14:25:17,617 - INFO - 予測を実行...
2025-12-14 14:25:17,726 - INFO - ================================================================================
2025-12-14 14:25:17,726 - INFO - 評価結果 (0-3m → 9-12m):
2025-12-14 14:25:17,726 - INFO -   AUC-ROC: 0.5558
2025-12-14 14:25:17,726 - INFO -   AUC-PR: 0.8026
2025-12-14 14:25:17,726 - INFO -   Precision: 0.7818
2025-12-14 14:25:17,726 - INFO -   Recall: 1.0000
2025-12-14 14:25:17,726 - INFO -   F1 Score: 0.8776
2025-12-14 14:25:17,726 - INFO - ================================================================================
2025-12-14 14:25:17,727 - INFO - 結果を保存: outputs/50projects_irl_improved/2x_os/train_0-3m/eval_9-12m
2025-12-14 14:25:17,735 - INFO - 
【5/10】パターン実行中...
2025-12-14 14:25:17,735 - INFO - ================================================================================
2025-12-14 14:25:17,735 - INFO - パターン: 3-6m → 3-6m
2025-12-14 14:25:17,735 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:25:17,735 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:25:17,735 - INFO - ================================================================================
2025-12-14 14:25:17,735 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:25:18,138 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:25:18,138 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:25:18,138 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:25:18,138 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 14:25:18,138 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:25:18,138 - INFO - ================================================================================
2025-12-14 14:25:18,138 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:25:18,138 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:25:18,138 - INFO - 将来窓: 0～24ヶ月
2025-12-14 14:25:18,138 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:25:18,138 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:25:18,138 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:25:18,138 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:25:18,138 - INFO - ================================================================================
2025-12-14 14:25:18,139 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:25:18,139 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:25:18,148 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 14:25:22,070 - INFO - 負例をオーバーサンプリング: 元47件 -> 94件
2025-12-14 14:25:22,070 - INFO - ================================================================================
2025-12-14 14:25:22,070 - INFO - 軌跡抽出完了: 439サンプル（レビュアー）
2025-12-14 14:25:22,070 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:25:22,070 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 14:25:22,070 - INFO -   正例（この期間で承諾あり）: 345 (78.6%)
2025-12-14 14:25:22,070 - INFO -   負例（この期間で承諾なし）: 47 (10.7%)
2025-12-14 14:25:22,070 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 14:25:22,071 - INFO -   総ステップ数: 878
2025-12-14 14:25:22,071 - INFO -   継続ステップ率: 50.1% (440/878)
2025-12-14 14:25:22,071 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:25:22,074 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:25:22,074 - INFO - 訓練データ正例率: 78.6% (345/439)
2025-12-14 14:25:22,074 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:25:22,074 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:25:22,074 - INFO - IRLモデルを訓練...
2025-12-14 14:25:22,074 - INFO - ============================================================
2025-12-14 14:25:22,074 - INFO - 時系列IRL訓練開始
2025-12-14 14:25:22,074 - INFO - 軌跡数: 439
2025-12-14 14:25:22,074 - INFO - エポック数: 50
2025-12-14 14:25:22,074 - INFO - ============================================================
2025-12-14 14:25:22,776 - INFO - エポック 0: 平均損失 = 0.9314
2025-12-14 14:25:29,982 - INFO - エポック 10: 平均損失 = 0.6749
2025-12-14 14:25:37,561 - INFO - エポック 20: 平均損失 = 0.6415
2025-12-14 14:25:44,703 - INFO - エポック 30: 平均損失 = 0.6192
2025-12-14 14:25:51,704 - INFO - エポック 40: 平均損失 = 0.6034
2025-12-14 14:25:58,036 - INFO - 時系列IRL訓練完了
2025-12-14 14:25:58,036 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:25:58,197 - INFO - 最適閾値: 0.2345
2025-12-14 14:25:58,197 - INFO - 訓練データ性能: Precision=0.797, Recall=0.991, F1=0.884
2025-12-14 14:25:58,199 - INFO - モデルを保存: outputs/50projects_irl_improved/2x_os/train_3-6m/irl_model.pt
2025-12-14 14:25:58,199 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/2x_os/train_3-6m/optimal_threshold.json
2025-12-14 14:25:58,199 - INFO - 評価用軌跡を抽出...
2025-12-14 14:25:58,199 - INFO - ================================================================================
2025-12-14 14:25:58,199 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:25:58,199 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 14:25:58,199 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:25:58,199 - INFO - 将来窓: 21～24ヶ月
2025-12-14 14:25:58,199 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 14:25:58,199 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:25:58,199 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:25:58,199 - INFO - ================================================================================
2025-12-14 14:25:58,199 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:25:58,199 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 14:25:58,202 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 14:25:58,747 - INFO - ================================================================================
2025-12-14 14:25:58,747 - INFO - 評価用軌跡抽出完了: 197サンプル
2025-12-14 14:25:58,747 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:25:58,747 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 264
2025-12-14 14:25:58,747 - INFO -   正例（この期間で承諾あり）: 160 (81.2%)
2025-12-14 14:25:58,747 - INFO -   負例（この期間で承諾なし）: 37 (18.8%)
2025-12-14 14:25:58,747 - INFO -     - 依頼あり→拒否（重み=1.0）: 37
2025-12-14 14:25:58,747 - INFO - ================================================================================
2025-12-14 14:25:58,748 - INFO - 予測を実行...
2025-12-14 14:25:58,853 - INFO - ================================================================================
2025-12-14 14:25:58,853 - INFO - 評価結果 (3-6m → 3-6m):
2025-12-14 14:25:58,853 - INFO -   AUC-ROC: 0.7084
2025-12-14 14:25:58,853 - INFO -   AUC-PR: 0.9115
2025-12-14 14:25:58,853 - INFO -   Precision: 0.8205
2025-12-14 14:25:58,853 - INFO -   Recall: 1.0000
2025-12-14 14:25:58,853 - INFO -   F1 Score: 0.9014
2025-12-14 14:25:58,853 - INFO - ================================================================================
2025-12-14 14:25:58,854 - INFO - 結果を保存: outputs/50projects_irl_improved/2x_os/train_3-6m/eval_3-6m
2025-12-14 14:25:58,862 - INFO - 
【6/10】パターン実行中...
2025-12-14 14:25:58,862 - INFO - ================================================================================
2025-12-14 14:25:58,862 - INFO - パターン: 3-6m → 6-9m
2025-12-14 14:25:58,863 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:25:58,863 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:25:58,863 - INFO - ================================================================================
2025-12-14 14:25:58,863 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:25:59,251 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:25:59,251 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:25:59,251 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:25:59,251 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 14:25:59,251 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:25:59,251 - INFO - ================================================================================
2025-12-14 14:25:59,251 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:25:59,251 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:25:59,251 - INFO - 将来窓: 0～27ヶ月
2025-12-14 14:25:59,251 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:25:59,251 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:25:59,251 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:25:59,251 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:25:59,251 - INFO - ================================================================================
2025-12-14 14:25:59,251 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:25:59,251 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:25:59,262 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 14:26:03,094 - INFO - 負例をオーバーサンプリング: 元42件 -> 84件
2025-12-14 14:26:03,094 - INFO - ================================================================================
2025-12-14 14:26:03,094 - INFO - 軌跡抽出完了: 434サンプル（レビュアー）
2025-12-14 14:26:03,094 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:26:03,094 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 14:26:03,094 - INFO -   正例（この期間で承諾あり）: 350 (80.6%)
2025-12-14 14:26:03,094 - INFO -   負例（この期間で承諾なし）: 42 (9.7%)
2025-12-14 14:26:03,094 - INFO -     - 依頼あり→拒否（重み=1.0）: 42
2025-12-14 14:26:03,094 - INFO -   総ステップ数: 868
2025-12-14 14:26:03,094 - INFO -   継続ステップ率: 51.3% (445/868)
2025-12-14 14:26:03,094 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:26:03,098 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:26:03,099 - INFO - 訓練データ正例率: 80.6% (350/434)
2025-12-14 14:26:03,099 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:26:03,099 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:26:03,099 - INFO - IRLモデルを訓練...
2025-12-14 14:26:03,099 - INFO - ============================================================
2025-12-14 14:26:03,099 - INFO - 時系列IRL訓練開始
2025-12-14 14:26:03,099 - INFO - 軌跡数: 434
2025-12-14 14:26:03,099 - INFO - エポック数: 50
2025-12-14 14:26:03,099 - INFO - ============================================================
2025-12-14 14:26:03,840 - INFO - エポック 0: 平均損失 = 0.9230
2025-12-14 14:26:11,224 - INFO - エポック 10: 平均損失 = 0.6737
2025-12-14 14:26:18,672 - INFO - エポック 20: 平均損失 = 0.6404
2025-12-14 14:26:26,574 - INFO - エポック 30: 平均損失 = 0.6076
2025-12-14 14:26:34,232 - INFO - エポック 40: 平均損失 = 0.5940
2025-12-14 14:26:41,311 - INFO - 時系列IRL訓練完了
2025-12-14 14:26:41,312 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:26:41,473 - INFO - 最適閾値: 0.2257
2025-12-14 14:26:41,473 - INFO - 訓練データ性能: Precision=0.814, Recall=0.989, F1=0.893
2025-12-14 14:26:41,474 - INFO - モデルを保存: outputs/50projects_irl_improved/2x_os/train_3-6m/irl_model.pt
2025-12-14 14:26:41,474 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/2x_os/train_3-6m/optimal_threshold.json
2025-12-14 14:26:41,474 - INFO - 評価用軌跡を抽出...
2025-12-14 14:26:41,474 - INFO - ================================================================================
2025-12-14 14:26:41,474 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:26:41,474 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 14:26:41,474 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:26:41,474 - INFO - 将来窓: 24～27ヶ月
2025-12-14 14:26:41,474 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 14:26:41,474 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:26:41,474 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:26:41,474 - INFO - ================================================================================
2025-12-14 14:26:41,474 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:26:41,474 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:26:41,478 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 14:26:42,023 - INFO - ================================================================================
2025-12-14 14:26:42,023 - INFO - 評価用軌跡抽出完了: 184サンプル
2025-12-14 14:26:42,023 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:26:42,023 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 277
2025-12-14 14:26:42,023 - INFO -   正例（この期間で承諾あり）: 165 (89.7%)
2025-12-14 14:26:42,023 - INFO -   負例（この期間で承諾なし）: 19 (10.3%)
2025-12-14 14:26:42,023 - INFO -     - 依頼あり→拒否（重み=1.0）: 19
2025-12-14 14:26:42,023 - INFO - ================================================================================
2025-12-14 14:26:42,023 - INFO - 予測を実行...
2025-12-14 14:26:42,124 - INFO - ================================================================================
2025-12-14 14:26:42,124 - INFO - 評価結果 (3-6m → 6-9m):
2025-12-14 14:26:42,124 - INFO -   AUC-ROC: 0.6947
2025-12-14 14:26:42,124 - INFO -   AUC-PR: 0.9384
2025-12-14 14:26:42,124 - INFO -   Precision: 0.8962
2025-12-14 14:26:42,124 - INFO -   Recall: 0.9939
2025-12-14 14:26:42,124 - INFO -   F1 Score: 0.9425
2025-12-14 14:26:42,124 - INFO - ================================================================================
2025-12-14 14:26:42,125 - INFO - 結果を保存: outputs/50projects_irl_improved/2x_os/train_3-6m/eval_6-9m
2025-12-14 14:26:42,134 - INFO - 
【7/10】パターン実行中...
2025-12-14 14:26:42,135 - INFO - ================================================================================
2025-12-14 14:26:42,135 - INFO - パターン: 3-6m → 9-12m
2025-12-14 14:26:42,135 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:26:42,135 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:26:42,135 - INFO - ================================================================================
2025-12-14 14:26:42,135 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:26:42,576 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:26:42,577 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:26:42,577 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:26:42,577 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 14:26:42,577 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:26:42,577 - INFO - ================================================================================
2025-12-14 14:26:42,577 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:26:42,577 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:26:42,577 - INFO - 将来窓: 0～30ヶ月
2025-12-14 14:26:42,577 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:26:42,577 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:26:42,577 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:26:42,577 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:26:42,577 - INFO - ================================================================================
2025-12-14 14:26:42,577 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:26:42,577 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:26:42,589 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 14:26:46,682 - INFO - 負例をオーバーサンプリング: 元39件 -> 78件
2025-12-14 14:26:46,682 - INFO - ================================================================================
2025-12-14 14:26:46,682 - INFO - 軌跡抽出完了: 431サンプル（レビュアー）
2025-12-14 14:26:46,682 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:26:46,682 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 14:26:46,682 - INFO -   正例（この期間で承諾あり）: 353 (81.9%)
2025-12-14 14:26:46,682 - INFO -   負例（この期間で承諾なし）: 39 (9.0%)
2025-12-14 14:26:46,682 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 14:26:46,682 - INFO -   総ステップ数: 862
2025-12-14 14:26:46,682 - INFO -   継続ステップ率: 51.4% (443/862)
2025-12-14 14:26:46,682 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:26:46,687 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:26:46,687 - INFO - 訓練データ正例率: 81.9% (353/431)
2025-12-14 14:26:46,687 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:26:46,687 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:26:46,687 - INFO - IRLモデルを訓練...
2025-12-14 14:26:46,687 - INFO - ============================================================
2025-12-14 14:26:46,687 - INFO - 時系列IRL訓練開始
2025-12-14 14:26:46,687 - INFO - 軌跡数: 431
2025-12-14 14:26:46,687 - INFO - エポック数: 50
2025-12-14 14:26:46,687 - INFO - ============================================================
2025-12-14 14:26:47,460 - INFO - エポック 0: 平均損失 = 0.8801
2025-12-14 14:26:55,116 - INFO - エポック 10: 平均損失 = 0.6434
2025-12-14 14:27:02,706 - INFO - エポック 20: 平均損失 = 0.6108
2025-12-14 14:27:10,150 - INFO - エポック 30: 平均損失 = 0.5829
2025-12-14 14:27:17,411 - INFO - エポック 40: 平均損失 = 0.5585
2025-12-14 14:27:24,540 - INFO - 時系列IRL訓練完了
2025-12-14 14:27:24,540 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:27:24,701 - INFO - 最適閾値: 0.1988
2025-12-14 14:27:24,701 - INFO - 訓練データ性能: Precision=0.819, Recall=1.000, F1=0.901
2025-12-14 14:27:24,702 - INFO - モデルを保存: outputs/50projects_irl_improved/2x_os/train_3-6m/irl_model.pt
2025-12-14 14:27:24,702 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/2x_os/train_3-6m/optimal_threshold.json
2025-12-14 14:27:24,702 - INFO - 評価用軌跡を抽出...
2025-12-14 14:27:24,702 - INFO - ================================================================================
2025-12-14 14:27:24,702 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:27:24,702 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 14:27:24,702 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:27:24,702 - INFO - 将来窓: 27～30ヶ月
2025-12-14 14:27:24,702 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 14:27:24,702 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:27:24,702 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:27:24,703 - INFO - ================================================================================
2025-12-14 14:27:24,703 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 14:27:24,703 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:27:24,706 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 14:27:25,210 - INFO - ================================================================================
2025-12-14 14:27:25,210 - INFO - 評価用軌跡抽出完了: 168サンプル
2025-12-14 14:27:25,210 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:27:25,210 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 293
2025-12-14 14:27:25,210 - INFO -   正例（この期間で承諾あり）: 132 (78.6%)
2025-12-14 14:27:25,210 - INFO -   負例（この期間で承諾なし）: 36 (21.4%)
2025-12-14 14:27:25,210 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 14:27:25,210 - INFO - ================================================================================
2025-12-14 14:27:25,212 - INFO - 予測を実行...
2025-12-14 14:27:25,306 - INFO - ================================================================================
2025-12-14 14:27:25,306 - INFO - 評価結果 (3-6m → 9-12m):
2025-12-14 14:27:25,306 - INFO -   AUC-ROC: 0.6187
2025-12-14 14:27:25,306 - INFO -   AUC-PR: 0.8367
2025-12-14 14:27:25,306 - INFO -   Precision: 0.7857
2025-12-14 14:27:25,306 - INFO -   Recall: 1.0000
2025-12-14 14:27:25,306 - INFO -   F1 Score: 0.8800
2025-12-14 14:27:25,306 - INFO - ================================================================================
2025-12-14 14:27:25,307 - INFO - 結果を保存: outputs/50projects_irl_improved/2x_os/train_3-6m/eval_9-12m
2025-12-14 14:27:25,315 - INFO - 
【8/10】パターン実行中...
2025-12-14 14:27:25,315 - INFO - ================================================================================
2025-12-14 14:27:25,315 - INFO - パターン: 6-9m → 6-9m
2025-12-14 14:27:25,315 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:27:25,315 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:27:25,315 - INFO - ================================================================================
2025-12-14 14:27:25,315 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:27:25,731 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:27:25,731 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:27:25,732 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:27:25,732 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 14:27:25,732 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:27:25,732 - INFO - ================================================================================
2025-12-14 14:27:25,732 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:27:25,732 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:27:25,732 - INFO - 将来窓: 0～24ヶ月
2025-12-14 14:27:25,732 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:27:25,732 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:27:25,732 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:27:25,732 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:27:25,732 - INFO - ================================================================================
2025-12-14 14:27:25,732 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:27:25,732 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:27:25,741 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 14:27:29,498 - INFO - 負例をオーバーサンプリング: 元38件 -> 76件
2025-12-14 14:27:29,498 - INFO - ================================================================================
2025-12-14 14:27:29,498 - INFO - 軌跡抽出完了: 397サンプル（レビュアー）
2025-12-14 14:27:29,498 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:27:29,498 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 113
2025-12-14 14:27:29,498 - INFO -   正例（この期間で承諾あり）: 321 (80.9%)
2025-12-14 14:27:29,498 - INFO -   負例（この期間で承諾なし）: 38 (9.6%)
2025-12-14 14:27:29,498 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 14:27:29,498 - INFO -   総ステップ数: 794
2025-12-14 14:27:29,498 - INFO -   継続ステップ率: 56.9% (452/794)
2025-12-14 14:27:29,498 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:27:29,502 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:27:29,502 - INFO - 訓練データ正例率: 80.9% (321/397)
2025-12-14 14:27:29,502 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:27:29,502 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:27:29,502 - INFO - IRLモデルを訓練...
2025-12-14 14:27:29,502 - INFO - ============================================================
2025-12-14 14:27:29,502 - INFO - 時系列IRL訓練開始
2025-12-14 14:27:29,502 - INFO - 軌跡数: 397
2025-12-14 14:27:29,502 - INFO - エポック数: 50
2025-12-14 14:27:29,502 - INFO - ============================================================
2025-12-14 14:27:30,264 - INFO - エポック 0: 平均損失 = 0.9398
2025-12-14 14:27:37,324 - INFO - エポック 10: 平均損失 = 0.6979
2025-12-14 14:27:44,180 - INFO - エポック 20: 平均損失 = 0.6524
2025-12-14 14:27:51,038 - INFO - エポック 30: 平均損失 = 0.6228
2025-12-14 14:27:57,911 - INFO - エポック 40: 平均損失 = 0.5897
2025-12-14 14:28:04,061 - INFO - 時系列IRL訓練完了
2025-12-14 14:28:04,061 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 14:28:04,217 - INFO - 最適閾値: 0.2494
2025-12-14 14:28:04,217 - INFO - 訓練データ性能: Precision=0.826, Recall=0.975, F1=0.894
2025-12-14 14:28:04,218 - INFO - モデルを保存: outputs/50projects_irl_improved/2x_os/train_6-9m/irl_model.pt
2025-12-14 14:28:04,219 - INFO - 最適閾値を保存: outputs/50projects_irl_improved/2x_os/train_6-9m/optimal_threshold.json
2025-12-14 14:28:04,219 - INFO - 評価用軌跡を抽出...
2025-12-14 14:28:04,219 - INFO - ================================================================================
2025-12-14 14:28:04,219 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 14:28:04,219 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 14:28:04,219 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 14:28:04,219 - INFO - 将来窓: 21～24ヶ月
2025-12-14 14:28:04,219 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 14:28:04,219 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:28:04,219 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 14:28:04,219 - INFO - ================================================================================
2025-12-14 14:28:04,219 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:28:04,219 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 14:28:04,223 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 14:28:04,787 - INFO - ================================================================================
2025-12-14 14:28:04,787 - INFO - 評価用軌跡抽出完了: 183サンプル
2025-12-14 14:28:04,787 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:28:04,787 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 289
2025-12-14 14:28:04,787 - INFO -   正例（この期間で承諾あり）: 165 (90.2%)
2025-12-14 14:28:04,787 - INFO -   負例（この期間で承諾なし）: 18 (9.8%)
2025-12-14 14:28:04,787 - INFO -     - 依頼あり→拒否（重み=1.0）: 18
2025-12-14 14:28:04,787 - INFO - ================================================================================
2025-12-14 14:28:04,788 - INFO - 予測を実行...
2025-12-14 14:28:04,888 - INFO - ================================================================================
2025-12-14 14:28:04,889 - INFO - 評価結果 (6-9m → 6-9m):
2025-12-14 14:28:04,889 - INFO -   AUC-ROC: 0.6734
2025-12-14 14:28:04,889 - INFO -   AUC-PR: 0.9316
2025-12-14 14:28:04,889 - INFO -   Precision: 0.9000
2025-12-14 14:28:04,889 - INFO -   Recall: 0.9818
2025-12-14 14:28:04,889 - INFO -   F1 Score: 0.9391
2025-12-14 14:28:04,889 - INFO - ================================================================================
2025-12-14 14:28:04,890 - INFO - 結果を保存: outputs/50projects_irl_improved/2x_os/train_6-9m/eval_6-9m
2025-12-14 14:28:04,898 - INFO - 
【9/10】パターン実行中...
2025-12-14 14:28:04,898 - INFO - ================================================================================
2025-12-14 14:28:04,898 - INFO - パターン: 6-9m → 9-12m
2025-12-14 14:28:04,898 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:28:04,898 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:28:04,898 - INFO - ================================================================================
2025-12-14 14:28:04,898 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 14:28:05,359 - INFO - 総レビュー依頼数: 119010
2025-12-14 14:28:05,360 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 14:28:05,360 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 14:28:05,360 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 14:28:05,360 - INFO - 訓練用軌跡を抽出...
2025-12-14 14:28:05,360 - INFO - ================================================================================
2025-12-14 14:28:05,360 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 14:28:05,360 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:28:05,360 - INFO - 将来窓: 0～27ヶ月
2025-12-14 14:28:05,360 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 14:28:05,360 - INFO - プロジェクト: 全プロジェクト
2025-12-14 14:28:05,360 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 14:28:05,360 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 14:28:05,360 - INFO - ================================================================================
2025-12-14 14:28:05,360 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 14:28:05,360 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 14:28:05,371 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 14:28:09,237 - INFO - 負例をオーバーサンプリング: 元39件 -> 78件
2025-12-14 14:28:09,237 - INFO - ================================================================================
2025-12-14 14:28:09,237 - INFO - 軌跡抽出完了: 400サンプル（レビュアー）
2025-12-14 14:28:09,237 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 14:28:09,237 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 111
2025-12-14 14:28:09,237 - INFO -   正例（この期間で承諾あり）: 322 (80.5%)
2025-12-14 14:28:09,237 - INFO -   負例（この期間で承諾なし）: 39 (9.8%)
2025-12-14 14:28:09,237 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 14:28:09,237 - INFO -   総ステップ数: 800
2025-12-14 14:28:09,237 - INFO -   継続ステップ率: 55.0% (440/800)
2025-12-14 14:28:09,237 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 14:28:09,240 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 14:28:09,240 - INFO - 訓練データ正例率: 80.5% (322/400)
2025-12-14 14:28:09,240 - INFO - Focal Loss パラメータ更新: alpha=0.300, gamma=2.000
2025-12-14 14:28:09,240 - INFO - Focal Loss 手動設定: alpha=0.300, gamma=2.000
2025-12-14 14:28:09,240 - INFO - IRLモデルを訓練...
2025-12-14 14:28:09,240 - INFO - ============================================================
2025-12-14 14:28:09,240 - INFO - 時系列IRL訓練開始
2025-12-14 14:28:09,240 - INFO - 軌跡数: 400
2025-12-14 14:28:09,240 - INFO - エポック数: 50
2025-12-14 14:28:09,240 - INFO - ============================================================
2025-12-14 14:28:09,960 - INFO - エポック 0: 平均損失 = 0.9631
