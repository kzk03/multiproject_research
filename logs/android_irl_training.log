2025-12-18 11:47:15,978 - INFO - 訓練期間ベース: 2021-01-01 00:00:00
2025-12-18 11:47:15,978 - INFO - 評価期間ベース: 2023-01-01 00:00:00
2025-12-18 11:47:15,978 - INFO - 生成されたパターン数: 10
2025-12-18 11:47:15,978 - INFO -   0-3m → 0-3m
2025-12-18 11:47:15,978 - INFO -   0-3m → 3-6m
2025-12-18 11:47:15,978 - INFO -   0-3m → 6-9m
2025-12-18 11:47:15,979 - INFO -   0-3m → 9-12m
2025-12-18 11:47:15,979 - INFO -   3-6m → 3-6m
2025-12-18 11:47:15,979 - INFO -   3-6m → 6-9m
2025-12-18 11:47:15,979 - INFO -   3-6m → 9-12m
2025-12-18 11:47:15,979 - INFO -   6-9m → 6-9m
2025-12-18 11:47:15,979 - INFO -   6-9m → 9-12m
2025-12-18 11:47:15,979 - INFO -   9-12m → 9-12m
2025-12-18 11:47:15,979 - INFO - ================================================================================
2025-12-18 11:47:15,979 - INFO - 全10パターンの訓練・評価を開始
2025-12-18 11:47:15,979 - INFO - ================================================================================
2025-12-18 11:47:15,979 - INFO - 
【1/10】パターン実行中...
2025-12-18 11:47:15,979 - INFO - ================================================================================
2025-12-18 11:47:15,979 - INFO - パターン: 0-3m → 0-3m
2025-12-18 11:47:15,979 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:15,979 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-18 11:47:15,979 - INFO - ================================================================================
2025-12-18 11:47:17,313 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:17,351 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:17,351 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:17,351 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:17,351 - INFO - 将来窓設定: 0～24ヶ月
2025-12-18 11:47:17,351 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:17,351 - INFO - ================================================================================
2025-12-18 11:47:17,351 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:17,351 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:17,351 - INFO - 将来窓: 0～24ヶ月
2025-12-18 11:47:17,351 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:17,351 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:17,351 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:17,351 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:17,351 - INFO - ================================================================================
2025-12-18 11:47:17,352 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:17,352 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-18 11:47:17,353 - INFO - 特徴量計算期間内のレビュアー数: 52
2025-12-18 11:47:17,473 - INFO - ================================================================================
2025-12-18 11:47:17,473 - INFO - 軌跡抽出完了: 35サンプル（レビュアー）
2025-12-18 11:47:17,473 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:17,473 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 17
2025-12-18 11:47:17,473 - INFO -   正例（この期間で承諾あり）: 29 (82.9%)
2025-12-18 11:47:17,473 - INFO -   負例（この期間で承諾なし）: 6 (17.1%)
2025-12-18 11:47:17,473 - INFO -     - 依頼あり→拒否（重み=1.0）: 6
2025-12-18 11:47:17,473 - INFO -   総ステップ数: 70
2025-12-18 11:47:17,473 - INFO -   継続ステップ率: 58.6% (41/70)
2025-12-18 11:47:17,473 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:17,943 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:17,943 - INFO - 訓練データ正例率: 82.9% (29/35)
2025-12-18 11:47:17,944 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:17,944 - INFO - 正例率 82.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:17,944 - INFO - IRLモデルを訓練...
2025-12-18 11:47:17,944 - INFO - ============================================================
2025-12-18 11:47:17,944 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:17,944 - INFO - 軌跡数: 35
2025-12-18 11:47:17,944 - INFO - エポック数: 50
2025-12-18 11:47:17,944 - INFO - ============================================================
2025-12-18 11:47:18,026 - INFO - エポック 0: 平均損失 = 1.1647
2025-12-18 11:47:18,622 - INFO - エポック 10: 平均損失 = 1.1293
2025-12-18 11:47:19,283 - INFO - エポック 20: 平均損失 = 0.9893
2025-12-18 11:47:19,853 - INFO - エポック 30: 平均損失 = 0.8992
2025-12-18 11:47:20,385 - INFO - エポック 40: 平均損失 = 0.8294
2025-12-18 11:47:20,830 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:20,830 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:20,852 - INFO - 最適閾値: 0.0459
2025-12-18 11:47:20,852 - INFO - 訓練データ性能: Precision=0.829, Recall=1.000, F1=0.906
2025-12-18 11:47:20,854 - INFO - モデルを保存: outputs/android_50projects_irl/train_0-3m/irl_model.pt
2025-12-18 11:47:20,854 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-18 11:47:20,854 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:20,854 - INFO - ================================================================================
2025-12-18 11:47:20,854 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:20,854 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-18 11:47:20,854 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:20,854 - INFO - 将来窓: 21～24ヶ月
2025-12-18 11:47:20,854 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-18 11:47:20,854 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:20,854 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:20,854 - INFO - ================================================================================
2025-12-18 11:47:20,854 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:20,854 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-18 11:47:20,855 - INFO - 履歴期間内のレビュアー数: 52
2025-12-18 11:47:20,885 - INFO - ================================================================================
2025-12-18 11:47:20,885 - INFO - 評価用軌跡抽出完了: 21サンプル
2025-12-18 11:47:20,885 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:20,885 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 31
2025-12-18 11:47:20,885 - INFO -   正例（この期間で承諾あり）: 15 (71.4%)
2025-12-18 11:47:20,885 - INFO -   負例（この期間で承諾なし）: 6 (28.6%)
2025-12-18 11:47:20,885 - INFO -     - 依頼あり→拒否（重み=1.0）: 6
2025-12-18 11:47:20,885 - INFO - ================================================================================
2025-12-18 11:47:20,885 - INFO - 予測を実行...
2025-12-18 11:47:20,901 - INFO - ================================================================================
2025-12-18 11:47:20,901 - INFO - 評価結果 (0-3m → 0-3m):
2025-12-18 11:47:20,901 - INFO -   AUC-ROC: 0.1778
2025-12-18 11:47:20,901 - INFO -   AUC-PR: 0.6317
2025-12-18 11:47:20,901 - INFO -   Precision: 0.7143
2025-12-18 11:47:20,901 - INFO -   Recall: 1.0000
2025-12-18 11:47:20,901 - INFO -   F1 Score: 0.8333
2025-12-18 11:47:20,901 - INFO - ================================================================================
2025-12-18 11:47:20,903 - INFO - 結果を保存: outputs/android_50projects_irl/train_0-3m/eval_0-3m
2025-12-18 11:47:20,903 - INFO - 
【2/10】パターン実行中...
2025-12-18 11:47:20,903 - INFO - ================================================================================
2025-12-18 11:47:20,903 - INFO - パターン: 0-3m → 3-6m
2025-12-18 11:47:20,903 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:20,903 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:20,903 - INFO - ================================================================================
2025-12-18 11:47:20,903 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:20,935 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:20,935 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:20,935 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:20,935 - INFO - 将来窓設定: 0～27ヶ月
2025-12-18 11:47:20,935 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:20,935 - INFO - ================================================================================
2025-12-18 11:47:20,935 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:20,935 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:20,935 - INFO - 将来窓: 0～27ヶ月
2025-12-18 11:47:20,935 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:20,935 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:20,935 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:20,935 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:20,935 - INFO - ================================================================================
2025-12-18 11:47:20,935 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:20,935 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:20,936 - INFO - 特徴量計算期間内のレビュアー数: 52
2025-12-18 11:47:21,034 - INFO - ================================================================================
2025-12-18 11:47:21,034 - INFO - 軌跡抽出完了: 35サンプル（レビュアー）
2025-12-18 11:47:21,034 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:21,034 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 17
2025-12-18 11:47:21,034 - INFO -   正例（この期間で承諾あり）: 29 (82.9%)
2025-12-18 11:47:21,034 - INFO -   負例（この期間で承諾なし）: 6 (17.1%)
2025-12-18 11:47:21,034 - INFO -     - 依頼あり→拒否（重み=1.0）: 6
2025-12-18 11:47:21,034 - INFO -   総ステップ数: 70
2025-12-18 11:47:21,034 - INFO -   継続ステップ率: 58.6% (41/70)
2025-12-18 11:47:21,034 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:21,035 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:21,035 - INFO - 訓練データ正例率: 82.9% (29/35)
2025-12-18 11:47:21,035 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:21,035 - INFO - 正例率 82.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:21,035 - INFO - IRLモデルを訓練...
2025-12-18 11:47:21,035 - INFO - ============================================================
2025-12-18 11:47:21,035 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:21,035 - INFO - 軌跡数: 35
2025-12-18 11:47:21,035 - INFO - エポック数: 50
2025-12-18 11:47:21,035 - INFO - ============================================================
2025-12-18 11:47:21,087 - INFO - エポック 0: 平均損失 = 1.1590
2025-12-18 11:47:21,586 - INFO - エポック 10: 平均損失 = 1.1304
2025-12-18 11:47:22,091 - INFO - エポック 20: 平均損失 = 1.0762
2025-12-18 11:47:22,595 - INFO - エポック 30: 平均損失 = 0.8907
2025-12-18 11:47:23,244 - INFO - エポック 40: 平均損失 = 0.8110
2025-12-18 11:47:23,742 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:23,742 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:23,765 - INFO - 最適閾値: 0.0452
2025-12-18 11:47:23,765 - INFO - 訓練データ性能: Precision=0.829, Recall=1.000, F1=0.906
2025-12-18 11:47:23,766 - INFO - モデルを保存: outputs/android_50projects_irl/train_0-3m/irl_model.pt
2025-12-18 11:47:23,766 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-18 11:47:23,766 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:23,766 - INFO - ================================================================================
2025-12-18 11:47:23,766 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:23,766 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-18 11:47:23,766 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:23,766 - INFO - 将来窓: 24～27ヶ月
2025-12-18 11:47:23,766 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-18 11:47:23,766 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:23,766 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:23,766 - INFO - ================================================================================
2025-12-18 11:47:23,766 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:23,766 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:23,767 - INFO - 履歴期間内のレビュアー数: 52
2025-12-18 11:47:23,799 - INFO - ================================================================================
2025-12-18 11:47:23,799 - INFO - 評価用軌跡抽出完了: 19サンプル
2025-12-18 11:47:23,799 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:23,799 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 33
2025-12-18 11:47:23,799 - INFO -   正例（この期間で承諾あり）: 14 (73.7%)
2025-12-18 11:47:23,799 - INFO -   負例（この期間で承諾なし）: 5 (26.3%)
2025-12-18 11:47:23,799 - INFO -     - 依頼あり→拒否（重み=1.0）: 5
2025-12-18 11:47:23,799 - INFO - ================================================================================
2025-12-18 11:47:23,799 - INFO - 予測を実行...
2025-12-18 11:47:23,817 - INFO - ================================================================================
2025-12-18 11:47:23,817 - INFO - 評価結果 (0-3m → 3-6m):
2025-12-18 11:47:23,817 - INFO -   AUC-ROC: 0.2286
2025-12-18 11:47:23,817 - INFO -   AUC-PR: 0.6821
2025-12-18 11:47:23,817 - INFO -   Precision: 0.7368
2025-12-18 11:47:23,817 - INFO -   Recall: 1.0000
2025-12-18 11:47:23,817 - INFO -   F1 Score: 0.8485
2025-12-18 11:47:23,817 - INFO - ================================================================================
2025-12-18 11:47:23,818 - INFO - 結果を保存: outputs/android_50projects_irl/train_0-3m/eval_3-6m
2025-12-18 11:47:23,819 - INFO - 
【3/10】パターン実行中...
2025-12-18 11:47:23,819 - INFO - ================================================================================
2025-12-18 11:47:23,819 - INFO - パターン: 0-3m → 6-9m
2025-12-18 11:47:23,819 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:23,819 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:23,819 - INFO - ================================================================================
2025-12-18 11:47:23,819 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:23,853 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:23,853 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:23,854 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:23,854 - INFO - 将来窓設定: 0～30ヶ月
2025-12-18 11:47:23,854 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:23,854 - INFO - ================================================================================
2025-12-18 11:47:23,854 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:23,854 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:23,854 - INFO - 将来窓: 0～30ヶ月
2025-12-18 11:47:23,854 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:23,854 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:23,854 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:23,854 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:23,854 - INFO - ================================================================================
2025-12-18 11:47:23,854 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:23,854 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:23,855 - INFO - 特徴量計算期間内のレビュアー数: 52
2025-12-18 11:47:23,957 - INFO - ================================================================================
2025-12-18 11:47:23,957 - INFO - 軌跡抽出完了: 35サンプル（レビュアー）
2025-12-18 11:47:23,957 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:23,957 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 17
2025-12-18 11:47:23,957 - INFO -   正例（この期間で承諾あり）: 30 (85.7%)
2025-12-18 11:47:23,957 - INFO -   負例（この期間で承諾なし）: 5 (14.3%)
2025-12-18 11:47:23,957 - INFO -     - 依頼あり→拒否（重み=1.0）: 5
2025-12-18 11:47:23,957 - INFO -   総ステップ数: 70
2025-12-18 11:47:23,957 - INFO -   継続ステップ率: 58.6% (41/70)
2025-12-18 11:47:23,957 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:23,958 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:23,958 - INFO - 訓練データ正例率: 85.7% (30/35)
2025-12-18 11:47:23,958 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:23,958 - INFO - 正例率 85.7% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:23,958 - INFO - IRLモデルを訓練...
2025-12-18 11:47:23,958 - INFO - ============================================================
2025-12-18 11:47:23,958 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:23,958 - INFO - 軌跡数: 35
2025-12-18 11:47:23,958 - INFO - エポック数: 50
2025-12-18 11:47:23,958 - INFO - ============================================================
2025-12-18 11:47:24,017 - INFO - エポック 0: 平均損失 = 1.2117
2025-12-18 11:47:24,607 - INFO - エポック 10: 平均損失 = 1.1546
2025-12-18 11:47:25,231 - INFO - エポック 20: 平均損失 = 1.0994
2025-12-18 11:47:25,815 - INFO - エポック 30: 平均損失 = 0.9356
2025-12-18 11:47:26,685 - INFO - エポック 40: 平均損失 = 0.8553
2025-12-18 11:47:27,225 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:27,225 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:27,248 - INFO - 最適閾値: 0.1225
2025-12-18 11:47:27,248 - INFO - 訓練データ性能: Precision=0.857, Recall=1.000, F1=0.923
2025-12-18 11:47:27,249 - INFO - モデルを保存: outputs/android_50projects_irl/train_0-3m/irl_model.pt
2025-12-18 11:47:27,249 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-18 11:47:27,249 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:27,249 - INFO - ================================================================================
2025-12-18 11:47:27,250 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:27,250 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-18 11:47:27,250 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:27,250 - INFO - 将来窓: 27～30ヶ月
2025-12-18 11:47:27,250 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-18 11:47:27,250 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:27,250 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:27,250 - INFO - ================================================================================
2025-12-18 11:47:27,250 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:27,250 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:27,251 - INFO - 履歴期間内のレビュアー数: 52
2025-12-18 11:47:27,280 - INFO - ================================================================================
2025-12-18 11:47:27,280 - INFO - 評価用軌跡抽出完了: 16サンプル
2025-12-18 11:47:27,280 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:27,280 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 36
2025-12-18 11:47:27,280 - INFO -   正例（この期間で承諾あり）: 15 (93.8%)
2025-12-18 11:47:27,280 - INFO -   負例（この期間で承諾なし）: 1 (6.2%)
2025-12-18 11:47:27,280 - INFO -     - 依頼あり→拒否（重み=1.0）: 1
2025-12-18 11:47:27,280 - INFO - ================================================================================
2025-12-18 11:47:27,281 - INFO - 予測を実行...
2025-12-18 11:47:27,299 - INFO - ================================================================================
2025-12-18 11:47:27,299 - INFO - 評価結果 (0-3m → 6-9m):
2025-12-18 11:47:27,299 - INFO -   AUC-ROC: 0.1333
2025-12-18 11:47:27,299 - INFO -   AUC-PR: 0.8878
2025-12-18 11:47:27,299 - INFO -   Precision: 0.9375
2025-12-18 11:47:27,299 - INFO -   Recall: 1.0000
2025-12-18 11:47:27,299 - INFO -   F1 Score: 0.9677
2025-12-18 11:47:27,300 - INFO - ================================================================================
2025-12-18 11:47:27,300 - INFO - 結果を保存: outputs/android_50projects_irl/train_0-3m/eval_6-9m
2025-12-18 11:47:27,301 - INFO - 
【4/10】パターン実行中...
2025-12-18 11:47:27,301 - INFO - ================================================================================
2025-12-18 11:47:27,301 - INFO - パターン: 0-3m → 9-12m
2025-12-18 11:47:27,301 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:27,301 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:27,301 - INFO - ================================================================================
2025-12-18 11:47:27,301 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:27,337 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:27,337 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:27,337 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:27,337 - INFO - 将来窓設定: 0～33ヶ月
2025-12-18 11:47:27,337 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:27,337 - INFO - ================================================================================
2025-12-18 11:47:27,337 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:27,337 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:27,337 - INFO - 将来窓: 0～33ヶ月
2025-12-18 11:47:27,337 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:27,337 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:27,337 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:27,337 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:27,337 - INFO - ================================================================================
2025-12-18 11:47:27,338 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:27,338 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:27,339 - INFO - 特徴量計算期間内のレビュアー数: 52
2025-12-18 11:47:27,439 - INFO - ================================================================================
2025-12-18 11:47:27,439 - INFO - 軌跡抽出完了: 35サンプル（レビュアー）
2025-12-18 11:47:27,439 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:27,439 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 17
2025-12-18 11:47:27,439 - INFO -   正例（この期間で承諾あり）: 30 (85.7%)
2025-12-18 11:47:27,439 - INFO -   負例（この期間で承諾なし）: 5 (14.3%)
2025-12-18 11:47:27,439 - INFO -     - 依頼あり→拒否（重み=1.0）: 5
2025-12-18 11:47:27,439 - INFO -   総ステップ数: 70
2025-12-18 11:47:27,439 - INFO -   継続ステップ率: 58.6% (41/70)
2025-12-18 11:47:27,439 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:27,440 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:27,440 - INFO - 訓練データ正例率: 85.7% (30/35)
2025-12-18 11:47:27,440 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:27,440 - INFO - 正例率 85.7% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:27,440 - INFO - IRLモデルを訓練...
2025-12-18 11:47:27,440 - INFO - ============================================================
2025-12-18 11:47:27,440 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:27,440 - INFO - 軌跡数: 35
2025-12-18 11:47:27,440 - INFO - エポック数: 50
2025-12-18 11:47:27,440 - INFO - ============================================================
2025-12-18 11:47:27,529 - INFO - エポック 0: 平均損失 = 1.2174
2025-12-18 11:47:28,132 - INFO - エポック 10: 平均損失 = 1.1592
2025-12-18 11:47:28,746 - INFO - エポック 20: 平均損失 = 1.0906
2025-12-18 11:47:29,286 - INFO - エポック 30: 平均損失 = 0.9238
2025-12-18 11:47:29,816 - INFO - エポック 40: 平均損失 = 0.8218
2025-12-18 11:47:30,284 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:30,284 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:30,306 - INFO - 最適閾値: 0.1081
2025-12-18 11:47:30,306 - INFO - 訓練データ性能: Precision=0.857, Recall=1.000, F1=0.923
2025-12-18 11:47:30,307 - INFO - モデルを保存: outputs/android_50projects_irl/train_0-3m/irl_model.pt
2025-12-18 11:47:30,307 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-18 11:47:30,307 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:30,307 - INFO - ================================================================================
2025-12-18 11:47:30,307 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:30,307 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-18 11:47:30,307 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:30,307 - INFO - 将来窓: 30～33ヶ月
2025-12-18 11:47:30,307 - INFO - 拡張ラベル期間: 30～12ヶ月
2025-12-18 11:47:30,307 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:30,307 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:30,307 - INFO - ================================================================================
2025-12-18 11:47:30,308 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:30,308 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:30,308 - INFO - 履歴期間内のレビュアー数: 52
2025-12-18 11:47:30,338 - INFO - ================================================================================
2025-12-18 11:47:30,338 - INFO - 評価用軌跡抽出完了: 17サンプル
2025-12-18 11:47:30,339 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:30,339 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 35
2025-12-18 11:47:30,339 - INFO -   正例（この期間で承諾あり）: 15 (88.2%)
2025-12-18 11:47:30,339 - INFO -   負例（この期間で承諾なし）: 2 (11.8%)
2025-12-18 11:47:30,339 - INFO -     - 依頼あり→拒否（重み=1.0）: 2
2025-12-18 11:47:30,339 - INFO - ================================================================================
2025-12-18 11:47:30,339 - INFO - 予測を実行...
2025-12-18 11:47:30,356 - INFO - ================================================================================
2025-12-18 11:47:30,356 - INFO - 評価結果 (0-3m → 9-12m):
2025-12-18 11:47:30,356 - INFO -   AUC-ROC: 0.3333
2025-12-18 11:47:30,356 - INFO -   AUC-PR: 0.8815
2025-12-18 11:47:30,356 - INFO -   Precision: 0.8824
2025-12-18 11:47:30,356 - INFO -   Recall: 1.0000
2025-12-18 11:47:30,356 - INFO -   F1 Score: 0.9375
2025-12-18 11:47:30,356 - INFO - ================================================================================
2025-12-18 11:47:30,357 - INFO - 結果を保存: outputs/android_50projects_irl/train_0-3m/eval_9-12m
2025-12-18 11:47:30,358 - INFO - 
【5/10】パターン実行中...
2025-12-18 11:47:30,358 - INFO - ================================================================================
2025-12-18 11:47:30,358 - INFO - パターン: 3-6m → 3-6m
2025-12-18 11:47:30,358 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:30,358 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:30,358 - INFO - ================================================================================
2025-12-18 11:47:30,358 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:30,390 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:30,390 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:30,390 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:30,390 - INFO - 将来窓設定: 0～24ヶ月
2025-12-18 11:47:30,390 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:30,390 - INFO - ================================================================================
2025-12-18 11:47:30,390 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:30,390 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:30,390 - INFO - 将来窓: 0～24ヶ月
2025-12-18 11:47:30,390 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:30,390 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:30,390 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:30,390 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:30,390 - INFO - ================================================================================
2025-12-18 11:47:30,390 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:30,390 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:30,391 - INFO - 特徴量計算期間内のレビュアー数: 43
2025-12-18 11:47:30,469 - INFO - ================================================================================
2025-12-18 11:47:30,469 - INFO - 軌跡抽出完了: 26サンプル（レビュアー）
2025-12-18 11:47:30,469 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:30,469 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 17
2025-12-18 11:47:30,469 - INFO -   正例（この期間で承諾あり）: 25 (96.2%)
2025-12-18 11:47:30,469 - INFO -   負例（この期間で承諾なし）: 1 (3.8%)
2025-12-18 11:47:30,469 - INFO -     - 依頼あり→拒否（重み=1.0）: 1
2025-12-18 11:47:30,469 - INFO -   総ステップ数: 52
2025-12-18 11:47:30,469 - INFO -   継続ステップ率: 51.9% (27/52)
2025-12-18 11:47:30,469 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:30,470 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:30,470 - INFO - 訓練データ正例率: 96.2% (25/26)
2025-12-18 11:47:30,470 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:30,470 - INFO - 正例率 96.2% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:30,470 - INFO - IRLモデルを訓練...
2025-12-18 11:47:30,470 - INFO - ============================================================
2025-12-18 11:47:30,470 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:30,470 - INFO - 軌跡数: 26
2025-12-18 11:47:30,470 - INFO - エポック数: 50
2025-12-18 11:47:30,470 - INFO - ============================================================
2025-12-18 11:47:30,517 - INFO - エポック 0: 平均損失 = 1.1819
2025-12-18 11:47:30,992 - INFO - エポック 10: 平均損失 = 1.1517
2025-12-18 11:47:31,425 - INFO - エポック 20: 平均損失 = 0.9737
2025-12-18 11:47:31,887 - INFO - エポック 30: 平均損失 = 0.7773
2025-12-18 11:47:32,345 - INFO - エポック 40: 平均損失 = 0.7198
2025-12-18 11:47:32,757 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:32,757 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:32,789 - INFO - 最適閾値: 0.0090
2025-12-18 11:47:32,789 - INFO - 訓練データ性能: Precision=0.962, Recall=1.000, F1=0.980
2025-12-18 11:47:32,792 - INFO - モデルを保存: outputs/android_50projects_irl/train_3-6m/irl_model.pt
2025-12-18 11:47:32,792 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-18 11:47:32,792 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:32,792 - INFO - ================================================================================
2025-12-18 11:47:32,792 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:32,792 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-18 11:47:32,792 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:32,792 - INFO - 将来窓: 21～24ヶ月
2025-12-18 11:47:32,792 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-18 11:47:32,792 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:32,792 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:32,792 - INFO - ================================================================================
2025-12-18 11:47:32,792 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:32,792 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:32,793 - INFO - 履歴期間内のレビュアー数: 43
2025-12-18 11:47:32,818 - INFO - ================================================================================
2025-12-18 11:47:32,818 - INFO - 評価用軌跡抽出完了: 11サンプル
2025-12-18 11:47:32,818 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:32,818 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 32
2025-12-18 11:47:32,818 - INFO -   正例（この期間で承諾あり）: 11 (100.0%)
2025-12-18 11:47:32,818 - INFO -   負例（この期間で承諾なし）: 0 (0.0%)
2025-12-18 11:47:32,818 - INFO - ================================================================================
2025-12-18 11:47:32,818 - INFO - 予測を実行...
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/sklearn/metrics/_ranking.py:424: UndefinedMetricWarning: Only one class is present in y_true. ROC AUC score is not defined in that case.
  warnings.warn(
2025-12-18 11:47:32,844 - INFO - ================================================================================
2025-12-18 11:47:32,844 - INFO - 評価結果 (3-6m → 3-6m):
2025-12-18 11:47:32,845 - INFO -   AUC-ROC: nan
2025-12-18 11:47:32,845 - INFO -   AUC-PR: 1.0000
2025-12-18 11:47:32,845 - INFO -   Precision: 1.0000
2025-12-18 11:47:32,845 - INFO -   Recall: 1.0000
2025-12-18 11:47:32,846 - INFO -   F1 Score: 1.0000
2025-12-18 11:47:32,846 - INFO - ================================================================================
2025-12-18 11:47:32,850 - INFO - 結果を保存: outputs/android_50projects_irl/train_3-6m/eval_3-6m
2025-12-18 11:47:32,851 - INFO - 
【6/10】パターン実行中...
2025-12-18 11:47:32,851 - INFO - ================================================================================
2025-12-18 11:47:32,851 - INFO - パターン: 3-6m → 6-9m
2025-12-18 11:47:32,851 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:32,851 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:32,851 - INFO - ================================================================================
2025-12-18 11:47:32,851 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:32,884 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:32,884 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:32,884 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:32,884 - INFO - 将来窓設定: 0～27ヶ月
2025-12-18 11:47:32,884 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:32,884 - INFO - ================================================================================
2025-12-18 11:47:32,884 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:32,884 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:32,884 - INFO - 将来窓: 0～27ヶ月
2025-12-18 11:47:32,884 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:32,884 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:32,884 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:32,884 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:32,884 - INFO - ================================================================================
2025-12-18 11:47:32,884 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:32,884 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:32,886 - INFO - 特徴量計算期間内のレビュアー数: 43
2025-12-18 11:47:32,967 - INFO - ================================================================================
2025-12-18 11:47:32,967 - INFO - 軌跡抽出完了: 26サンプル（レビュアー）
2025-12-18 11:47:32,967 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:32,967 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 17
2025-12-18 11:47:32,967 - INFO -   正例（この期間で承諾あり）: 25 (96.2%)
2025-12-18 11:47:32,967 - INFO -   負例（この期間で承諾なし）: 1 (3.8%)
2025-12-18 11:47:32,967 - INFO -     - 依頼あり→拒否（重み=1.0）: 1
2025-12-18 11:47:32,967 - INFO -   総ステップ数: 52
2025-12-18 11:47:32,967 - INFO -   継続ステップ率: 51.9% (27/52)
2025-12-18 11:47:32,967 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:32,968 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:32,968 - INFO - 訓練データ正例率: 96.2% (25/26)
2025-12-18 11:47:32,968 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:32,968 - INFO - 正例率 96.2% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:32,968 - INFO - IRLモデルを訓練...
2025-12-18 11:47:32,968 - INFO - ============================================================
2025-12-18 11:47:32,968 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:32,968 - INFO - 軌跡数: 26
2025-12-18 11:47:32,968 - INFO - エポック数: 50
2025-12-18 11:47:32,968 - INFO - ============================================================
2025-12-18 11:47:33,013 - INFO - エポック 0: 平均損失 = 1.1781
2025-12-18 11:47:33,454 - INFO - エポック 10: 平均損失 = 1.1362
2025-12-18 11:47:33,932 - INFO - エポック 20: 平均損失 = 0.9407
2025-12-18 11:47:34,361 - INFO - エポック 30: 平均損失 = 0.7943
2025-12-18 11:47:34,821 - INFO - エポック 40: 平均損失 = 0.7465
2025-12-18 11:47:35,214 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:35,214 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:35,246 - INFO - 最適閾値: 0.0041
2025-12-18 11:47:35,246 - INFO - 訓練データ性能: Precision=0.962, Recall=1.000, F1=0.980
2025-12-18 11:47:35,247 - INFO - モデルを保存: outputs/android_50projects_irl/train_3-6m/irl_model.pt
2025-12-18 11:47:35,247 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-18 11:47:35,247 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:35,247 - INFO - ================================================================================
2025-12-18 11:47:35,247 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:35,248 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-18 11:47:35,248 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:35,248 - INFO - 将来窓: 24～27ヶ月
2025-12-18 11:47:35,248 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-18 11:47:35,248 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:35,248 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:35,248 - INFO - ================================================================================
2025-12-18 11:47:35,248 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:35,248 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:35,249 - INFO - 履歴期間内のレビュアー数: 43
2025-12-18 11:47:35,276 - INFO - ================================================================================
2025-12-18 11:47:35,276 - INFO - 評価用軌跡抽出完了: 16サンプル
2025-12-18 11:47:35,276 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:35,276 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 27
2025-12-18 11:47:35,276 - INFO -   正例（この期間で承諾あり）: 15 (93.8%)
2025-12-18 11:47:35,276 - INFO -   負例（この期間で承諾なし）: 1 (6.2%)
2025-12-18 11:47:35,276 - INFO -     - 依頼あり→拒否（重み=1.0）: 1
2025-12-18 11:47:35,276 - INFO - ================================================================================
2025-12-18 11:47:35,276 - INFO - 予測を実行...
2025-12-18 11:47:35,303 - INFO - ================================================================================
2025-12-18 11:47:35,303 - INFO - 評価結果 (3-6m → 6-9m):
2025-12-18 11:47:35,303 - INFO -   AUC-ROC: 0.1333
2025-12-18 11:47:35,303 - INFO -   AUC-PR: 0.8878
2025-12-18 11:47:35,303 - INFO -   Precision: 0.9375
2025-12-18 11:47:35,303 - INFO -   Recall: 1.0000
2025-12-18 11:47:35,303 - INFO -   F1 Score: 0.9677
2025-12-18 11:47:35,303 - INFO - ================================================================================
2025-12-18 11:47:35,304 - INFO - 結果を保存: outputs/android_50projects_irl/train_3-6m/eval_6-9m
2025-12-18 11:47:35,305 - INFO - 
【7/10】パターン実行中...
2025-12-18 11:47:35,305 - INFO - ================================================================================
2025-12-18 11:47:35,305 - INFO - パターン: 3-6m → 9-12m
2025-12-18 11:47:35,305 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:35,305 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:35,305 - INFO - ================================================================================
2025-12-18 11:47:35,305 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:35,342 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:35,342 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:35,342 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:35,342 - INFO - 将来窓設定: 0～30ヶ月
2025-12-18 11:47:35,342 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:35,342 - INFO - ================================================================================
2025-12-18 11:47:35,342 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:35,342 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:35,342 - INFO - 将来窓: 0～30ヶ月
2025-12-18 11:47:35,342 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:35,342 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:35,342 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:35,343 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:35,343 - INFO - ================================================================================
2025-12-18 11:47:35,343 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:35,343 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:35,344 - INFO - 特徴量計算期間内のレビュアー数: 43
2025-12-18 11:47:35,421 - INFO - ================================================================================
2025-12-18 11:47:35,421 - INFO - 軌跡抽出完了: 26サンプル（レビュアー）
2025-12-18 11:47:35,421 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:35,421 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 17
2025-12-18 11:47:35,421 - INFO -   正例（この期間で承諾あり）: 25 (96.2%)
2025-12-18 11:47:35,422 - INFO -   負例（この期間で承諾なし）: 1 (3.8%)
2025-12-18 11:47:35,422 - INFO -     - 依頼あり→拒否（重み=1.0）: 1
2025-12-18 11:47:35,422 - INFO -   総ステップ数: 52
2025-12-18 11:47:35,422 - INFO -   継続ステップ率: 51.9% (27/52)
2025-12-18 11:47:35,422 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:35,423 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:35,423 - INFO - 訓練データ正例率: 96.2% (25/26)
2025-12-18 11:47:35,423 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:35,423 - INFO - 正例率 96.2% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:35,423 - INFO - IRLモデルを訓練...
2025-12-18 11:47:35,423 - INFO - ============================================================
2025-12-18 11:47:35,423 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:35,423 - INFO - 軌跡数: 26
2025-12-18 11:47:35,423 - INFO - エポック数: 50
2025-12-18 11:47:35,423 - INFO - ============================================================
2025-12-18 11:47:35,469 - INFO - エポック 0: 平均損失 = 1.1807
2025-12-18 11:47:35,907 - INFO - エポック 10: 平均損失 = 1.1549
2025-12-18 11:47:36,312 - INFO - エポック 20: 平均損失 = 0.9969
2025-12-18 11:47:36,729 - INFO - エポック 30: 平均損失 = 0.7796
2025-12-18 11:47:37,154 - INFO - エポック 40: 平均損失 = 0.7504
2025-12-18 11:47:37,550 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:37,550 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:37,583 - INFO - 最適閾値: 0.0062
2025-12-18 11:47:37,583 - INFO - 訓練データ性能: Precision=0.962, Recall=1.000, F1=0.980
2025-12-18 11:47:37,584 - INFO - モデルを保存: outputs/android_50projects_irl/train_3-6m/irl_model.pt
2025-12-18 11:47:37,584 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-18 11:47:37,584 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:37,584 - INFO - ================================================================================
2025-12-18 11:47:37,584 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:37,584 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-18 11:47:37,584 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:37,584 - INFO - 将来窓: 27～30ヶ月
2025-12-18 11:47:37,584 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-18 11:47:37,584 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:37,584 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:37,584 - INFO - ================================================================================
2025-12-18 11:47:37,584 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:37,584 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:37,585 - INFO - 履歴期間内のレビュアー数: 43
2025-12-18 11:47:37,610 - INFO - ================================================================================
2025-12-18 11:47:37,610 - INFO - 評価用軌跡抽出完了: 12サンプル
2025-12-18 11:47:37,610 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:37,610 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 31
2025-12-18 11:47:37,610 - INFO -   正例（この期間で承諾あり）: 11 (91.7%)
2025-12-18 11:47:37,610 - INFO -   負例（この期間で承諾なし）: 1 (8.3%)
2025-12-18 11:47:37,610 - INFO -     - 依頼あり→拒否（重み=1.0）: 1
2025-12-18 11:47:37,610 - INFO - ================================================================================
2025-12-18 11:47:37,611 - INFO - 予測を実行...
2025-12-18 11:47:37,635 - INFO - ================================================================================
2025-12-18 11:47:37,635 - INFO - 評価結果 (3-6m → 9-12m):
2025-12-18 11:47:37,635 - INFO -   AUC-ROC: 0.4545
2025-12-18 11:47:37,635 - INFO -   AUC-PR: 0.9368
2025-12-18 11:47:37,635 - INFO -   Precision: 0.9167
2025-12-18 11:47:37,635 - INFO -   Recall: 1.0000
2025-12-18 11:47:37,635 - INFO -   F1 Score: 0.9565
2025-12-18 11:47:37,635 - INFO - ================================================================================
2025-12-18 11:47:37,636 - INFO - 結果を保存: outputs/android_50projects_irl/train_3-6m/eval_9-12m
2025-12-18 11:47:37,637 - INFO - 
【8/10】パターン実行中...
2025-12-18 11:47:37,637 - INFO - ================================================================================
2025-12-18 11:47:37,637 - INFO - パターン: 6-9m → 6-9m
2025-12-18 11:47:37,637 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:37,637 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:37,637 - INFO - ================================================================================
2025-12-18 11:47:37,637 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:37,669 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:37,669 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:37,669 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:37,669 - INFO - 将来窓設定: 0～24ヶ月
2025-12-18 11:47:37,669 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:37,669 - INFO - ================================================================================
2025-12-18 11:47:37,669 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:37,669 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:37,669 - INFO - 将来窓: 0～24ヶ月
2025-12-18 11:47:37,669 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:37,669 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:37,669 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:37,669 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:37,669 - INFO - ================================================================================
2025-12-18 11:47:37,669 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:37,669 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:37,671 - INFO - 特徴量計算期間内のレビュアー数: 44
2025-12-18 11:47:37,764 - INFO - ================================================================================
2025-12-18 11:47:37,764 - INFO - 軌跡抽出完了: 34サンプル（レビュアー）
2025-12-18 11:47:37,764 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:37,764 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 10
2025-12-18 11:47:37,764 - INFO -   正例（この期間で承諾あり）: 31 (91.2%)
2025-12-18 11:47:37,764 - INFO -   負例（この期間で承諾なし）: 3 (8.8%)
2025-12-18 11:47:37,764 - INFO -     - 依頼あり→拒否（重み=1.0）: 3
2025-12-18 11:47:37,764 - INFO -   総ステップ数: 68
2025-12-18 11:47:37,764 - INFO -   継続ステップ率: 64.7% (44/68)
2025-12-18 11:47:37,764 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:37,765 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:37,765 - INFO - 訓練データ正例率: 91.2% (31/34)
2025-12-18 11:47:37,765 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:37,765 - INFO - 正例率 91.2% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:37,765 - INFO - IRLモデルを訓練...
2025-12-18 11:47:37,765 - INFO - ============================================================
2025-12-18 11:47:37,765 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:37,765 - INFO - 軌跡数: 34
2025-12-18 11:47:37,765 - INFO - エポック数: 50
2025-12-18 11:47:37,765 - INFO - ============================================================
2025-12-18 11:47:37,820 - INFO - エポック 0: 平均損失 = 1.2275
2025-12-18 11:47:38,346 - INFO - エポック 10: 平均損失 = 1.0897
2025-12-18 11:47:38,867 - INFO - エポック 20: 平均損失 = 1.0723
2025-12-18 11:47:39,382 - INFO - エポック 30: 平均損失 = 1.0422
2025-12-18 11:47:39,892 - INFO - エポック 40: 平均損失 = 1.0243
2025-12-18 11:47:40,352 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:40,352 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:40,386 - INFO - 最適閾値: 0.4311
2025-12-18 11:47:40,386 - INFO - 訓練データ性能: Precision=0.912, Recall=1.000, F1=0.954
2025-12-18 11:47:40,387 - INFO - モデルを保存: outputs/android_50projects_irl/train_6-9m/irl_model.pt
2025-12-18 11:47:40,388 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_6-9m/optimal_threshold.json
2025-12-18 11:47:40,388 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:40,388 - INFO - ================================================================================
2025-12-18 11:47:40,388 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:40,388 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-18 11:47:40,388 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:40,388 - INFO - 将来窓: 21～24ヶ月
2025-12-18 11:47:40,388 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-18 11:47:40,388 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:40,388 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:40,388 - INFO - ================================================================================
2025-12-18 11:47:40,388 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:40,388 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:40,389 - INFO - 履歴期間内のレビュアー数: 44
2025-12-18 11:47:40,418 - INFO - ================================================================================
2025-12-18 11:47:40,418 - INFO - 評価用軌跡抽出完了: 18サンプル
2025-12-18 11:47:40,418 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:40,418 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 26
2025-12-18 11:47:40,418 - INFO -   正例（この期間で承諾あり）: 18 (100.0%)
2025-12-18 11:47:40,418 - INFO -   負例（この期間で承諾なし）: 0 (0.0%)
2025-12-18 11:47:40,418 - INFO - ================================================================================
2025-12-18 11:47:40,419 - INFO - 予測を実行...
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/sklearn/metrics/_ranking.py:424: UndefinedMetricWarning: Only one class is present in y_true. ROC AUC score is not defined in that case.
  warnings.warn(
2025-12-18 11:47:40,445 - INFO - ================================================================================
2025-12-18 11:47:40,445 - INFO - 評価結果 (6-9m → 6-9m):
2025-12-18 11:47:40,445 - INFO -   AUC-ROC: nan
2025-12-18 11:47:40,445 - INFO -   AUC-PR: 1.0000
2025-12-18 11:47:40,445 - INFO -   Precision: 1.0000
2025-12-18 11:47:40,445 - INFO -   Recall: 1.0000
2025-12-18 11:47:40,445 - INFO -   F1 Score: 1.0000
2025-12-18 11:47:40,445 - INFO - ================================================================================
2025-12-18 11:47:40,446 - INFO - 結果を保存: outputs/android_50projects_irl/train_6-9m/eval_6-9m
2025-12-18 11:47:40,447 - INFO - 
【9/10】パターン実行中...
2025-12-18 11:47:40,447 - INFO - ================================================================================
2025-12-18 11:47:40,447 - INFO - パターン: 6-9m → 9-12m
2025-12-18 11:47:40,447 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:40,447 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:40,447 - INFO - ================================================================================
2025-12-18 11:47:40,448 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:40,482 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:40,482 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:40,482 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:40,482 - INFO - 将来窓設定: 0～27ヶ月
2025-12-18 11:47:40,482 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:40,482 - INFO - ================================================================================
2025-12-18 11:47:40,482 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:40,482 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:40,482 - INFO - 将来窓: 0～27ヶ月
2025-12-18 11:47:40,482 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:40,482 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:40,482 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:40,482 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:40,482 - INFO - ================================================================================
2025-12-18 11:47:40,482 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:40,482 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:40,484 - INFO - 特徴量計算期間内のレビュアー数: 44
2025-12-18 11:47:40,579 - INFO - ================================================================================
2025-12-18 11:47:40,579 - INFO - 軌跡抽出完了: 34サンプル（レビュアー）
2025-12-18 11:47:40,579 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:40,579 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 10
2025-12-18 11:47:40,579 - INFO -   正例（この期間で承諾あり）: 31 (91.2%)
2025-12-18 11:47:40,579 - INFO -   負例（この期間で承諾なし）: 3 (8.8%)
2025-12-18 11:47:40,579 - INFO -     - 依頼あり→拒否（重み=1.0）: 3
2025-12-18 11:47:40,579 - INFO -   総ステップ数: 68
2025-12-18 11:47:40,579 - INFO -   継続ステップ率: 64.7% (44/68)
2025-12-18 11:47:40,579 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:40,580 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:40,580 - INFO - 訓練データ正例率: 91.2% (31/34)
2025-12-18 11:47:40,580 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:40,580 - INFO - 正例率 91.2% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:40,580 - INFO - IRLモデルを訓練...
2025-12-18 11:47:40,580 - INFO - ============================================================
2025-12-18 11:47:40,580 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:40,580 - INFO - 軌跡数: 34
2025-12-18 11:47:40,580 - INFO - エポック数: 50
2025-12-18 11:47:40,580 - INFO - ============================================================
2025-12-18 11:47:40,635 - INFO - エポック 0: 平均損失 = 1.1862
2025-12-18 11:47:41,180 - INFO - エポック 10: 平均損失 = 1.0892
2025-12-18 11:47:41,732 - INFO - エポック 20: 平均損失 = 1.0719
2025-12-18 11:47:42,251 - INFO - エポック 30: 平均損失 = 1.0564
2025-12-18 11:47:42,751 - INFO - エポック 40: 平均損失 = 1.0106
2025-12-18 11:47:43,235 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:43,235 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:43,269 - INFO - 最適閾値: 0.4262
2025-12-18 11:47:43,269 - INFO - 訓練データ性能: Precision=0.912, Recall=1.000, F1=0.954
2025-12-18 11:47:43,270 - INFO - モデルを保存: outputs/android_50projects_irl/train_6-9m/irl_model.pt
2025-12-18 11:47:43,270 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_6-9m/optimal_threshold.json
2025-12-18 11:47:43,270 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:43,270 - INFO - ================================================================================
2025-12-18 11:47:43,270 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:43,270 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-18 11:47:43,270 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:43,270 - INFO - 将来窓: 24～27ヶ月
2025-12-18 11:47:43,270 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-18 11:47:43,270 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:43,270 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:43,270 - INFO - ================================================================================
2025-12-18 11:47:43,270 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:43,270 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:43,271 - INFO - 履歴期間内のレビュアー数: 44
2025-12-18 11:47:43,298 - INFO - ================================================================================
2025-12-18 11:47:43,299 - INFO - 評価用軌跡抽出完了: 16サンプル
2025-12-18 11:47:43,299 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:43,299 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 28
2025-12-18 11:47:43,299 - INFO -   正例（この期間で承諾あり）: 15 (93.8%)
2025-12-18 11:47:43,299 - INFO -   負例（この期間で承諾なし）: 1 (6.2%)
2025-12-18 11:47:43,299 - INFO -     - 依頼あり→拒否（重み=1.0）: 1
2025-12-18 11:47:43,299 - INFO - ================================================================================
2025-12-18 11:47:43,299 - INFO - 予測を実行...
2025-12-18 11:47:43,326 - INFO - ================================================================================
2025-12-18 11:47:43,326 - INFO - 評価結果 (6-9m → 9-12m):
2025-12-18 11:47:43,326 - INFO -   AUC-ROC: 0.0667
2025-12-18 11:47:43,326 - INFO -   AUC-PR: 0.8600
2025-12-18 11:47:43,326 - INFO -   Precision: 0.9375
2025-12-18 11:47:43,326 - INFO -   Recall: 1.0000
2025-12-18 11:47:43,326 - INFO -   F1 Score: 0.9677
2025-12-18 11:47:43,326 - INFO - ================================================================================
2025-12-18 11:47:43,327 - INFO - 結果を保存: outputs/android_50projects_irl/train_6-9m/eval_9-12m
2025-12-18 11:47:43,328 - INFO - 
【10/10】パターン実行中...
2025-12-18 11:47:43,328 - INFO - ================================================================================
2025-12-18 11:47:43,328 - INFO - パターン: 9-12m → 9-12m
2025-12-18 11:47:43,328 - INFO - 訓練期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-18 11:47:43,328 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:43,328 - INFO - ================================================================================
2025-12-18 11:47:43,328 - INFO - レビュー依頼データを読み込み: data/android_50proj_2021_2024_feat.csv
2025-12-18 11:47:43,361 - INFO - 総レビュー依頼数: 7155
2025-12-18 11:47:43,361 - INFO - 承諾数: 4798 (67.1%)
2025-12-18 11:47:43,361 - INFO - 拒否数: 2357 (32.9%)
2025-12-18 11:47:43,361 - INFO - 将来窓設定: 0～24ヶ月
2025-12-18 11:47:43,361 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:43,361 - INFO - ================================================================================
2025-12-18 11:47:43,361 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:43,361 - INFO - 訓練期間全体: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-18 11:47:43,361 - INFO - 将来窓: 0～24ヶ月
2025-12-18 11:47:43,361 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:43,361 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:43,361 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:43,361 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:43,361 - INFO - ================================================================================
2025-12-18 11:47:43,361 - INFO - 特徴量計算期間（訓練全体）: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-18 11:47:43,361 - INFO - 全体ラベル期間（train_end時点から）: 2022-01-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:43,363 - INFO - 特徴量計算期間内のレビュアー数: 53
2025-12-18 11:47:43,476 - INFO - ================================================================================
2025-12-18 11:47:43,476 - INFO - 軌跡抽出完了: 42サンプル（レビュアー）
2025-12-18 11:47:43,476 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:43,476 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 11
2025-12-18 11:47:43,476 - INFO -   正例（この期間で承諾あり）: 37 (88.1%)
2025-12-18 11:47:43,476 - INFO -   負例（この期間で承諾なし）: 5 (11.9%)
2025-12-18 11:47:43,476 - INFO -     - 依頼あり→拒否（重み=1.0）: 5
2025-12-18 11:47:43,476 - INFO -   総ステップ数: 84
2025-12-18 11:47:43,476 - INFO -   継続ステップ率: 52.4% (44/84)
2025-12-18 11:47:43,476 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:43,477 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:43,477 - INFO - 訓練データ正例率: 88.1% (37/42)
2025-12-18 11:47:43,477 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:43,477 - INFO - 正例率 88.1% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:43,478 - INFO - IRLモデルを訓練...
2025-12-18 11:47:43,478 - INFO - ============================================================
2025-12-18 11:47:43,478 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:43,478 - INFO - 軌跡数: 42
2025-12-18 11:47:43,478 - INFO - エポック数: 50
2025-12-18 11:47:43,478 - INFO - ============================================================
2025-12-18 11:47:43,543 - INFO - エポック 0: 平均損失 = 1.1797
2025-12-18 11:47:44,188 - INFO - エポック 10: 平均損失 = 1.1472
2025-12-18 11:47:44,839 - INFO - エポック 20: 平均損失 = 1.0025
2025-12-18 11:47:45,521 - INFO - エポック 30: 平均損失 = 0.8426
2025-12-18 11:47:46,156 - INFO - エポック 40: 平均損失 = 0.7830
2025-12-18 11:47:46,739 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:46,739 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:46,771 - INFO - 最適閾値: 0.0591
2025-12-18 11:47:46,771 - INFO - 訓練データ性能: Precision=0.881, Recall=1.000, F1=0.937
2025-12-18 11:47:46,772 - INFO - モデルを保存: outputs/android_50projects_irl/train_9-12m/irl_model.pt
2025-12-18 11:47:46,773 - INFO - 最適閾値を保存: outputs/android_50projects_irl/train_9-12m/optimal_threshold.json
2025-12-18 11:47:46,773 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:46,773 - INFO - ================================================================================
2025-12-18 11:47:46,773 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:46,773 - INFO - Cutoff日: 2022-01-01 00:00:00
2025-12-18 11:47:46,773 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:46,773 - INFO - 将来窓: 21～24ヶ月
2025-12-18 11:47:46,773 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-18 11:47:46,773 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:46,773 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:46,773 - INFO - ================================================================================
2025-12-18 11:47:46,773 - INFO - 履歴期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-18 11:47:46,773 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:46,774 - INFO - 履歴期間内のレビュアー数: 53
2025-12-18 11:47:46,810 - INFO - ================================================================================
2025-12-18 11:47:46,810 - INFO - 評価用軌跡抽出完了: 23サンプル
2025-12-18 11:47:46,810 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:46,810 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 30
2025-12-18 11:47:46,810 - INFO -   正例（この期間で承諾あり）: 21 (91.3%)
2025-12-18 11:47:46,810 - INFO -   負例（この期間で承諾なし）: 2 (8.7%)
2025-12-18 11:47:46,810 - INFO -     - 依頼あり→拒否（重み=1.0）: 2
2025-12-18 11:47:46,810 - INFO - ================================================================================
2025-12-18 11:47:46,810 - INFO - 予測を実行...
2025-12-18 11:47:46,833 - INFO - ================================================================================
2025-12-18 11:47:46,833 - INFO - 評価結果 (9-12m → 9-12m):
2025-12-18 11:47:46,833 - INFO -   AUC-ROC: 0.3333
2025-12-18 11:47:46,833 - INFO -   AUC-PR: 0.9053
2025-12-18 11:47:46,833 - INFO -   Precision: 0.9130
2025-12-18 11:47:46,833 - INFO -   Recall: 1.0000
2025-12-18 11:47:46,834 - INFO -   F1 Score: 0.9545
2025-12-18 11:47:46,834 - INFO - ================================================================================
2025-12-18 11:47:46,834 - INFO - 結果を保存: outputs/android_50projects_irl/train_9-12m/eval_9-12m
2025-12-18 11:47:46,835 - INFO - ================================================================================
2025-12-18 11:47:46,835 - INFO - メトリクスマトリクスを作成中...
2025-12-18 11:47:46,835 - INFO - ================================================================================
2025-12-18 11:47:46,838 - INFO - 保存: outputs/android_50projects_irl/matrix_AUC_ROC.csv
2025-12-18 11:47:46,840 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.177778  0.228571  0.133333  0.333333
3-6m        NaN       NaN  0.133333  0.454545
6-9m        NaN       NaN       NaN  0.066667
9-12m       NaN       NaN       NaN  0.333333
2025-12-18 11:47:46,840 - INFO - 保存: outputs/android_50projects_irl/matrix_AUC_PR.csv
2025-12-18 11:47:46,842 - INFO - 
           0-3m     3-6m      6-9m     9-12m
0-3m   0.631671  0.68208  0.887813  0.881505
3-6m        NaN  1.00000  0.887813  0.936829
6-9m        NaN      NaN  1.000000  0.860035
9-12m       NaN      NaN       NaN  0.905307
2025-12-18 11:47:46,842 - INFO - 保存: outputs/android_50projects_irl/matrix_PRECISION.csv
2025-12-18 11:47:46,843 - INFO - 
           0-3m      3-6m    6-9m     9-12m
0-3m   0.714286  0.736842  0.9375  0.882353
3-6m        NaN  1.000000  0.9375  0.916667
6-9m        NaN       NaN  1.0000  0.937500
9-12m       NaN       NaN     NaN  0.913043
2025-12-18 11:47:46,843 - INFO - 保存: outputs/android_50projects_irl/matrix_RECALL.csv
2025-12-18 11:47:46,844 - INFO - 
       0-3m  3-6m  6-9m  9-12m
0-3m    1.0   1.0   1.0    1.0
3-6m    NaN   1.0   1.0    1.0
6-9m    NaN   NaN   1.0    1.0
9-12m   NaN   NaN   NaN    1.0
2025-12-18 11:47:46,844 - INFO - 保存: outputs/android_50projects_irl/matrix_f1_score.csv
2025-12-18 11:47:46,845 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.833333  0.848485  0.967742  0.937500
3-6m        NaN  1.000000  0.967742  0.956522
6-9m        NaN       NaN  1.000000  0.967742
9-12m       NaN       NaN       NaN  0.954545
2025-12-18 11:47:46,845 - INFO - ================================================================================
2025-12-18 11:47:46,846 - INFO - マトリクス作成完了
2025-12-18 11:47:46,846 - INFO - ================================================================================
2025-12-18 11:47:46,846 - INFO - ================================================================================
2025-12-18 11:47:46,846 - INFO - 全パターンの訓練・評価が完了しました
2025-12-18 11:47:46,846 - INFO - 結果: outputs/android_50projects_irl
2025-12-18 11:47:46,846 - INFO - ================================================================================
