2025-12-19 11:34:14,605 - INFO - 訓練期間ベース: 2021-01-01 00:00:00
2025-12-19 11:34:14,605 - INFO - 評価期間ベース: 2023-01-01 00:00:00
2025-12-19 11:34:14,606 - INFO - 生成されたパターン数: 10
2025-12-19 11:34:14,606 - INFO -   0-3m → 0-3m
2025-12-19 11:34:14,606 - INFO -   0-3m → 3-6m
2025-12-19 11:34:14,606 - INFO -   0-3m → 6-9m
2025-12-19 11:34:14,606 - INFO -   0-3m → 9-12m
2025-12-19 11:34:14,606 - INFO -   3-6m → 3-6m
2025-12-19 11:34:14,606 - INFO -   3-6m → 6-9m
2025-12-19 11:34:14,606 - INFO -   3-6m → 9-12m
2025-12-19 11:34:14,606 - INFO -   6-9m → 6-9m
2025-12-19 11:34:14,606 - INFO -   6-9m → 9-12m
2025-12-19 11:34:14,606 - INFO -   9-12m → 9-12m
2025-12-19 11:34:14,606 - INFO - ================================================================================
2025-12-19 11:34:14,606 - INFO - 全10パターンの訓練・評価を開始
2025-12-19 11:34:14,606 - INFO - ================================================================================
2025-12-19 11:34:14,606 - INFO - 
【1/10】パターン実行中...
2025-12-19 11:34:14,606 - INFO - ================================================================================
2025-12-19 11:34:14,606 - INFO - パターン: 0-3m → 0-3m
2025-12-19 11:34:14,606 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:14,606 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-19 11:34:14,606 - INFO - ================================================================================
2025-12-19 11:34:16,087 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:16,104 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:16,105 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:16,105 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:16,106 - INFO - 将来窓設定: 0～24ヶ月
2025-12-19 11:34:16,106 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:16,106 - INFO - ================================================================================
2025-12-19 11:34:16,106 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:16,106 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:16,106 - INFO - 将来窓: 0～24ヶ月
2025-12-19 11:34:16,106 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:16,106 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:16,106 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:16,106 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:16,106 - INFO - ================================================================================
2025-12-19 11:34:16,106 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:16,106 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-19 11:34:16,107 - INFO - 特徴量計算期間内のレビュアー数: 70
2025-12-19 11:34:16,237 - INFO - ================================================================================
2025-12-19 11:34:16,237 - INFO - 軌跡抽出完了: 61サンプル（レビュアー）
2025-12-19 11:34:16,237 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:16,237 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-19 11:34:16,237 - INFO -   正例（この期間で承諾あり）: 54 (88.5%)
2025-12-19 11:34:16,237 - INFO -   負例（この期間で承諾なし）: 7 (11.5%)
2025-12-19 11:34:16,237 - INFO -     - 依頼あり→拒否（重み=1.0）: 7
2025-12-19 11:34:16,237 - INFO -   総ステップ数: 122
2025-12-19 11:34:16,237 - INFO -   継続ステップ率: 32.8% (40/122)
2025-12-19 11:34:16,237 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:16,863 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:16,863 - INFO - 訓練データ正例率: 88.5% (54/61)
2025-12-19 11:34:16,863 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:16,863 - INFO - 正例率 88.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:16,863 - INFO - IRLモデルを訓練...
2025-12-19 11:34:16,864 - INFO - ============================================================
2025-12-19 11:34:16,864 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:16,864 - INFO - 軌跡数: 61
2025-12-19 11:34:16,864 - INFO - エポック数: 20
2025-12-19 11:34:16,864 - INFO - ============================================================
2025-12-19 11:34:17,017 - INFO - エポック 0: 平均損失 = 1.1884
2025-12-19 11:34:18,053 - INFO - エポック 10: 平均損失 = 0.9831
2025-12-19 11:34:19,649 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:19,649 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:19,687 - INFO - 最適閾値: 0.0343
2025-12-19 11:34:19,687 - INFO - 訓練データ性能: Precision=0.885, Recall=1.000, F1=0.939
2025-12-19 11:34:19,691 - INFO - モデルを保存: outputs/qt_50projects_irl/train_0-3m/irl_model.pt
2025-12-19 11:34:19,691 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-19 11:34:19,691 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:19,691 - INFO - ================================================================================
2025-12-19 11:34:19,691 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:19,691 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-19 11:34:19,692 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:19,692 - INFO - 将来窓: 21～24ヶ月
2025-12-19 11:34:19,692 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-19 11:34:19,692 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:19,692 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:19,692 - INFO - ================================================================================
2025-12-19 11:34:19,692 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:19,692 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-19 11:34:19,693 - INFO - 履歴期間内のレビュアー数: 70
2025-12-19 11:34:19,761 - INFO - ================================================================================
2025-12-19 11:34:19,761 - INFO - 評価用軌跡抽出完了: 44サンプル
2025-12-19 11:34:19,761 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:19,761 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 26
2025-12-19 11:34:19,761 - INFO -   正例（この期間で承諾あり）: 26 (59.1%)
2025-12-19 11:34:19,761 - INFO -   負例（この期間で承諾なし）: 18 (40.9%)
2025-12-19 11:34:19,761 - INFO -     - 依頼あり→拒否（重み=1.0）: 18
2025-12-19 11:34:19,761 - INFO - ================================================================================
2025-12-19 11:34:19,761 - INFO - 予測を実行...
2025-12-19 11:34:19,787 - INFO - ================================================================================
2025-12-19 11:34:19,788 - INFO - 評価結果 (0-3m → 0-3m):
2025-12-19 11:34:19,788 - INFO -   AUC-ROC: 0.5534
2025-12-19 11:34:19,788 - INFO -   AUC-PR: 0.6677
2025-12-19 11:34:19,788 - INFO -   Precision: 0.5909
2025-12-19 11:34:19,788 - INFO -   Recall: 1.0000
2025-12-19 11:34:19,788 - INFO -   F1 Score: 0.7429
2025-12-19 11:34:19,788 - INFO - ================================================================================
2025-12-19 11:34:19,790 - INFO - 結果を保存: outputs/qt_50projects_irl/train_0-3m/eval_0-3m
2025-12-19 11:34:19,790 - INFO - 
【2/10】パターン実行中...
2025-12-19 11:34:19,790 - INFO - ================================================================================
2025-12-19 11:34:19,790 - INFO - パターン: 0-3m → 3-6m
2025-12-19 11:34:19,790 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:19,790 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-19 11:34:19,790 - INFO - ================================================================================
2025-12-19 11:34:19,790 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:19,807 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:19,807 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:19,807 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:19,807 - INFO - 将来窓設定: 0～27ヶ月
2025-12-19 11:34:19,807 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:19,807 - INFO - ================================================================================
2025-12-19 11:34:19,807 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:19,807 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:19,807 - INFO - 将来窓: 0～27ヶ月
2025-12-19 11:34:19,807 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:19,807 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:19,807 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:19,807 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:19,808 - INFO - ================================================================================
2025-12-19 11:34:19,808 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:19,808 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-19 11:34:19,809 - INFO - 特徴量計算期間内のレビュアー数: 70
2025-12-19 11:34:19,993 - INFO - ================================================================================
2025-12-19 11:34:19,993 - INFO - 軌跡抽出完了: 61サンプル（レビュアー）
2025-12-19 11:34:19,993 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:19,993 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-19 11:34:19,993 - INFO -   正例（この期間で承諾あり）: 54 (88.5%)
2025-12-19 11:34:19,993 - INFO -   負例（この期間で承諾なし）: 7 (11.5%)
2025-12-19 11:34:19,993 - INFO -     - 依頼あり→拒否（重み=1.0）: 7
2025-12-19 11:34:19,993 - INFO -   総ステップ数: 122
2025-12-19 11:34:19,993 - INFO -   継続ステップ率: 32.8% (40/122)
2025-12-19 11:34:19,993 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:19,994 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:19,994 - INFO - 訓練データ正例率: 88.5% (54/61)
2025-12-19 11:34:19,994 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:19,994 - INFO - 正例率 88.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:19,995 - INFO - IRLモデルを訓練...
2025-12-19 11:34:19,995 - INFO - ============================================================
2025-12-19 11:34:19,995 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:19,995 - INFO - 軌跡数: 61
2025-12-19 11:34:19,995 - INFO - エポック数: 20
2025-12-19 11:34:19,995 - INFO - ============================================================
2025-12-19 11:34:20,114 - INFO - エポック 0: 平均損失 = 1.1285
2025-12-19 11:34:21,366 - INFO - エポック 10: 平均損失 = 0.9821
2025-12-19 11:34:22,341 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:22,341 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:22,368 - INFO - 最適閾値: 0.0222
2025-12-19 11:34:22,368 - INFO - 訓練データ性能: Precision=0.885, Recall=1.000, F1=0.939
2025-12-19 11:34:22,369 - INFO - モデルを保存: outputs/qt_50projects_irl/train_0-3m/irl_model.pt
2025-12-19 11:34:22,369 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-19 11:34:22,369 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:22,369 - INFO - ================================================================================
2025-12-19 11:34:22,369 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:22,369 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-19 11:34:22,369 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:22,369 - INFO - 将来窓: 24～27ヶ月
2025-12-19 11:34:22,369 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-19 11:34:22,369 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:22,369 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:22,369 - INFO - ================================================================================
2025-12-19 11:34:22,369 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:22,369 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-19 11:34:22,370 - INFO - 履歴期間内のレビュアー数: 70
2025-12-19 11:34:22,424 - INFO - ================================================================================
2025-12-19 11:34:22,424 - INFO - 評価用軌跡抽出完了: 36サンプル
2025-12-19 11:34:22,424 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:22,424 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 34
2025-12-19 11:34:22,424 - INFO -   正例（この期間で承諾あり）: 21 (58.3%)
2025-12-19 11:34:22,424 - INFO -   負例（この期間で承諾なし）: 15 (41.7%)
2025-12-19 11:34:22,424 - INFO -     - 依頼あり→拒否（重み=1.0）: 15
2025-12-19 11:34:22,424 - INFO - ================================================================================
2025-12-19 11:34:22,424 - INFO - 予測を実行...
2025-12-19 11:34:22,443 - INFO - ================================================================================
2025-12-19 11:34:22,443 - INFO - 評価結果 (0-3m → 3-6m):
2025-12-19 11:34:22,443 - INFO -   AUC-ROC: 0.6222
2025-12-19 11:34:22,443 - INFO -   AUC-PR: 0.6545
2025-12-19 11:34:22,443 - INFO -   Precision: 0.5833
2025-12-19 11:34:22,443 - INFO -   Recall: 1.0000
2025-12-19 11:34:22,443 - INFO -   F1 Score: 0.7368
2025-12-19 11:34:22,443 - INFO - ================================================================================
2025-12-19 11:34:22,444 - INFO - 結果を保存: outputs/qt_50projects_irl/train_0-3m/eval_3-6m
2025-12-19 11:34:22,445 - INFO - 
【3/10】パターン実行中...
2025-12-19 11:34:22,445 - INFO - ================================================================================
2025-12-19 11:34:22,445 - INFO - パターン: 0-3m → 6-9m
2025-12-19 11:34:22,445 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:22,445 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:22,445 - INFO - ================================================================================
2025-12-19 11:34:22,445 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:22,459 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:22,459 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:22,460 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:22,460 - INFO - 将来窓設定: 0～30ヶ月
2025-12-19 11:34:22,460 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:22,460 - INFO - ================================================================================
2025-12-19 11:34:22,460 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:22,460 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:22,460 - INFO - 将来窓: 0～30ヶ月
2025-12-19 11:34:22,460 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:22,460 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:22,460 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:22,460 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:22,460 - INFO - ================================================================================
2025-12-19 11:34:22,460 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:22,460 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:22,461 - INFO - 特徴量計算期間内のレビュアー数: 70
2025-12-19 11:34:22,613 - INFO - ================================================================================
2025-12-19 11:34:22,613 - INFO - 軌跡抽出完了: 61サンプル（レビュアー）
2025-12-19 11:34:22,613 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:22,613 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-19 11:34:22,613 - INFO -   正例（この期間で承諾あり）: 54 (88.5%)
2025-12-19 11:34:22,613 - INFO -   負例（この期間で承諾なし）: 7 (11.5%)
2025-12-19 11:34:22,613 - INFO -     - 依頼あり→拒否（重み=1.0）: 7
2025-12-19 11:34:22,613 - INFO -   総ステップ数: 122
2025-12-19 11:34:22,613 - INFO -   継続ステップ率: 32.8% (40/122)
2025-12-19 11:34:22,613 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:22,614 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:22,614 - INFO - 訓練データ正例率: 88.5% (54/61)
2025-12-19 11:34:22,614 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:22,614 - INFO - 正例率 88.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:22,614 - INFO - IRLモデルを訓練...
2025-12-19 11:34:22,614 - INFO - ============================================================
2025-12-19 11:34:22,614 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:22,614 - INFO - 軌跡数: 61
2025-12-19 11:34:22,614 - INFO - エポック数: 20
2025-12-19 11:34:22,614 - INFO - ============================================================
2025-12-19 11:34:22,716 - INFO - エポック 0: 平均損失 = 1.1444
2025-12-19 11:34:23,737 - INFO - エポック 10: 平均損失 = 0.9818
2025-12-19 11:34:24,657 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:24,657 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:24,681 - INFO - 最適閾値: 0.0318
2025-12-19 11:34:24,681 - INFO - 訓練データ性能: Precision=0.885, Recall=1.000, F1=0.939
2025-12-19 11:34:24,683 - INFO - モデルを保存: outputs/qt_50projects_irl/train_0-3m/irl_model.pt
2025-12-19 11:34:24,683 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-19 11:34:24,683 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:24,683 - INFO - ================================================================================
2025-12-19 11:34:24,683 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:24,683 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-19 11:34:24,683 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:24,683 - INFO - 将来窓: 27～30ヶ月
2025-12-19 11:34:24,683 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-19 11:34:24,683 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:24,683 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:24,683 - INFO - ================================================================================
2025-12-19 11:34:24,683 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:24,683 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:24,684 - INFO - 履歴期間内のレビュアー数: 70
2025-12-19 11:34:24,731 - INFO - ================================================================================
2025-12-19 11:34:24,731 - INFO - 評価用軌跡抽出完了: 34サンプル
2025-12-19 11:34:24,731 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:24,731 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 36
2025-12-19 11:34:24,731 - INFO -   正例（この期間で承諾あり）: 25 (73.5%)
2025-12-19 11:34:24,731 - INFO -   負例（この期間で承諾なし）: 9 (26.5%)
2025-12-19 11:34:24,732 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-19 11:34:24,732 - INFO - ================================================================================
2025-12-19 11:34:24,732 - INFO - 予測を実行...
2025-12-19 11:34:24,749 - INFO - ================================================================================
2025-12-19 11:34:24,750 - INFO - 評価結果 (0-3m → 6-9m):
2025-12-19 11:34:24,750 - INFO -   AUC-ROC: 0.4533
2025-12-19 11:34:24,750 - INFO -   AUC-PR: 0.7101
2025-12-19 11:34:24,750 - INFO -   Precision: 0.7353
2025-12-19 11:34:24,750 - INFO -   Recall: 1.0000
2025-12-19 11:34:24,750 - INFO -   F1 Score: 0.8475
2025-12-19 11:34:24,750 - INFO - ================================================================================
2025-12-19 11:34:24,751 - INFO - 結果を保存: outputs/qt_50projects_irl/train_0-3m/eval_6-9m
2025-12-19 11:34:24,751 - INFO - 
【4/10】パターン実行中...
2025-12-19 11:34:24,751 - INFO - ================================================================================
2025-12-19 11:34:24,751 - INFO - パターン: 0-3m → 9-12m
2025-12-19 11:34:24,751 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:24,751 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:24,751 - INFO - ================================================================================
2025-12-19 11:34:24,751 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:24,766 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:24,766 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:24,766 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:24,766 - INFO - 将来窓設定: 0～33ヶ月
2025-12-19 11:34:24,766 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:24,766 - INFO - ================================================================================
2025-12-19 11:34:24,766 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:24,766 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:24,766 - INFO - 将来窓: 0～33ヶ月
2025-12-19 11:34:24,766 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:24,766 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:24,766 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:24,766 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:24,766 - INFO - ================================================================================
2025-12-19 11:34:24,766 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:24,766 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:24,767 - INFO - 特徴量計算期間内のレビュアー数: 70
2025-12-19 11:34:24,915 - INFO - ================================================================================
2025-12-19 11:34:24,915 - INFO - 軌跡抽出完了: 61サンプル（レビュアー）
2025-12-19 11:34:24,915 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:24,915 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-19 11:34:24,915 - INFO -   正例（この期間で承諾あり）: 54 (88.5%)
2025-12-19 11:34:24,915 - INFO -   負例（この期間で承諾なし）: 7 (11.5%)
2025-12-19 11:34:24,915 - INFO -     - 依頼あり→拒否（重み=1.0）: 7
2025-12-19 11:34:24,915 - INFO -   総ステップ数: 122
2025-12-19 11:34:24,915 - INFO -   継続ステップ率: 32.8% (40/122)
2025-12-19 11:34:24,915 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:24,916 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:24,916 - INFO - 訓練データ正例率: 88.5% (54/61)
2025-12-19 11:34:24,916 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:24,916 - INFO - 正例率 88.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:24,916 - INFO - IRLモデルを訓練...
2025-12-19 11:34:24,916 - INFO - ============================================================
2025-12-19 11:34:24,916 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:24,916 - INFO - 軌跡数: 61
2025-12-19 11:34:24,916 - INFO - エポック数: 20
2025-12-19 11:34:24,916 - INFO - ============================================================
2025-12-19 11:34:25,021 - INFO - エポック 0: 平均損失 = 1.1836
2025-12-19 11:34:26,215 - INFO - エポック 10: 平均損失 = 0.9892
2025-12-19 11:34:27,198 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:27,198 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:27,223 - INFO - 最適閾値: 0.0475
2025-12-19 11:34:27,223 - INFO - 訓練データ性能: Precision=0.885, Recall=1.000, F1=0.939
2025-12-19 11:34:27,224 - INFO - モデルを保存: outputs/qt_50projects_irl/train_0-3m/irl_model.pt
2025-12-19 11:34:27,225 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-19 11:34:27,225 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:27,225 - INFO - ================================================================================
2025-12-19 11:34:27,225 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:27,225 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-19 11:34:27,225 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:27,225 - INFO - 将来窓: 30～33ヶ月
2025-12-19 11:34:27,225 - INFO - 拡張ラベル期間: 30～12ヶ月
2025-12-19 11:34:27,225 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:27,225 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:27,225 - INFO - ================================================================================
2025-12-19 11:34:27,225 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-19 11:34:27,225 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:27,226 - INFO - 履歴期間内のレビュアー数: 70
2025-12-19 11:34:27,275 - INFO - ================================================================================
2025-12-19 11:34:27,275 - INFO - 評価用軌跡抽出完了: 38サンプル
2025-12-19 11:34:27,275 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:27,275 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 32
2025-12-19 11:34:27,275 - INFO -   正例（この期間で承諾あり）: 29 (76.3%)
2025-12-19 11:34:27,275 - INFO -   負例（この期間で承諾なし）: 9 (23.7%)
2025-12-19 11:34:27,275 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-19 11:34:27,275 - INFO - ================================================================================
2025-12-19 11:34:27,276 - INFO - 予測を実行...
2025-12-19 11:34:27,293 - INFO - ================================================================================
2025-12-19 11:34:27,293 - INFO - 評価結果 (0-3m → 9-12m):
2025-12-19 11:34:27,293 - INFO -   AUC-ROC: 0.5747
2025-12-19 11:34:27,293 - INFO -   AUC-PR: 0.8193
2025-12-19 11:34:27,293 - INFO -   Precision: 0.7632
2025-12-19 11:34:27,293 - INFO -   Recall: 1.0000
2025-12-19 11:34:27,293 - INFO -   F1 Score: 0.8657
2025-12-19 11:34:27,293 - INFO - ================================================================================
2025-12-19 11:34:27,294 - INFO - 結果を保存: outputs/qt_50projects_irl/train_0-3m/eval_9-12m
2025-12-19 11:34:27,294 - INFO - 
【5/10】パターン実行中...
2025-12-19 11:34:27,295 - INFO - ================================================================================
2025-12-19 11:34:27,295 - INFO - パターン: 3-6m → 3-6m
2025-12-19 11:34:27,295 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:27,295 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-19 11:34:27,295 - INFO - ================================================================================
2025-12-19 11:34:27,295 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:27,309 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:27,309 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:27,309 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:27,309 - INFO - 将来窓設定: 0～24ヶ月
2025-12-19 11:34:27,309 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:27,309 - INFO - ================================================================================
2025-12-19 11:34:27,309 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:27,309 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:27,309 - INFO - 将来窓: 0～24ヶ月
2025-12-19 11:34:27,309 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:27,309 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:27,309 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:27,309 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:27,309 - INFO - ================================================================================
2025-12-19 11:34:27,309 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:27,309 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-19 11:34:27,310 - INFO - 特徴量計算期間内のレビュアー数: 89
2025-12-19 11:34:27,498 - INFO - ================================================================================
2025-12-19 11:34:27,498 - INFO - 軌跡抽出完了: 80サンプル（レビュアー）
2025-12-19 11:34:27,498 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:27,498 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-19 11:34:27,498 - INFO -   正例（この期間で承諾あり）: 71 (88.8%)
2025-12-19 11:34:27,498 - INFO -   負例（この期間で承諾なし）: 9 (11.2%)
2025-12-19 11:34:27,498 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-19 11:34:27,498 - INFO -   総ステップ数: 160
2025-12-19 11:34:27,498 - INFO -   継続ステップ率: 40.6% (65/160)
2025-12-19 11:34:27,498 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:27,499 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:27,499 - INFO - 訓練データ正例率: 88.8% (71/80)
2025-12-19 11:34:27,499 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:27,499 - INFO - 正例率 88.8% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:27,499 - INFO - IRLモデルを訓練...
2025-12-19 11:34:27,499 - INFO - ============================================================
2025-12-19 11:34:27,499 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:27,499 - INFO - 軌跡数: 80
2025-12-19 11:34:27,499 - INFO - エポック数: 20
2025-12-19 11:34:27,499 - INFO - ============================================================
2025-12-19 11:34:27,639 - INFO - エポック 0: 平均損失 = 1.1417
2025-12-19 11:34:29,077 - INFO - エポック 10: 平均損失 = 0.8802
2025-12-19 11:34:30,464 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:30,465 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:30,505 - INFO - 最適閾値: 0.0109
2025-12-19 11:34:30,505 - INFO - 訓練データ性能: Precision=0.887, Recall=1.000, F1=0.940
2025-12-19 11:34:30,507 - INFO - モデルを保存: outputs/qt_50projects_irl/train_3-6m/irl_model.pt
2025-12-19 11:34:30,507 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-19 11:34:30,507 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:30,507 - INFO - ================================================================================
2025-12-19 11:34:30,507 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:30,507 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-19 11:34:30,507 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:30,507 - INFO - 将来窓: 21～24ヶ月
2025-12-19 11:34:30,507 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-19 11:34:30,507 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:30,507 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:30,507 - INFO - ================================================================================
2025-12-19 11:34:30,507 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:30,507 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-19 11:34:30,508 - INFO - 履歴期間内のレビュアー数: 89
2025-12-19 11:34:30,566 - INFO - ================================================================================
2025-12-19 11:34:30,567 - INFO - 評価用軌跡抽出完了: 38サンプル
2025-12-19 11:34:30,567 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:30,567 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 51
2025-12-19 11:34:30,567 - INFO -   正例（この期間で承諾あり）: 22 (57.9%)
2025-12-19 11:34:30,567 - INFO -   負例（この期間で承諾なし）: 16 (42.1%)
2025-12-19 11:34:30,567 - INFO -     - 依頼あり→拒否（重み=1.0）: 16
2025-12-19 11:34:30,567 - INFO - ================================================================================
2025-12-19 11:34:30,567 - INFO - 予測を実行...
2025-12-19 11:34:30,593 - INFO - ================================================================================
2025-12-19 11:34:30,593 - INFO - 評価結果 (3-6m → 3-6m):
2025-12-19 11:34:30,593 - INFO -   AUC-ROC: 0.3210
2025-12-19 11:34:30,593 - INFO -   AUC-PR: 0.4959
2025-12-19 11:34:30,593 - INFO -   Precision: 0.5789
2025-12-19 11:34:30,593 - INFO -   Recall: 1.0000
2025-12-19 11:34:30,593 - INFO -   F1 Score: 0.7333
2025-12-19 11:34:30,593 - INFO - ================================================================================
2025-12-19 11:34:30,594 - INFO - 結果を保存: outputs/qt_50projects_irl/train_3-6m/eval_3-6m
2025-12-19 11:34:30,595 - INFO - 
【6/10】パターン実行中...
2025-12-19 11:34:30,595 - INFO - ================================================================================
2025-12-19 11:34:30,595 - INFO - パターン: 3-6m → 6-9m
2025-12-19 11:34:30,595 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:30,595 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:30,595 - INFO - ================================================================================
2025-12-19 11:34:30,595 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:30,610 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:30,610 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:30,610 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:30,610 - INFO - 将来窓設定: 0～27ヶ月
2025-12-19 11:34:30,610 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:30,610 - INFO - ================================================================================
2025-12-19 11:34:30,610 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:30,610 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:30,610 - INFO - 将来窓: 0～27ヶ月
2025-12-19 11:34:30,610 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:30,610 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:30,610 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:30,610 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:30,610 - INFO - ================================================================================
2025-12-19 11:34:30,610 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:30,610 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:30,611 - INFO - 特徴量計算期間内のレビュアー数: 89
2025-12-19 11:34:30,978 - INFO - ================================================================================
2025-12-19 11:34:30,978 - INFO - 軌跡抽出完了: 81サンプル（レビュアー）
2025-12-19 11:34:30,978 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:30,978 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 8
2025-12-19 11:34:30,978 - INFO -   正例（この期間で承諾あり）: 72 (88.9%)
2025-12-19 11:34:30,978 - INFO -   負例（この期間で承諾なし）: 9 (11.1%)
2025-12-19 11:34:30,978 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-19 11:34:30,978 - INFO -   総ステップ数: 162
2025-12-19 11:34:30,978 - INFO -   継続ステップ率: 41.4% (67/162)
2025-12-19 11:34:30,978 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:30,979 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:30,979 - INFO - 訓練データ正例率: 88.9% (72/81)
2025-12-19 11:34:30,979 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:30,979 - INFO - 正例率 88.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:30,979 - INFO - IRLモデルを訓練...
2025-12-19 11:34:30,979 - INFO - ============================================================
2025-12-19 11:34:30,979 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:30,980 - INFO - 軌跡数: 81
2025-12-19 11:34:30,980 - INFO - エポック数: 20
2025-12-19 11:34:30,980 - INFO - ============================================================
2025-12-19 11:34:31,133 - INFO - エポック 0: 平均損失 = 1.2194
2025-12-19 11:34:32,718 - INFO - エポック 10: 平均損失 = 0.9398
2025-12-19 11:34:34,285 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:34,285 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:34,329 - INFO - 最適閾値: 0.0087
2025-12-19 11:34:34,329 - INFO - 訓練データ性能: Precision=0.889, Recall=1.000, F1=0.941
2025-12-19 11:34:34,330 - INFO - モデルを保存: outputs/qt_50projects_irl/train_3-6m/irl_model.pt
2025-12-19 11:34:34,330 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-19 11:34:34,330 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:34,330 - INFO - ================================================================================
2025-12-19 11:34:34,330 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:34,330 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-19 11:34:34,330 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:34,330 - INFO - 将来窓: 24～27ヶ月
2025-12-19 11:34:34,330 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-19 11:34:34,330 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:34,330 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:34,330 - INFO - ================================================================================
2025-12-19 11:34:34,330 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:34,330 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:34,331 - INFO - 履歴期間内のレビュアー数: 89
2025-12-19 11:34:34,392 - INFO - ================================================================================
2025-12-19 11:34:34,392 - INFO - 評価用軌跡抽出完了: 41サンプル
2025-12-19 11:34:34,392 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:34,392 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 48
2025-12-19 11:34:34,392 - INFO -   正例（この期間で承諾あり）: 30 (73.2%)
2025-12-19 11:34:34,392 - INFO -   負例（この期間で承諾なし）: 11 (26.8%)
2025-12-19 11:34:34,392 - INFO -     - 依頼あり→拒否（重み=1.0）: 11
2025-12-19 11:34:34,392 - INFO - ================================================================================
2025-12-19 11:34:34,392 - INFO - 予測を実行...
2025-12-19 11:34:34,419 - INFO - ================================================================================
2025-12-19 11:34:34,419 - INFO - 評価結果 (3-6m → 6-9m):
2025-12-19 11:34:34,419 - INFO -   AUC-ROC: 0.3727
2025-12-19 11:34:34,419 - INFO -   AUC-PR: 0.6697
2025-12-19 11:34:34,419 - INFO -   Precision: 0.7317
2025-12-19 11:34:34,419 - INFO -   Recall: 1.0000
2025-12-19 11:34:34,419 - INFO -   F1 Score: 0.8451
2025-12-19 11:34:34,419 - INFO - ================================================================================
2025-12-19 11:34:34,420 - INFO - 結果を保存: outputs/qt_50projects_irl/train_3-6m/eval_6-9m
2025-12-19 11:34:34,421 - INFO - 
【7/10】パターン実行中...
2025-12-19 11:34:34,421 - INFO - ================================================================================
2025-12-19 11:34:34,421 - INFO - パターン: 3-6m → 9-12m
2025-12-19 11:34:34,421 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:34,421 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:34,421 - INFO - ================================================================================
2025-12-19 11:34:34,421 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:34,436 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:34,436 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:34,436 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:34,436 - INFO - 将来窓設定: 0～30ヶ月
2025-12-19 11:34:34,436 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:34,436 - INFO - ================================================================================
2025-12-19 11:34:34,436 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:34,436 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:34,436 - INFO - 将来窓: 0～30ヶ月
2025-12-19 11:34:34,436 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:34,436 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:34,436 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:34,436 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:34,436 - INFO - ================================================================================
2025-12-19 11:34:34,436 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:34,436 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:34,437 - INFO - 特徴量計算期間内のレビュアー数: 89
2025-12-19 11:34:34,632 - INFO - ================================================================================
2025-12-19 11:34:34,632 - INFO - 軌跡抽出完了: 81サンプル（レビュアー）
2025-12-19 11:34:34,632 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:34,632 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 8
2025-12-19 11:34:34,632 - INFO -   正例（この期間で承諾あり）: 72 (88.9%)
2025-12-19 11:34:34,632 - INFO -   負例（この期間で承諾なし）: 9 (11.1%)
2025-12-19 11:34:34,632 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-19 11:34:34,632 - INFO -   総ステップ数: 162
2025-12-19 11:34:34,632 - INFO -   継続ステップ率: 41.4% (67/162)
2025-12-19 11:34:34,632 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:34,633 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:34,633 - INFO - 訓練データ正例率: 88.9% (72/81)
2025-12-19 11:34:34,633 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:34,633 - INFO - 正例率 88.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:34,633 - INFO - IRLモデルを訓練...
2025-12-19 11:34:34,633 - INFO - ============================================================
2025-12-19 11:34:34,633 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:34,633 - INFO - 軌跡数: 81
2025-12-19 11:34:34,633 - INFO - エポック数: 20
2025-12-19 11:34:34,633 - INFO - ============================================================
2025-12-19 11:34:34,778 - INFO - エポック 0: 平均損失 = 1.2277
2025-12-19 11:34:36,350 - INFO - エポック 10: 平均損失 = 0.8946
2025-12-19 11:34:37,685 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:37,685 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:37,727 - INFO - 最適閾値: 0.0221
2025-12-19 11:34:37,727 - INFO - 訓練データ性能: Precision=0.889, Recall=1.000, F1=0.941
2025-12-19 11:34:37,728 - INFO - モデルを保存: outputs/qt_50projects_irl/train_3-6m/irl_model.pt
2025-12-19 11:34:37,728 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-19 11:34:37,728 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:37,728 - INFO - ================================================================================
2025-12-19 11:34:37,728 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:37,728 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-19 11:34:37,728 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:37,728 - INFO - 将来窓: 27～30ヶ月
2025-12-19 11:34:37,728 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-19 11:34:37,728 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:37,728 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:37,728 - INFO - ================================================================================
2025-12-19 11:34:37,728 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-19 11:34:37,728 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:37,729 - INFO - 履歴期間内のレビュアー数: 89
2025-12-19 11:34:37,791 - INFO - ================================================================================
2025-12-19 11:34:37,792 - INFO - 評価用軌跡抽出完了: 43サンプル
2025-12-19 11:34:37,792 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:37,792 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 46
2025-12-19 11:34:37,792 - INFO -   正例（この期間で承諾あり）: 30 (69.8%)
2025-12-19 11:34:37,792 - INFO -   負例（この期間で承諾なし）: 13 (30.2%)
2025-12-19 11:34:37,792 - INFO -     - 依頼あり→拒否（重み=1.0）: 13
2025-12-19 11:34:37,792 - INFO - ================================================================================
2025-12-19 11:34:37,792 - INFO - 予測を実行...
2025-12-19 11:34:37,820 - INFO - ================================================================================
2025-12-19 11:34:37,820 - INFO - 評価結果 (3-6m → 9-12m):
2025-12-19 11:34:37,820 - INFO -   AUC-ROC: 0.4538
2025-12-19 11:34:37,820 - INFO -   AUC-PR: 0.7130
2025-12-19 11:34:37,820 - INFO -   Precision: 0.6977
2025-12-19 11:34:37,820 - INFO -   Recall: 1.0000
2025-12-19 11:34:37,820 - INFO -   F1 Score: 0.8219
2025-12-19 11:34:37,820 - INFO - ================================================================================
2025-12-19 11:34:37,821 - INFO - 結果を保存: outputs/qt_50projects_irl/train_3-6m/eval_9-12m
2025-12-19 11:34:37,822 - INFO - 
【8/10】パターン実行中...
2025-12-19 11:34:37,822 - INFO - ================================================================================
2025-12-19 11:34:37,822 - INFO - パターン: 6-9m → 6-9m
2025-12-19 11:34:37,822 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-19 11:34:37,822 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:37,822 - INFO - ================================================================================
2025-12-19 11:34:37,822 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:37,836 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:37,836 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:37,836 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:37,837 - INFO - 将来窓設定: 0～24ヶ月
2025-12-19 11:34:37,837 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:37,837 - INFO - ================================================================================
2025-12-19 11:34:37,837 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:37,837 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-19 11:34:37,837 - INFO - 将来窓: 0～24ヶ月
2025-12-19 11:34:37,837 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:37,837 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:37,837 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:37,837 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:37,837 - INFO - ================================================================================
2025-12-19 11:34:37,837 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-19 11:34:37,837 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:37,838 - INFO - 特徴量計算期間内のレビュアー数: 73
2025-12-19 11:34:38,000 - INFO - ================================================================================
2025-12-19 11:34:38,000 - INFO - 軌跡抽出完了: 67サンプル（レビュアー）
2025-12-19 11:34:38,000 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:38,000 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 6
2025-12-19 11:34:38,000 - INFO -   正例（この期間で承諾あり）: 57 (85.1%)
2025-12-19 11:34:38,000 - INFO -   負例（この期間で承諾なし）: 10 (14.9%)
2025-12-19 11:34:38,000 - INFO -     - 依頼あり→拒否（重み=1.0）: 10
2025-12-19 11:34:38,000 - INFO -   総ステップ数: 134
2025-12-19 11:34:38,000 - INFO -   継続ステップ率: 44.8% (60/134)
2025-12-19 11:34:38,000 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:38,001 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:38,001 - INFO - 訓練データ正例率: 85.1% (57/67)
2025-12-19 11:34:38,001 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:38,001 - INFO - 正例率 85.1% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:38,001 - INFO - IRLモデルを訓練...
2025-12-19 11:34:38,001 - INFO - ============================================================
2025-12-19 11:34:38,001 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:38,001 - INFO - 軌跡数: 67
2025-12-19 11:34:38,001 - INFO - エポック数: 20
2025-12-19 11:34:38,001 - INFO - ============================================================
2025-12-19 11:34:38,122 - INFO - エポック 0: 平均損失 = 1.2166
2025-12-19 11:34:39,290 - INFO - エポック 10: 平均損失 = 1.1389
2025-12-19 11:34:40,567 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:40,568 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:40,598 - INFO - 最適閾値: 0.1072
2025-12-19 11:34:40,598 - INFO - 訓練データ性能: Precision=0.851, Recall=1.000, F1=0.919
2025-12-19 11:34:40,599 - INFO - モデルを保存: outputs/qt_50projects_irl/train_6-9m/irl_model.pt
2025-12-19 11:34:40,599 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_6-9m/optimal_threshold.json
2025-12-19 11:34:40,600 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:40,600 - INFO - ================================================================================
2025-12-19 11:34:40,600 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:40,600 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-19 11:34:40,600 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:40,600 - INFO - 将来窓: 21～24ヶ月
2025-12-19 11:34:40,600 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-19 11:34:40,600 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:40,600 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:40,600 - INFO - ================================================================================
2025-12-19 11:34:40,600 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-19 11:34:40,600 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-19 11:34:40,600 - INFO - 履歴期間内のレビュアー数: 73
2025-12-19 11:34:40,653 - INFO - ================================================================================
2025-12-19 11:34:40,653 - INFO - 評価用軌跡抽出完了: 38サンプル
2025-12-19 11:34:40,653 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:40,653 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 35
2025-12-19 11:34:40,653 - INFO -   正例（この期間で承諾あり）: 29 (76.3%)
2025-12-19 11:34:40,653 - INFO -   負例（この期間で承諾なし）: 9 (23.7%)
2025-12-19 11:34:40,653 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-19 11:34:40,653 - INFO - ================================================================================
2025-12-19 11:34:40,654 - INFO - 予測を実行...
2025-12-19 11:34:40,675 - INFO - ================================================================================
2025-12-19 11:34:40,675 - INFO - 評価結果 (6-9m → 6-9m):
2025-12-19 11:34:40,675 - INFO -   AUC-ROC: 0.5709
2025-12-19 11:34:40,675 - INFO -   AUC-PR: 0.8550
2025-12-19 11:34:40,675 - INFO -   Precision: 0.7632
2025-12-19 11:34:40,675 - INFO -   Recall: 1.0000
2025-12-19 11:34:40,675 - INFO -   F1 Score: 0.8657
2025-12-19 11:34:40,675 - INFO - ================================================================================
2025-12-19 11:34:40,676 - INFO - 結果を保存: outputs/qt_50projects_irl/train_6-9m/eval_6-9m
2025-12-19 11:34:40,677 - INFO - 
【9/10】パターン実行中...
2025-12-19 11:34:40,677 - INFO - ================================================================================
2025-12-19 11:34:40,677 - INFO - パターン: 6-9m → 9-12m
2025-12-19 11:34:40,677 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-19 11:34:40,677 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:40,677 - INFO - ================================================================================
2025-12-19 11:34:40,677 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:40,693 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:40,694 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:40,694 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:40,694 - INFO - 将来窓設定: 0～27ヶ月
2025-12-19 11:34:40,694 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:40,694 - INFO - ================================================================================
2025-12-19 11:34:40,694 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:40,694 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-19 11:34:40,694 - INFO - 将来窓: 0～27ヶ月
2025-12-19 11:34:40,694 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:40,694 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:40,694 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:40,694 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:40,694 - INFO - ================================================================================
2025-12-19 11:34:40,694 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-19 11:34:40,694 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:40,695 - INFO - 特徴量計算期間内のレビュアー数: 73
2025-12-19 11:34:40,856 - INFO - ================================================================================
2025-12-19 11:34:40,856 - INFO - 軌跡抽出完了: 68サンプル（レビュアー）
2025-12-19 11:34:40,856 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:40,856 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 5
2025-12-19 11:34:40,856 - INFO -   正例（この期間で承諾あり）: 58 (85.3%)
2025-12-19 11:34:40,856 - INFO -   負例（この期間で承諾なし）: 10 (14.7%)
2025-12-19 11:34:40,856 - INFO -     - 依頼あり→拒否（重み=1.0）: 10
2025-12-19 11:34:40,856 - INFO -   総ステップ数: 136
2025-12-19 11:34:40,856 - INFO -   継続ステップ率: 44.1% (60/136)
2025-12-19 11:34:40,856 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:40,857 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:40,857 - INFO - 訓練データ正例率: 85.3% (58/68)
2025-12-19 11:34:40,857 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:40,857 - INFO - 正例率 85.3% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:40,857 - INFO - IRLモデルを訓練...
2025-12-19 11:34:40,857 - INFO - ============================================================
2025-12-19 11:34:40,857 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:40,857 - INFO - 軌跡数: 68
2025-12-19 11:34:40,857 - INFO - エポック数: 20
2025-12-19 11:34:40,857 - INFO - ============================================================
2025-12-19 11:34:40,974 - INFO - エポック 0: 平均損失 = 1.1626
2025-12-19 11:34:42,336 - INFO - エポック 10: 平均損失 = 1.1320
2025-12-19 11:34:43,438 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:43,438 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:43,468 - INFO - 最適閾値: 0.1348
2025-12-19 11:34:43,468 - INFO - 訓練データ性能: Precision=0.853, Recall=1.000, F1=0.921
2025-12-19 11:34:43,469 - INFO - モデルを保存: outputs/qt_50projects_irl/train_6-9m/irl_model.pt
2025-12-19 11:34:43,470 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_6-9m/optimal_threshold.json
2025-12-19 11:34:43,470 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:43,470 - INFO - ================================================================================
2025-12-19 11:34:43,470 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:43,470 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-19 11:34:43,470 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:43,470 - INFO - 将来窓: 24～27ヶ月
2025-12-19 11:34:43,470 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-19 11:34:43,470 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:43,470 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:43,470 - INFO - ================================================================================
2025-12-19 11:34:43,470 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-19 11:34:43,470 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:43,471 - INFO - 履歴期間内のレビュアー数: 73
2025-12-19 11:34:43,525 - INFO - ================================================================================
2025-12-19 11:34:43,525 - INFO - 評価用軌跡抽出完了: 39サンプル
2025-12-19 11:34:43,525 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:43,525 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 34
2025-12-19 11:34:43,525 - INFO -   正例（この期間で承諾あり）: 31 (79.5%)
2025-12-19 11:34:43,525 - INFO -   負例（この期間で承諾なし）: 8 (20.5%)
2025-12-19 11:34:43,525 - INFO -     - 依頼あり→拒否（重み=1.0）: 8
2025-12-19 11:34:43,525 - INFO - ================================================================================
2025-12-19 11:34:43,526 - INFO - 予測を実行...
2025-12-19 11:34:43,548 - INFO - ================================================================================
2025-12-19 11:34:43,548 - INFO - 評価結果 (6-9m → 9-12m):
2025-12-19 11:34:43,548 - INFO -   AUC-ROC: 0.6210
2025-12-19 11:34:43,548 - INFO -   AUC-PR: 0.8786
2025-12-19 11:34:43,548 - INFO -   Precision: 0.7949
2025-12-19 11:34:43,548 - INFO -   Recall: 1.0000
2025-12-19 11:34:43,548 - INFO -   F1 Score: 0.8857
2025-12-19 11:34:43,548 - INFO - ================================================================================
2025-12-19 11:34:43,549 - INFO - 結果を保存: outputs/qt_50projects_irl/train_6-9m/eval_9-12m
2025-12-19 11:34:43,550 - INFO - 
【10/10】パターン実行中...
2025-12-19 11:34:43,550 - INFO - ================================================================================
2025-12-19 11:34:43,550 - INFO - パターン: 9-12m → 9-12m
2025-12-19 11:34:43,550 - INFO - 訓練期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-19 11:34:43,550 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:43,550 - INFO - ================================================================================
2025-12-19 11:34:43,550 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat_clean.csv
2025-12-19 11:34:43,564 - INFO - 総レビュー依頼数: 3121
2025-12-19 11:34:43,564 - INFO - 承諾数: 1366 (43.8%)
2025-12-19 11:34:43,564 - INFO - 拒否数: 1755 (56.2%)
2025-12-19 11:34:43,564 - INFO - 将来窓設定: 0～24ヶ月
2025-12-19 11:34:43,564 - INFO - 訓練用軌跡を抽出...
2025-12-19 11:34:43,564 - INFO - ================================================================================
2025-12-19 11:34:43,564 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-19 11:34:43,564 - INFO - 訓練期間全体: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-19 11:34:43,564 - INFO - 将来窓: 0～24ヶ月
2025-12-19 11:34:43,564 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-19 11:34:43,564 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:43,564 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-19 11:34:43,564 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-19 11:34:43,564 - INFO - ================================================================================
2025-12-19 11:34:43,565 - INFO - 特徴量計算期間（訓練全体）: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-19 11:34:43,565 - INFO - 全体ラベル期間（train_end時点から）: 2022-01-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:43,566 - INFO - 特徴量計算期間内のレビュアー数: 84
2025-12-19 11:34:43,743 - INFO - ================================================================================
2025-12-19 11:34:43,743 - INFO - 軌跡抽出完了: 71サンプル（レビュアー）
2025-12-19 11:34:43,743 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:43,743 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 13
2025-12-19 11:34:43,743 - INFO -   正例（この期間で承諾あり）: 62 (87.3%)
2025-12-19 11:34:43,743 - INFO -   負例（この期間で承諾なし）: 9 (12.7%)
2025-12-19 11:34:43,743 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-19 11:34:43,743 - INFO -   総ステップ数: 142
2025-12-19 11:34:43,743 - INFO -   継続ステップ率: 41.5% (59/142)
2025-12-19 11:34:43,743 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-19 11:34:43,744 - INFO - 継続予測IRLシステムを初期化しました
2025-12-19 11:34:43,744 - INFO - 訓練データ正例率: 87.3% (62/71)
2025-12-19 11:34:43,744 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-19 11:34:43,744 - INFO - 正例率 87.3% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-19 11:34:43,744 - INFO - IRLモデルを訓練...
2025-12-19 11:34:43,744 - INFO - ============================================================
2025-12-19 11:34:43,744 - INFO - 時系列IRL訓練開始
2025-12-19 11:34:43,744 - INFO - 軌跡数: 71
2025-12-19 11:34:43,744 - INFO - エポック数: 20
2025-12-19 11:34:43,744 - INFO - ============================================================
2025-12-19 11:34:43,872 - INFO - エポック 0: 平均損失 = 1.2031
2025-12-19 11:34:45,176 - INFO - エポック 10: 平均損失 = 1.0841
2025-12-19 11:34:46,391 - INFO - 時系列IRL訓練完了
2025-12-19 11:34:46,391 - INFO - 訓練データ上で最適閾値を決定...
2025-12-19 11:34:46,422 - INFO - 最適閾値: 0.0653
2025-12-19 11:34:46,422 - INFO - 訓練データ性能: Precision=0.873, Recall=1.000, F1=0.932
2025-12-19 11:34:46,424 - INFO - モデルを保存: outputs/qt_50projects_irl/train_9-12m/irl_model.pt
2025-12-19 11:34:46,425 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_9-12m/optimal_threshold.json
2025-12-19 11:34:46,425 - INFO - 評価用軌跡を抽出...
2025-12-19 11:34:46,425 - INFO - ================================================================================
2025-12-19 11:34:46,425 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-19 11:34:46,425 - INFO - Cutoff日: 2022-01-01 00:00:00
2025-12-19 11:34:46,425 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-19 11:34:46,425 - INFO - 将来窓: 21～24ヶ月
2025-12-19 11:34:46,425 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-19 11:34:46,425 - INFO - プロジェクト: 全プロジェクト
2025-12-19 11:34:46,425 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-19 11:34:46,425 - INFO - ================================================================================
2025-12-19 11:34:46,425 - INFO - 履歴期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-19 11:34:46,425 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-19 11:34:46,426 - INFO - 履歴期間内のレビュアー数: 84
2025-12-19 11:34:46,488 - INFO - ================================================================================
2025-12-19 11:34:46,488 - INFO - 評価用軌跡抽出完了: 42サンプル
2025-12-19 11:34:46,488 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-19 11:34:46,488 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 42
2025-12-19 11:34:46,488 - INFO -   正例（この期間で承諾あり）: 29 (69.0%)
2025-12-19 11:34:46,488 - INFO -   負例（この期間で承諾なし）: 13 (31.0%)
2025-12-19 11:34:46,488 - INFO -     - 依頼あり→拒否（重み=1.0）: 13
2025-12-19 11:34:46,488 - INFO - ================================================================================
2025-12-19 11:34:46,488 - INFO - 予測を実行...
2025-12-19 11:34:46,513 - INFO - ================================================================================
2025-12-19 11:34:46,513 - INFO - 評価結果 (9-12m → 9-12m):
2025-12-19 11:34:46,513 - INFO -   AUC-ROC: 0.2772
2025-12-19 11:34:46,513 - INFO -   AUC-PR: 0.5581
2025-12-19 11:34:46,513 - INFO -   Precision: 0.6905
2025-12-19 11:34:46,513 - INFO -   Recall: 1.0000
2025-12-19 11:34:46,513 - INFO -   F1 Score: 0.8169
2025-12-19 11:34:46,513 - INFO - ================================================================================
2025-12-19 11:34:46,514 - INFO - 結果を保存: outputs/qt_50projects_irl/train_9-12m/eval_9-12m
2025-12-19 11:34:46,514 - INFO - ================================================================================
2025-12-19 11:34:46,514 - INFO - メトリクスマトリクスを作成中...
2025-12-19 11:34:46,514 - INFO - ================================================================================
2025-12-19 11:34:46,519 - INFO - 保存: outputs/qt_50projects_irl/matrix_AUC_ROC.csv
2025-12-19 11:34:46,522 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.553419  0.622222  0.453333  0.574713
3-6m        NaN  0.321023  0.372727  0.453846
6-9m        NaN       NaN  0.570881  0.620968
9-12m       NaN       NaN       NaN  0.277188
2025-12-19 11:34:46,522 - INFO - 保存: outputs/qt_50projects_irl/matrix_AUC_PR.csv
2025-12-19 11:34:46,523 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.667697  0.654476  0.710064  0.819276
3-6m        NaN  0.495922  0.669717  0.712950
6-9m        NaN       NaN  0.855047  0.878626
9-12m       NaN       NaN       NaN  0.558060
2025-12-19 11:34:46,524 - INFO - 保存: outputs/qt_50projects_irl/matrix_PRECISION.csv
2025-12-19 11:34:46,525 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.590909  0.583333  0.735294  0.763158
3-6m        NaN  0.578947  0.731707  0.697674
6-9m        NaN       NaN  0.763158  0.794872
9-12m       NaN       NaN       NaN  0.690476
2025-12-19 11:34:46,525 - INFO - 保存: outputs/qt_50projects_irl/matrix_RECALL.csv
2025-12-19 11:34:46,527 - INFO - 
       0-3m  3-6m  6-9m  9-12m
0-3m    1.0   1.0   1.0    1.0
3-6m    NaN   1.0   1.0    1.0
6-9m    NaN   NaN   1.0    1.0
9-12m   NaN   NaN   NaN    1.0
2025-12-19 11:34:46,527 - INFO - 保存: outputs/qt_50projects_irl/matrix_f1_score.csv
2025-12-19 11:34:46,528 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.742857  0.736842  0.847458  0.865672
3-6m        NaN  0.733333  0.845070  0.821918
6-9m        NaN       NaN  0.865672  0.885714
9-12m       NaN       NaN       NaN  0.816901
2025-12-19 11:34:46,528 - INFO - ================================================================================
2025-12-19 11:34:46,528 - INFO - マトリクス作成完了
2025-12-19 11:34:46,528 - INFO - ================================================================================
2025-12-19 11:34:46,528 - INFO - ================================================================================
2025-12-19 11:34:46,528 - INFO - 全パターンの訓練・評価が完了しました
2025-12-19 11:34:46,528 - INFO - 結果: outputs/qt_50projects_irl
2025-12-19 11:34:46,528 - INFO - ================================================================================
