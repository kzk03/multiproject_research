==============================================
50プロジェクト IRL学習パイプライン
==============================================

入力データ: data/openstack_50proj_2021_2024.csv
出力先: outputs/50projects_irl

==============================================
Phase 1: マルチプロジェクト特徴量追加
==============================================
既存の特徴量データが見つかりました: data/openstack_50proj_2021_2024_feat.csv
スキップしますか？ (y/n)
特徴量追加完了: data/openstack_50proj_2021_2024_feat.csv

特徴量次元数: 67次元
レビュー数: 119,010件
期間: 2012-06-20T07:20:24 ～ 2023-12-29T03:19:07

==============================================
Phase 2: IRL学習（Cross-Temporal）
==============================================
訓練: 2021年
評価: 2023年

--- [1/3] No Oversampling ---
2025-12-14 13:05:49,552 - INFO - 訓練期間ベース: 2021-01-01 00:00:00
2025-12-14 13:05:49,552 - INFO - 評価期間ベース: 2023-01-01 00:00:00
2025-12-14 13:05:49,553 - INFO - 生成されたパターン数: 10
2025-12-14 13:05:49,553 - INFO -   0-3m → 0-3m
2025-12-14 13:05:49,553 - INFO -   0-3m → 3-6m
2025-12-14 13:05:49,553 - INFO -   0-3m → 6-9m
2025-12-14 13:05:49,553 - INFO -   0-3m → 9-12m
2025-12-14 13:05:49,553 - INFO -   3-6m → 3-6m
2025-12-14 13:05:49,553 - INFO -   3-6m → 6-9m
2025-12-14 13:05:49,553 - INFO -   3-6m → 9-12m
2025-12-14 13:05:49,553 - INFO -   6-9m → 6-9m
2025-12-14 13:05:49,553 - INFO -   6-9m → 9-12m
2025-12-14 13:05:49,553 - INFO -   9-12m → 9-12m
2025-12-14 13:05:49,553 - INFO - ================================================================================
2025-12-14 13:05:49,553 - INFO - 全10パターンの訓練・評価を開始
2025-12-14 13:05:49,553 - INFO - ================================================================================
2025-12-14 13:05:49,553 - INFO - 
【1/10】パターン実行中...
2025-12-14 13:05:49,554 - INFO - ================================================================================
2025-12-14 13:05:49,554 - INFO - パターン: 0-3m → 0-3m
2025-12-14 13:05:49,554 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:05:49,554 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:05:49,554 - INFO - ================================================================================
2025-12-14 13:05:52,861 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:05:53,239 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:05:53,240 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:05:53,240 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:05:53,241 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:05:53,241 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:05:53,241 - INFO - ================================================================================
2025-12-14 13:05:53,241 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:05:53,241 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:05:53,241 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:05:53,241 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:05:53,241 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:05:53,241 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:05:53,241 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:05:53,241 - INFO - ================================================================================
2025-12-14 13:05:53,241 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:05:53,241 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:05:53,253 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:05:57,241 - INFO - ================================================================================
2025-12-14 13:05:57,241 - INFO - 軌跡抽出完了: 401サンプル（レビュアー）
2025-12-14 13:05:57,241 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:05:57,241 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 93
2025-12-14 13:05:57,241 - INFO -   正例（この期間で承諾あり）: 352 (87.8%)
2025-12-14 13:05:57,241 - INFO -   負例（この期間で承諾なし）: 49 (12.2%)
2025-12-14 13:05:57,241 - INFO -     - 依頼あり→拒否（重み=1.0）: 49
2025-12-14 13:05:57,241 - INFO -   総ステップ数: 802
2025-12-14 13:05:57,241 - INFO -   継続ステップ率: 59.2% (475/802)
2025-12-14 13:05:57,241 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:05:57,706 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:05:57,706 - INFO - 訓練データ正例率: 87.8% (352/401)
2025-12-14 13:05:57,706 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:05:57,706 - INFO - 正例率 87.8% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:05:57,706 - INFO - IRLモデルを訓練...
2025-12-14 13:05:57,706 - INFO - ============================================================
2025-12-14 13:05:57,706 - INFO - 時系列IRL訓練開始
2025-12-14 13:05:57,706 - INFO - 軌跡数: 401
2025-12-14 13:05:57,706 - INFO - エポック数: 20
2025-12-14 13:05:57,706 - INFO - ============================================================
2025-12-14 13:05:58,337 - INFO - エポック 0: 平均損失 = 1.1317
2025-12-14 13:06:04,336 - INFO - エポック 10: 平均損失 = 0.8198
2025-12-14 13:06:09,825 - INFO - 時系列IRL訓練完了
2025-12-14 13:06:09,825 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:06:10,000 - INFO - 最適閾値: 0.3595
2025-12-14 13:06:10,000 - INFO - 訓練データ性能: Precision=0.878, Recall=1.000, F1=0.935
2025-12-14 13:06:10,003 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_0-3m/irl_model.pt
2025-12-14 13:06:10,003 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_0-3m/optimal_threshold.json
2025-12-14 13:06:10,003 - INFO - 評価用軌跡を抽出...
2025-12-14 13:06:10,003 - INFO - ================================================================================
2025-12-14 13:06:10,003 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:06:10,003 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:06:10,003 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:06:10,003 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:06:10,003 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:06:10,003 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:06:10,003 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:06:10,003 - INFO - ================================================================================
2025-12-14 13:06:10,003 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:10,003 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:06:10,007 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:06:10,691 - INFO - ================================================================================
2025-12-14 13:06:10,691 - INFO - 評価用軌跡抽出完了: 225サンプル
2025-12-14 13:06:10,691 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:06:10,691 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 269
2025-12-14 13:06:10,691 - INFO -   正例（この期間で承諾あり）: 186 (82.7%)
2025-12-14 13:06:10,691 - INFO -   負例（この期間で承諾なし）: 39 (17.3%)
2025-12-14 13:06:10,691 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:06:10,691 - INFO - ================================================================================
2025-12-14 13:06:10,691 - INFO - 予測を実行...
2025-12-14 13:06:10,821 - INFO - ================================================================================
2025-12-14 13:06:10,821 - INFO - 評価結果 (0-3m → 0-3m):
2025-12-14 13:06:10,821 - INFO -   AUC-ROC: 0.6849
2025-12-14 13:06:10,821 - INFO -   AUC-PR: 0.9115
2025-12-14 13:06:10,821 - INFO -   Precision: 0.8267
2025-12-14 13:06:10,821 - INFO -   Recall: 1.0000
2025-12-14 13:06:10,821 - INFO -   F1 Score: 0.9051
2025-12-14 13:06:10,821 - INFO - ================================================================================
2025-12-14 13:06:10,823 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_0-3m/eval_0-3m
2025-12-14 13:06:10,829 - INFO - 
【2/10】パターン実行中...
2025-12-14 13:06:10,829 - INFO - ================================================================================
2025-12-14 13:06:10,829 - INFO - パターン: 0-3m → 3-6m
2025-12-14 13:06:10,829 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:10,829 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:06:10,829 - INFO - ================================================================================
2025-12-14 13:06:10,829 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:06:11,234 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:06:11,235 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:06:11,235 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:06:11,235 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:06:11,235 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:06:11,235 - INFO - ================================================================================
2025-12-14 13:06:11,235 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:06:11,235 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:11,235 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:06:11,235 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:06:11,235 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:06:11,235 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:06:11,235 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:06:11,235 - INFO - ================================================================================
2025-12-14 13:06:11,235 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:11,235 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:06:11,247 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:06:15,449 - INFO - ================================================================================
2025-12-14 13:06:15,449 - INFO - 軌跡抽出完了: 402サンプル（レビュアー）
2025-12-14 13:06:15,449 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:06:15,449 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 13:06:15,449 - INFO -   正例（この期間で承諾あり）: 352 (87.6%)
2025-12-14 13:06:15,449 - INFO -   負例（この期間で承諾なし）: 50 (12.4%)
2025-12-14 13:06:15,449 - INFO -     - 依頼あり→拒否（重み=1.0）: 50
2025-12-14 13:06:15,449 - INFO -   総ステップ数: 804
2025-12-14 13:06:15,449 - INFO -   継続ステップ率: 59.1% (475/804)
2025-12-14 13:06:15,449 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:06:15,454 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:06:15,454 - INFO - 訓練データ正例率: 87.6% (352/402)
2025-12-14 13:06:15,454 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:06:15,454 - INFO - 正例率 87.6% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:06:15,454 - INFO - IRLモデルを訓練...
2025-12-14 13:06:15,454 - INFO - ============================================================
2025-12-14 13:06:15,454 - INFO - 時系列IRL訓練開始
2025-12-14 13:06:15,454 - INFO - 軌跡数: 402
2025-12-14 13:06:15,454 - INFO - エポック数: 20
2025-12-14 13:06:15,454 - INFO - ============================================================
2025-12-14 13:06:16,071 - INFO - エポック 0: 平均損失 = 1.1553
2025-12-14 13:06:22,163 - INFO - エポック 10: 平均損失 = 0.8290
2025-12-14 13:06:27,634 - INFO - 時系列IRL訓練完了
2025-12-14 13:06:27,634 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:06:27,803 - INFO - 最適閾値: 0.3687
2025-12-14 13:06:27,803 - INFO - 訓練データ性能: Precision=0.878, Recall=1.000, F1=0.935
2025-12-14 13:06:27,804 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_0-3m/irl_model.pt
2025-12-14 13:06:27,804 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_0-3m/optimal_threshold.json
2025-12-14 13:06:27,804 - INFO - 評価用軌跡を抽出...
2025-12-14 13:06:27,804 - INFO - ================================================================================
2025-12-14 13:06:27,804 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:06:27,804 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:06:27,804 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:06:27,804 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:06:27,804 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:06:27,804 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:06:27,804 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:06:27,804 - INFO - ================================================================================
2025-12-14 13:06:27,804 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:27,804 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:06:27,808 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:06:28,430 - INFO - ================================================================================
2025-12-14 13:06:28,430 - INFO - 評価用軌跡抽出完了: 195サンプル
2025-12-14 13:06:28,430 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:06:28,430 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 299
2025-12-14 13:06:28,430 - INFO -   正例（この期間で承諾あり）: 157 (80.5%)
2025-12-14 13:06:28,430 - INFO -   負例（この期間で承諾なし）: 38 (19.5%)
2025-12-14 13:06:28,430 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 13:06:28,430 - INFO - ================================================================================
2025-12-14 13:06:28,431 - INFO - 予測を実行...
2025-12-14 13:06:28,550 - INFO - ================================================================================
2025-12-14 13:06:28,550 - INFO - 評価結果 (0-3m → 3-6m):
2025-12-14 13:06:28,550 - INFO -   AUC-ROC: 0.6768
2025-12-14 13:06:28,550 - INFO -   AUC-PR: 0.8991
2025-12-14 13:06:28,550 - INFO -   Precision: 0.8051
2025-12-14 13:06:28,550 - INFO -   Recall: 1.0000
2025-12-14 13:06:28,550 - INFO -   F1 Score: 0.8920
2025-12-14 13:06:28,550 - INFO - ================================================================================
2025-12-14 13:06:28,552 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_0-3m/eval_3-6m
2025-12-14 13:06:28,558 - INFO - 
【3/10】パターン実行中...
2025-12-14 13:06:28,558 - INFO - ================================================================================
2025-12-14 13:06:28,558 - INFO - パターン: 0-3m → 6-9m
2025-12-14 13:06:28,558 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:28,558 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:06:28,558 - INFO - ================================================================================
2025-12-14 13:06:28,558 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:06:28,938 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:06:28,938 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:06:28,938 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:06:28,938 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 13:06:28,938 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:06:28,938 - INFO - ================================================================================
2025-12-14 13:06:28,938 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:06:28,938 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:28,939 - INFO - 将来窓: 0～30ヶ月
2025-12-14 13:06:28,939 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:06:28,939 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:06:28,939 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:06:28,939 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:06:28,939 - INFO - ================================================================================
2025-12-14 13:06:28,939 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:28,939 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:06:28,950 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:06:33,068 - INFO - ================================================================================
2025-12-14 13:06:33,068 - INFO - 軌跡抽出完了: 402サンプル（レビュアー）
2025-12-14 13:06:33,068 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:06:33,068 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 13:06:33,068 - INFO -   正例（この期間で承諾あり）: 354 (88.1%)
2025-12-14 13:06:33,068 - INFO -   負例（この期間で承諾なし）: 48 (11.9%)
2025-12-14 13:06:33,068 - INFO -     - 依頼あり→拒否（重み=1.0）: 48
2025-12-14 13:06:33,068 - INFO -   総ステップ数: 804
2025-12-14 13:06:33,068 - INFO -   継続ステップ率: 59.1% (475/804)
2025-12-14 13:06:33,068 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:06:33,071 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:06:33,071 - INFO - 訓練データ正例率: 88.1% (354/402)
2025-12-14 13:06:33,071 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:06:33,071 - INFO - 正例率 88.1% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:06:33,071 - INFO - IRLモデルを訓練...
2025-12-14 13:06:33,071 - INFO - ============================================================
2025-12-14 13:06:33,071 - INFO - 時系列IRL訓練開始
2025-12-14 13:06:33,071 - INFO - 軌跡数: 402
2025-12-14 13:06:33,071 - INFO - エポック数: 20
2025-12-14 13:06:33,071 - INFO - ============================================================
2025-12-14 13:06:33,689 - INFO - エポック 0: 平均損失 = 1.1749
2025-12-14 13:06:39,855 - INFO - エポック 10: 平均損失 = 0.8250
2025-12-14 13:06:45,444 - INFO - 時系列IRL訓練完了
2025-12-14 13:06:45,444 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:06:45,610 - INFO - 最適閾値: 0.3736
2025-12-14 13:06:45,610 - INFO - 訓練データ性能: Precision=0.881, Recall=1.000, F1=0.937
2025-12-14 13:06:45,611 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_0-3m/irl_model.pt
2025-12-14 13:06:45,611 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_0-3m/optimal_threshold.json
2025-12-14 13:06:45,611 - INFO - 評価用軌跡を抽出...
2025-12-14 13:06:45,611 - INFO - ================================================================================
2025-12-14 13:06:45,611 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:06:45,611 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:06:45,611 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:06:45,611 - INFO - 将来窓: 27～30ヶ月
2025-12-14 13:06:45,611 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 13:06:45,611 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:06:45,611 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:06:45,611 - INFO - ================================================================================
2025-12-14 13:06:45,611 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:45,611 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:06:45,614 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:06:46,237 - INFO - ================================================================================
2025-12-14 13:06:46,237 - INFO - 評価用軌跡抽出完了: 177サンプル
2025-12-14 13:06:46,237 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:06:46,237 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 317
2025-12-14 13:06:46,237 - INFO -   正例（この期間で承諾あり）: 160 (90.4%)
2025-12-14 13:06:46,237 - INFO -   負例（この期間で承諾なし）: 17 (9.6%)
2025-12-14 13:06:46,237 - INFO -     - 依頼あり→拒否（重み=1.0）: 17
2025-12-14 13:06:46,237 - INFO - ================================================================================
2025-12-14 13:06:46,237 - INFO - 予測を実行...
2025-12-14 13:06:46,344 - INFO - ================================================================================
2025-12-14 13:06:46,344 - INFO - 評価結果 (0-3m → 6-9m):
2025-12-14 13:06:46,344 - INFO -   AUC-ROC: 0.6724
2025-12-14 13:06:46,344 - INFO -   AUC-PR: 0.9483
2025-12-14 13:06:46,344 - INFO -   Precision: 0.9040
2025-12-14 13:06:46,344 - INFO -   Recall: 1.0000
2025-12-14 13:06:46,344 - INFO -   F1 Score: 0.9496
2025-12-14 13:06:46,344 - INFO - ================================================================================
2025-12-14 13:06:46,345 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_0-3m/eval_6-9m
2025-12-14 13:06:46,352 - INFO - 
【4/10】パターン実行中...
2025-12-14 13:06:46,353 - INFO - ================================================================================
2025-12-14 13:06:46,353 - INFO - パターン: 0-3m → 9-12m
2025-12-14 13:06:46,353 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:46,353 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:06:46,353 - INFO - ================================================================================
2025-12-14 13:06:46,353 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:06:46,735 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:06:46,736 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:06:46,736 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:06:46,736 - INFO - 将来窓設定: 0～33ヶ月
2025-12-14 13:06:46,736 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:06:46,736 - INFO - ================================================================================
2025-12-14 13:06:46,736 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:06:46,736 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:46,736 - INFO - 将来窓: 0～33ヶ月
2025-12-14 13:06:46,736 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:06:46,736 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:06:46,736 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:06:46,736 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:06:46,736 - INFO - ================================================================================
2025-12-14 13:06:46,736 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:06:46,736 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:06:46,748 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:06:50,942 - INFO - ================================================================================
2025-12-14 13:06:50,942 - INFO - 軌跡抽出完了: 404サンプル（レビュアー）
2025-12-14 13:06:50,942 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:06:50,942 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 90
2025-12-14 13:06:50,942 - INFO -   正例（この期間で承諾あり）: 357 (88.4%)
2025-12-14 13:06:50,942 - INFO -   負例（この期間で承諾なし）: 47 (11.6%)
2025-12-14 13:06:50,942 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 13:06:50,942 - INFO -   総ステップ数: 808
2025-12-14 13:06:50,942 - INFO -   継続ステップ率: 58.8% (475/808)
2025-12-14 13:06:50,942 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:06:50,946 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:06:50,946 - INFO - 訓練データ正例率: 88.4% (357/404)
2025-12-14 13:06:50,946 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:06:50,946 - INFO - 正例率 88.4% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:06:50,946 - INFO - IRLモデルを訓練...
2025-12-14 13:06:50,946 - INFO - ============================================================
2025-12-14 13:06:50,946 - INFO - 時系列IRL訓練開始
2025-12-14 13:06:50,946 - INFO - 軌跡数: 404
2025-12-14 13:06:50,946 - INFO - エポック数: 20
2025-12-14 13:06:50,946 - INFO - ============================================================
2025-12-14 13:06:51,586 - INFO - エポック 0: 平均損失 = 1.1582
2025-12-14 13:06:57,889 - INFO - エポック 10: 平均損失 = 0.8017
2025-12-14 13:07:03,580 - INFO - 時系列IRL訓練完了
2025-12-14 13:07:03,580 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:07:03,749 - INFO - 最適閾値: 0.3685
2025-12-14 13:07:03,749 - INFO - 訓練データ性能: Precision=0.884, Recall=1.000, F1=0.938
2025-12-14 13:07:03,750 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_0-3m/irl_model.pt
2025-12-14 13:07:03,750 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_0-3m/optimal_threshold.json
2025-12-14 13:07:03,750 - INFO - 評価用軌跡を抽出...
2025-12-14 13:07:03,750 - INFO - ================================================================================
2025-12-14 13:07:03,750 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:07:03,750 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:07:03,750 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:07:03,750 - INFO - 将来窓: 30～33ヶ月
2025-12-14 13:07:03,750 - INFO - 拡張ラベル期間: 30～12ヶ月
2025-12-14 13:07:03,750 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:07:03,750 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:07:03,750 - INFO - ================================================================================
2025-12-14 13:07:03,750 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:07:03,750 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:07:03,755 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:07:04,330 - INFO - ================================================================================
2025-12-14 13:07:04,330 - INFO - 評価用軌跡抽出完了: 165サンプル
2025-12-14 13:07:04,330 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:07:04,330 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 329
2025-12-14 13:07:04,330 - INFO -   正例（この期間で承諾あり）: 129 (78.2%)
2025-12-14 13:07:04,330 - INFO -   負例（この期間で承諾なし）: 36 (21.8%)
2025-12-14 13:07:04,330 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:07:04,330 - INFO - ================================================================================
2025-12-14 13:07:04,331 - INFO - 予測を実行...
2025-12-14 13:07:04,441 - INFO - ================================================================================
2025-12-14 13:07:04,441 - INFO - 評価結果 (0-3m → 9-12m):
2025-12-14 13:07:04,441 - INFO -   AUC-ROC: 0.5502
2025-12-14 13:07:04,441 - INFO -   AUC-PR: 0.8104
2025-12-14 13:07:04,441 - INFO -   Precision: 0.7818
2025-12-14 13:07:04,441 - INFO -   Recall: 1.0000
2025-12-14 13:07:04,441 - INFO -   F1 Score: 0.8776
2025-12-14 13:07:04,441 - INFO - ================================================================================
2025-12-14 13:07:04,443 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_0-3m/eval_9-12m
2025-12-14 13:07:04,451 - INFO - 
【5/10】パターン実行中...
2025-12-14 13:07:04,451 - INFO - ================================================================================
2025-12-14 13:07:04,451 - INFO - パターン: 3-6m → 3-6m
2025-12-14 13:07:04,451 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:04,451 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:07:04,451 - INFO - ================================================================================
2025-12-14 13:07:04,451 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:07:04,852 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:07:04,852 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:07:04,852 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:07:04,853 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:07:04,853 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:07:04,853 - INFO - ================================================================================
2025-12-14 13:07:04,853 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:07:04,853 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:04,853 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:07:04,853 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:07:04,853 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:07:04,853 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:07:04,853 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:07:04,853 - INFO - ================================================================================
2025-12-14 13:07:04,853 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:04,853 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:07:04,863 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:07:08,709 - INFO - ================================================================================
2025-12-14 13:07:08,710 - INFO - 軌跡抽出完了: 392サンプル（レビュアー）
2025-12-14 13:07:08,710 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:07:08,710 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:07:08,710 - INFO -   正例（この期間で承諾あり）: 345 (88.0%)
2025-12-14 13:07:08,710 - INFO -   負例（この期間で承諾なし）: 47 (12.0%)
2025-12-14 13:07:08,710 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 13:07:08,710 - INFO -   総ステップ数: 784
2025-12-14 13:07:08,710 - INFO -   継続ステップ率: 53.3% (418/784)
2025-12-14 13:07:08,710 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:07:08,713 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:07:08,713 - INFO - 訓練データ正例率: 88.0% (345/392)
2025-12-14 13:07:08,713 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:07:08,713 - INFO - 正例率 88.0% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:07:08,713 - INFO - IRLモデルを訓練...
2025-12-14 13:07:08,713 - INFO - ============================================================
2025-12-14 13:07:08,713 - INFO - 時系列IRL訓練開始
2025-12-14 13:07:08,713 - INFO - 軌跡数: 392
2025-12-14 13:07:08,713 - INFO - エポック数: 20
2025-12-14 13:07:08,713 - INFO - ============================================================
2025-12-14 13:07:09,339 - INFO - エポック 0: 平均損失 = 1.1516
2025-12-14 13:07:15,537 - INFO - エポック 10: 平均損失 = 0.7477
2025-12-14 13:07:21,079 - INFO - 時系列IRL訓練完了
2025-12-14 13:07:21,079 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:07:21,232 - INFO - 最適閾値: 0.2664
2025-12-14 13:07:21,232 - INFO - 訓練データ性能: Precision=0.880, Recall=1.000, F1=0.936
2025-12-14 13:07:21,233 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_3-6m/irl_model.pt
2025-12-14 13:07:21,233 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_3-6m/optimal_threshold.json
2025-12-14 13:07:21,233 - INFO - 評価用軌跡を抽出...
2025-12-14 13:07:21,233 - INFO - ================================================================================
2025-12-14 13:07:21,233 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:07:21,233 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:07:21,233 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:07:21,233 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:07:21,233 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:07:21,233 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:07:21,233 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:07:21,233 - INFO - ================================================================================
2025-12-14 13:07:21,233 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:21,233 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:07:21,236 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:07:21,797 - INFO - ================================================================================
2025-12-14 13:07:21,797 - INFO - 評価用軌跡抽出完了: 197サンプル
2025-12-14 13:07:21,797 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:07:21,797 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 264
2025-12-14 13:07:21,797 - INFO -   正例（この期間で承諾あり）: 160 (81.2%)
2025-12-14 13:07:21,797 - INFO -   負例（この期間で承諾なし）: 37 (18.8%)
2025-12-14 13:07:21,797 - INFO -     - 依頼あり→拒否（重み=1.0）: 37
2025-12-14 13:07:21,797 - INFO - ================================================================================
2025-12-14 13:07:21,798 - INFO - 予測を実行...
2025-12-14 13:07:21,904 - INFO - ================================================================================
2025-12-14 13:07:21,904 - INFO - 評価結果 (3-6m → 3-6m):
2025-12-14 13:07:21,904 - INFO -   AUC-ROC: 0.7258
2025-12-14 13:07:21,904 - INFO -   AUC-PR: 0.9124
2025-12-14 13:07:21,904 - INFO -   Precision: 0.8122
2025-12-14 13:07:21,904 - INFO -   Recall: 1.0000
2025-12-14 13:07:21,904 - INFO -   F1 Score: 0.8964
2025-12-14 13:07:21,904 - INFO - ================================================================================
2025-12-14 13:07:21,906 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_3-6m/eval_3-6m
2025-12-14 13:07:21,914 - INFO - 
【6/10】パターン実行中...
2025-12-14 13:07:21,914 - INFO - ================================================================================
2025-12-14 13:07:21,914 - INFO - パターン: 3-6m → 6-9m
2025-12-14 13:07:21,914 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:21,914 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:07:21,914 - INFO - ================================================================================
2025-12-14 13:07:21,914 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:07:22,322 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:07:22,322 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:07:22,322 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:07:22,322 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:07:22,322 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:07:22,322 - INFO - ================================================================================
2025-12-14 13:07:22,322 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:07:22,322 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:22,322 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:07:22,322 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:07:22,322 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:07:22,322 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:07:22,322 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:07:22,322 - INFO - ================================================================================
2025-12-14 13:07:22,322 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:22,322 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:07:22,333 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:07:26,350 - INFO - ================================================================================
2025-12-14 13:07:26,350 - INFO - 軌跡抽出完了: 392サンプル（レビュアー）
2025-12-14 13:07:26,350 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:07:26,351 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:07:26,351 - INFO -   正例（この期間で承諾あり）: 350 (89.3%)
2025-12-14 13:07:26,351 - INFO -   負例（この期間で承諾なし）: 42 (10.7%)
2025-12-14 13:07:26,351 - INFO -     - 依頼あり→拒否（重み=1.0）: 42
2025-12-14 13:07:26,351 - INFO -   総ステップ数: 784
2025-12-14 13:07:26,351 - INFO -   継続ステップ率: 53.3% (418/784)
2025-12-14 13:07:26,351 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:07:26,354 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:07:26,354 - INFO - 訓練データ正例率: 89.3% (350/392)
2025-12-14 13:07:26,355 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:07:26,355 - INFO - 正例率 89.3% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:07:26,355 - INFO - IRLモデルを訓練...
2025-12-14 13:07:26,355 - INFO - ============================================================
2025-12-14 13:07:26,355 - INFO - 時系列IRL訓練開始
2025-12-14 13:07:26,355 - INFO - 軌跡数: 392
2025-12-14 13:07:26,355 - INFO - エポック数: 20
2025-12-14 13:07:26,355 - INFO - ============================================================
2025-12-14 13:07:27,041 - INFO - エポック 0: 平均損失 = 1.1611
2025-12-14 13:07:33,944 - INFO - エポック 10: 平均損失 = 0.7468
2025-12-14 13:07:40,245 - INFO - 時系列IRL訓練完了
2025-12-14 13:07:40,245 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:07:40,398 - INFO - 最適閾値: 0.2734
2025-12-14 13:07:40,398 - INFO - 訓練データ性能: Precision=0.893, Recall=1.000, F1=0.943
2025-12-14 13:07:40,399 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_3-6m/irl_model.pt
2025-12-14 13:07:40,399 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_3-6m/optimal_threshold.json
2025-12-14 13:07:40,399 - INFO - 評価用軌跡を抽出...
2025-12-14 13:07:40,399 - INFO - ================================================================================
2025-12-14 13:07:40,399 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:07:40,399 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:07:40,399 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:07:40,399 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:07:40,399 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:07:40,399 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:07:40,399 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:07:40,399 - INFO - ================================================================================
2025-12-14 13:07:40,399 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:40,399 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:07:40,402 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:07:40,946 - INFO - ================================================================================
2025-12-14 13:07:40,946 - INFO - 評価用軌跡抽出完了: 184サンプル
2025-12-14 13:07:40,946 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:07:40,946 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 277
2025-12-14 13:07:40,946 - INFO -   正例（この期間で承諾あり）: 165 (89.7%)
2025-12-14 13:07:40,946 - INFO -   負例（この期間で承諾なし）: 19 (10.3%)
2025-12-14 13:07:40,946 - INFO -     - 依頼あり→拒否（重み=1.0）: 19
2025-12-14 13:07:40,946 - INFO - ================================================================================
2025-12-14 13:07:40,948 - INFO - 予測を実行...
2025-12-14 13:07:41,048 - INFO - ================================================================================
2025-12-14 13:07:41,048 - INFO - 評価結果 (3-6m → 6-9m):
2025-12-14 13:07:41,048 - INFO -   AUC-ROC: 0.6992
2025-12-14 13:07:41,048 - INFO -   AUC-PR: 0.9417
2025-12-14 13:07:41,048 - INFO -   Precision: 0.8967
2025-12-14 13:07:41,049 - INFO -   Recall: 1.0000
2025-12-14 13:07:41,049 - INFO -   F1 Score: 0.9456
2025-12-14 13:07:41,049 - INFO - ================================================================================
2025-12-14 13:07:41,050 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_3-6m/eval_6-9m
2025-12-14 13:07:41,057 - INFO - 
【7/10】パターン実行中...
2025-12-14 13:07:41,057 - INFO - ================================================================================
2025-12-14 13:07:41,057 - INFO - パターン: 3-6m → 9-12m
2025-12-14 13:07:41,057 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:41,057 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:07:41,057 - INFO - ================================================================================
2025-12-14 13:07:41,057 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:07:41,462 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:07:41,462 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:07:41,462 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:07:41,462 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 13:07:41,462 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:07:41,462 - INFO - ================================================================================
2025-12-14 13:07:41,462 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:07:41,462 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:41,462 - INFO - 将来窓: 0～30ヶ月
2025-12-14 13:07:41,462 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:07:41,462 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:07:41,462 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:07:41,462 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:07:41,462 - INFO - ================================================================================
2025-12-14 13:07:41,463 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:41,463 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:07:41,475 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:07:45,413 - INFO - ================================================================================
2025-12-14 13:07:45,413 - INFO - 軌跡抽出完了: 392サンプル（レビュアー）
2025-12-14 13:07:45,413 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:07:45,413 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:07:45,413 - INFO -   正例（この期間で承諾あり）: 353 (90.1%)
2025-12-14 13:07:45,413 - INFO -   負例（この期間で承諾なし）: 39 (9.9%)
2025-12-14 13:07:45,413 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:07:45,413 - INFO -   総ステップ数: 784
2025-12-14 13:07:45,413 - INFO -   継続ステップ率: 53.3% (418/784)
2025-12-14 13:07:45,413 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:07:45,418 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:07:45,418 - INFO - 訓練データ正例率: 90.1% (353/392)
2025-12-14 13:07:45,418 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:07:45,418 - INFO - 正例率 90.1% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:07:45,418 - INFO - IRLモデルを訓練...
2025-12-14 13:07:45,418 - INFO - ============================================================
2025-12-14 13:07:45,418 - INFO - 時系列IRL訓練開始
2025-12-14 13:07:45,418 - INFO - 軌跡数: 392
2025-12-14 13:07:45,418 - INFO - エポック数: 20
2025-12-14 13:07:45,418 - INFO - ============================================================
2025-12-14 13:07:46,083 - INFO - エポック 0: 平均損失 = 1.1579
2025-12-14 13:07:52,348 - INFO - エポック 10: 平均損失 = 0.7590
2025-12-14 13:07:57,990 - INFO - 時系列IRL訓練完了
2025-12-14 13:07:57,990 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:07:58,143 - INFO - 最適閾値: 0.2593
2025-12-14 13:07:58,143 - INFO - 訓練データ性能: Precision=0.901, Recall=1.000, F1=0.948
2025-12-14 13:07:58,144 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_3-6m/irl_model.pt
2025-12-14 13:07:58,144 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_3-6m/optimal_threshold.json
2025-12-14 13:07:58,144 - INFO - 評価用軌跡を抽出...
2025-12-14 13:07:58,144 - INFO - ================================================================================
2025-12-14 13:07:58,144 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:07:58,144 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:07:58,144 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:07:58,144 - INFO - 将来窓: 27～30ヶ月
2025-12-14 13:07:58,144 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 13:07:58,144 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:07:58,144 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:07:58,144 - INFO - ================================================================================
2025-12-14 13:07:58,144 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:07:58,144 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:07:58,147 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:07:58,656 - INFO - ================================================================================
2025-12-14 13:07:58,656 - INFO - 評価用軌跡抽出完了: 168サンプル
2025-12-14 13:07:58,656 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:07:58,656 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 293
2025-12-14 13:07:58,656 - INFO -   正例（この期間で承諾あり）: 132 (78.6%)
2025-12-14 13:07:58,656 - INFO -   負例（この期間で承諾なし）: 36 (21.4%)
2025-12-14 13:07:58,656 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:07:58,656 - INFO - ================================================================================
2025-12-14 13:07:58,657 - INFO - 予測を実行...
2025-12-14 13:07:58,753 - INFO - ================================================================================
2025-12-14 13:07:58,753 - INFO - 評価結果 (3-6m → 9-12m):
2025-12-14 13:07:58,753 - INFO -   AUC-ROC: 0.6090
2025-12-14 13:07:58,753 - INFO -   AUC-PR: 0.8402
2025-12-14 13:07:58,753 - INFO -   Precision: 0.7857
2025-12-14 13:07:58,753 - INFO -   Recall: 1.0000
2025-12-14 13:07:58,753 - INFO -   F1 Score: 0.8800
2025-12-14 13:07:58,753 - INFO - ================================================================================
2025-12-14 13:07:58,754 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_3-6m/eval_9-12m
2025-12-14 13:07:58,761 - INFO - 
【8/10】パターン実行中...
2025-12-14 13:07:58,762 - INFO - ================================================================================
2025-12-14 13:07:58,762 - INFO - パターン: 6-9m → 6-9m
2025-12-14 13:07:58,762 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:07:58,762 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:07:58,762 - INFO - ================================================================================
2025-12-14 13:07:58,762 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:07:59,163 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:07:59,163 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:07:59,164 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:07:59,164 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:07:59,164 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:07:59,164 - INFO - ================================================================================
2025-12-14 13:07:59,164 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:07:59,164 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:07:59,164 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:07:59,164 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:07:59,164 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:07:59,164 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:07:59,164 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:07:59,164 - INFO - ================================================================================
2025-12-14 13:07:59,164 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:07:59,164 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:07:59,175 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 13:08:02,881 - INFO - ================================================================================
2025-12-14 13:08:02,881 - INFO - 軌跡抽出完了: 359サンプル（レビュアー）
2025-12-14 13:08:02,881 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:08:02,881 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 113
2025-12-14 13:08:02,881 - INFO -   正例（この期間で承諾あり）: 321 (89.4%)
2025-12-14 13:08:02,881 - INFO -   負例（この期間で承諾なし）: 38 (10.6%)
2025-12-14 13:08:02,881 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 13:08:02,881 - INFO -   総ステップ数: 718
2025-12-14 13:08:02,881 - INFO -   継続ステップ率: 59.6% (428/718)
2025-12-14 13:08:02,881 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:08:02,884 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:08:02,885 - INFO - 訓練データ正例率: 89.4% (321/359)
2025-12-14 13:08:02,885 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:08:02,885 - INFO - 正例率 89.4% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:08:02,885 - INFO - IRLモデルを訓練...
2025-12-14 13:08:02,885 - INFO - ============================================================
2025-12-14 13:08:02,885 - INFO - 時系列IRL訓練開始
2025-12-14 13:08:02,885 - INFO - 軌跡数: 359
2025-12-14 13:08:02,885 - INFO - エポック数: 20
2025-12-14 13:08:02,885 - INFO - ============================================================
2025-12-14 13:08:03,510 - INFO - エポック 0: 平均損失 = 1.1336
2025-12-14 13:08:09,685 - INFO - エポック 10: 平均損失 = 0.7573
2025-12-14 13:08:15,323 - INFO - 時系列IRL訓練完了
2025-12-14 13:08:15,324 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:08:15,470 - INFO - 最適閾値: 0.2682
2025-12-14 13:08:15,471 - INFO - 訓練データ性能: Precision=0.894, Recall=1.000, F1=0.944
2025-12-14 13:08:15,472 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_6-9m/irl_model.pt
2025-12-14 13:08:15,472 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_6-9m/optimal_threshold.json
2025-12-14 13:08:15,472 - INFO - 評価用軌跡を抽出...
2025-12-14 13:08:15,472 - INFO - ================================================================================
2025-12-14 13:08:15,472 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:08:15,472 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 13:08:15,472 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:08:15,472 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:08:15,472 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:08:15,472 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:08:15,472 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:08:15,472 - INFO - ================================================================================
2025-12-14 13:08:15,472 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:08:15,472 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:08:15,476 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 13:08:16,087 - INFO - ================================================================================
2025-12-14 13:08:16,087 - INFO - 評価用軌跡抽出完了: 183サンプル
2025-12-14 13:08:16,087 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:08:16,087 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 289
2025-12-14 13:08:16,087 - INFO -   正例（この期間で承諾あり）: 165 (90.2%)
2025-12-14 13:08:16,087 - INFO -   負例（この期間で承諾なし）: 18 (9.8%)
2025-12-14 13:08:16,087 - INFO -     - 依頼あり→拒否（重み=1.0）: 18
2025-12-14 13:08:16,087 - INFO - ================================================================================
2025-12-14 13:08:16,088 - INFO - 予測を実行...
2025-12-14 13:08:16,188 - INFO - ================================================================================
2025-12-14 13:08:16,188 - INFO - 評価結果 (6-9m → 6-9m):
2025-12-14 13:08:16,188 - INFO -   AUC-ROC: 0.7448
2025-12-14 13:08:16,188 - INFO -   AUC-PR: 0.9486
2025-12-14 13:08:16,189 - INFO -   Precision: 0.9016
2025-12-14 13:08:16,189 - INFO -   Recall: 1.0000
2025-12-14 13:08:16,189 - INFO -   F1 Score: 0.9483
2025-12-14 13:08:16,189 - INFO - ================================================================================
2025-12-14 13:08:16,190 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_6-9m/eval_6-9m
2025-12-14 13:08:16,197 - INFO - 
【9/10】パターン実行中...
2025-12-14 13:08:16,197 - INFO - ================================================================================
2025-12-14 13:08:16,197 - INFO - パターン: 6-9m → 9-12m
2025-12-14 13:08:16,197 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:08:16,197 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:08:16,197 - INFO - ================================================================================
2025-12-14 13:08:16,197 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:08:16,603 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:08:16,604 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:08:16,604 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:08:16,604 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:08:16,604 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:08:16,604 - INFO - ================================================================================
2025-12-14 13:08:16,604 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:08:16,605 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:08:16,605 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:08:16,605 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:08:16,605 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:08:16,605 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:08:16,605 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:08:16,605 - INFO - ================================================================================
2025-12-14 13:08:16,605 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:08:16,605 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:08:16,615 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 13:08:20,271 - INFO - ================================================================================
2025-12-14 13:08:20,271 - INFO - 軌跡抽出完了: 361サンプル（レビュアー）
2025-12-14 13:08:20,271 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:08:20,271 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 111
2025-12-14 13:08:20,271 - INFO -   正例（この期間で承諾あり）: 322 (89.2%)
2025-12-14 13:08:20,271 - INFO -   負例（この期間で承諾なし）: 39 (10.8%)
2025-12-14 13:08:20,271 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:08:20,271 - INFO -   総ステップ数: 722
2025-12-14 13:08:20,271 - INFO -   継続ステップ率: 59.4% (429/722)
2025-12-14 13:08:20,271 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:08:20,274 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:08:20,274 - INFO - 訓練データ正例率: 89.2% (322/361)
2025-12-14 13:08:20,274 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:08:20,274 - INFO - 正例率 89.2% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:08:20,274 - INFO - IRLモデルを訓練...
2025-12-14 13:08:20,274 - INFO - ============================================================
2025-12-14 13:08:20,274 - INFO - 時系列IRL訓練開始
2025-12-14 13:08:20,274 - INFO - 軌跡数: 361
2025-12-14 13:08:20,274 - INFO - エポック数: 20
2025-12-14 13:08:20,274 - INFO - ============================================================
2025-12-14 13:08:20,843 - INFO - エポック 0: 平均損失 = 1.1588
2025-12-14 13:08:26,547 - INFO - エポック 10: 平均損失 = 0.7562
2025-12-14 13:08:31,643 - INFO - 時系列IRL訓練完了
2025-12-14 13:08:31,643 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:08:31,791 - INFO - 最適閾値: 0.2658
2025-12-14 13:08:31,791 - INFO - 訓練データ性能: Precision=0.892, Recall=1.000, F1=0.943
2025-12-14 13:08:31,792 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_6-9m/irl_model.pt
2025-12-14 13:08:31,792 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_6-9m/optimal_threshold.json
2025-12-14 13:08:31,792 - INFO - 評価用軌跡を抽出...
2025-12-14 13:08:31,792 - INFO - ================================================================================
2025-12-14 13:08:31,792 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:08:31,792 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 13:08:31,792 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:08:31,792 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:08:31,792 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:08:31,792 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:08:31,792 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:08:31,792 - INFO - ================================================================================
2025-12-14 13:08:31,792 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:08:31,792 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:08:31,795 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 13:08:32,305 - INFO - ================================================================================
2025-12-14 13:08:32,305 - INFO - 評価用軌跡抽出完了: 160サンプル
2025-12-14 13:08:32,306 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:08:32,306 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 312
2025-12-14 13:08:32,306 - INFO -   正例（この期間で承諾あり）: 126 (78.8%)
2025-12-14 13:08:32,306 - INFO -   負例（この期間で承諾なし）: 34 (21.2%)
2025-12-14 13:08:32,306 - INFO -     - 依頼あり→拒否（重み=1.0）: 34
2025-12-14 13:08:32,306 - INFO - ================================================================================
2025-12-14 13:08:32,307 - INFO - 予測を実行...
2025-12-14 13:08:32,402 - INFO - ================================================================================
2025-12-14 13:08:32,402 - INFO - 評価結果 (6-9m → 9-12m):
2025-12-14 13:08:32,402 - INFO -   AUC-ROC: 0.6608
2025-12-14 13:08:32,402 - INFO -   AUC-PR: 0.8649
2025-12-14 13:08:32,402 - INFO -   Precision: 0.7875
2025-12-14 13:08:32,402 - INFO -   Recall: 1.0000
2025-12-14 13:08:32,402 - INFO -   F1 Score: 0.8811
2025-12-14 13:08:32,402 - INFO - ================================================================================
2025-12-14 13:08:32,403 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_6-9m/eval_9-12m
2025-12-14 13:08:32,409 - INFO - 
【10/10】パターン実行中...
2025-12-14 13:08:32,410 - INFO - ================================================================================
2025-12-14 13:08:32,410 - INFO - パターン: 9-12m → 9-12m
2025-12-14 13:08:32,410 - INFO - 訓練期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:08:32,410 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:08:32,410 - INFO - ================================================================================
2025-12-14 13:08:32,410 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:08:32,811 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:08:32,811 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:08:32,812 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:08:32,812 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:08:32,812 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:08:32,812 - INFO - ================================================================================
2025-12-14 13:08:32,812 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:08:32,812 - INFO - 訓練期間全体: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:08:32,812 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:08:32,812 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:08:32,812 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:08:32,812 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:08:32,812 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:08:32,812 - INFO - ================================================================================
2025-12-14 13:08:32,812 - INFO - 特徴量計算期間（訓練全体）: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:08:32,812 - INFO - 全体ラベル期間（train_end時点から）: 2022-01-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:08:32,821 - INFO - 特徴量計算期間内のレビュアー数: 449
2025-12-14 13:08:36,238 - INFO - ================================================================================
2025-12-14 13:08:36,238 - INFO - 軌跡抽出完了: 349サンプル（レビュアー）
2025-12-14 13:08:36,238 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:08:36,238 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 100
2025-12-14 13:08:36,238 - INFO -   正例（この期間で承諾あり）: 313 (89.7%)
2025-12-14 13:08:36,238 - INFO -   負例（この期間で承諾なし）: 36 (10.3%)
2025-12-14 13:08:36,238 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:08:36,238 - INFO -   総ステップ数: 698
2025-12-14 13:08:36,238 - INFO -   継続ステップ率: 50.1% (350/698)
2025-12-14 13:08:36,238 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:08:36,241 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:08:36,241 - INFO - 訓練データ正例率: 89.7% (313/349)
2025-12-14 13:08:36,241 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:08:36,241 - INFO - 正例率 89.7% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:08:36,241 - INFO - IRLモデルを訓練...
2025-12-14 13:08:36,241 - INFO - ============================================================
2025-12-14 13:08:36,241 - INFO - 時系列IRL訓練開始
2025-12-14 13:08:36,241 - INFO - 軌跡数: 349
2025-12-14 13:08:36,241 - INFO - エポック数: 20
2025-12-14 13:08:36,241 - INFO - ============================================================
2025-12-14 13:08:36,821 - INFO - エポック 0: 平均損失 = 1.1629
2025-12-14 13:08:42,648 - INFO - エポック 10: 平均損失 = 0.7957
2025-12-14 13:08:47,880 - INFO - 時系列IRL訓練完了
2025-12-14 13:08:47,880 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:08:48,009 - INFO - 最適閾値: 0.2594
2025-12-14 13:08:48,009 - INFO - 訓練データ性能: Precision=0.897, Recall=1.000, F1=0.946
2025-12-14 13:08:48,011 - INFO - モデルを保存: outputs/50projects_irl/no_os/train_9-12m/irl_model.pt
2025-12-14 13:08:48,011 - INFO - 最適閾値を保存: outputs/50projects_irl/no_os/train_9-12m/optimal_threshold.json
2025-12-14 13:08:48,011 - INFO - 評価用軌跡を抽出...
2025-12-14 13:08:48,011 - INFO - ================================================================================
2025-12-14 13:08:48,011 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:08:48,011 - INFO - Cutoff日: 2022-01-01 00:00:00
2025-12-14 13:08:48,011 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:08:48,011 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:08:48,011 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:08:48,011 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:08:48,011 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:08:48,011 - INFO - ================================================================================
2025-12-14 13:08:48,011 - INFO - 履歴期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:08:48,011 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:08:48,014 - INFO - 履歴期間内のレビュアー数: 449
2025-12-14 13:08:48,463 - INFO - ================================================================================
2025-12-14 13:08:48,463 - INFO - 評価用軌跡抽出完了: 167サンプル
2025-12-14 13:08:48,463 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:08:48,463 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 282
2025-12-14 13:08:48,463 - INFO -   正例（この期間で承諾あり）: 131 (78.4%)
2025-12-14 13:08:48,463 - INFO -   負例（この期間で承諾なし）: 36 (21.6%)
2025-12-14 13:08:48,463 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:08:48,463 - INFO - ================================================================================
2025-12-14 13:08:48,464 - INFO - 予測を実行...
2025-12-14 13:08:48,549 - INFO - ================================================================================
2025-12-14 13:08:48,549 - INFO - 評価結果 (9-12m → 9-12m):
2025-12-14 13:08:48,549 - INFO -   AUC-ROC: 0.6502
2025-12-14 13:08:48,549 - INFO -   AUC-PR: 0.8652
2025-12-14 13:08:48,549 - INFO -   Precision: 0.7844
2025-12-14 13:08:48,549 - INFO -   Recall: 1.0000
2025-12-14 13:08:48,549 - INFO -   F1 Score: 0.8792
2025-12-14 13:08:48,549 - INFO - ================================================================================
2025-12-14 13:08:48,550 - INFO - 結果を保存: outputs/50projects_irl/no_os/train_9-12m/eval_9-12m
2025-12-14 13:08:48,557 - INFO - ================================================================================
2025-12-14 13:08:48,557 - INFO - メトリクスマトリクスを作成中...
2025-12-14 13:08:48,557 - INFO - ================================================================================
2025-12-14 13:08:48,561 - INFO - 保存: outputs/50projects_irl/no_os/matrix_AUC_ROC.csv
2025-12-14 13:08:48,563 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.684932  0.676752  0.672426  0.550172
3-6m        NaN  0.725760  0.699203  0.609007
6-9m        NaN       NaN  0.744781  0.660831
9-12m       NaN       NaN       NaN  0.650233
2025-12-14 13:08:48,563 - INFO - 保存: outputs/50projects_irl/no_os/matrix_AUC_PR.csv
2025-12-14 13:08:48,564 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.911453  0.899113  0.948318  0.810361
3-6m        NaN  0.912434  0.941698  0.840236
6-9m        NaN       NaN  0.948583  0.864943
9-12m       NaN       NaN       NaN  0.865179
2025-12-14 13:08:48,564 - INFO - 保存: outputs/50projects_irl/no_os/matrix_PRECISION.csv
2025-12-14 13:08:48,565 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.826667  0.805128  0.903955  0.781818
3-6m        NaN  0.812183  0.896739  0.785714
6-9m        NaN       NaN  0.901639  0.787500
9-12m       NaN       NaN       NaN  0.784431
2025-12-14 13:08:48,565 - INFO - 保存: outputs/50projects_irl/no_os/matrix_RECALL.csv
2025-12-14 13:08:48,567 - INFO - 
       0-3m  3-6m  6-9m  9-12m
0-3m    1.0   1.0   1.0    1.0
3-6m    NaN   1.0   1.0    1.0
6-9m    NaN   NaN   1.0    1.0
9-12m   NaN   NaN   NaN    1.0
2025-12-14 13:08:48,567 - INFO - 保存: outputs/50projects_irl/no_os/matrix_f1_score.csv
2025-12-14 13:08:48,568 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.905109  0.892045  0.949555  0.877551
3-6m        NaN  0.896359  0.945559  0.880000
6-9m        NaN       NaN  0.948276  0.881119
9-12m       NaN       NaN       NaN  0.879195
2025-12-14 13:08:48,568 - INFO - ================================================================================
2025-12-14 13:08:48,568 - INFO - マトリクス作成完了
2025-12-14 13:08:48,568 - INFO - ================================================================================
2025-12-14 13:08:48,568 - INFO - ================================================================================
2025-12-14 13:08:48,568 - INFO - 全パターンの訓練・評価が完了しました
2025-12-14 13:08:48,568 - INFO - 結果: outputs/50projects_irl/no_os
2025-12-14 13:08:48,568 - INFO - ================================================================================

--- [2/3] 2x Oversampling ---
2025-12-14 13:08:49,083 - INFO - 訓練期間ベース: 2021-01-01 00:00:00
2025-12-14 13:08:49,083 - INFO - 評価期間ベース: 2023-01-01 00:00:00
2025-12-14 13:08:49,083 - INFO - 生成されたパターン数: 10
2025-12-14 13:08:49,083 - INFO -   0-3m → 0-3m
2025-12-14 13:08:49,083 - INFO -   0-3m → 3-6m
2025-12-14 13:08:49,083 - INFO -   0-3m → 6-9m
2025-12-14 13:08:49,083 - INFO -   0-3m → 9-12m
2025-12-14 13:08:49,083 - INFO -   3-6m → 3-6m
2025-12-14 13:08:49,083 - INFO -   3-6m → 6-9m
2025-12-14 13:08:49,083 - INFO -   3-6m → 9-12m
2025-12-14 13:08:49,083 - INFO -   6-9m → 6-9m
2025-12-14 13:08:49,083 - INFO -   6-9m → 9-12m
2025-12-14 13:08:49,083 - INFO -   9-12m → 9-12m
2025-12-14 13:08:49,083 - INFO - ================================================================================
2025-12-14 13:08:49,083 - INFO - 全10パターンの訓練・評価を開始
2025-12-14 13:08:49,083 - INFO - ================================================================================
2025-12-14 13:08:49,083 - INFO - 
【1/10】パターン実行中...
2025-12-14 13:08:49,083 - INFO - ================================================================================
2025-12-14 13:08:49,083 - INFO - パターン: 0-3m → 0-3m
2025-12-14 13:08:49,083 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:08:49,083 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:08:49,083 - INFO - ================================================================================
2025-12-14 13:08:50,025 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:08:50,421 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:08:50,421 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:08:50,421 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:08:50,421 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:08:50,421 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:08:50,421 - INFO - ================================================================================
2025-12-14 13:08:50,421 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:08:50,421 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:08:50,421 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:08:50,421 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:08:50,421 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:08:50,422 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:08:50,422 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:08:50,422 - INFO - ================================================================================
2025-12-14 13:08:50,422 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:08:50,422 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:08:50,432 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:08:54,470 - INFO - 負例をオーバーサンプリング: 元49件 -> 98件
2025-12-14 13:08:54,470 - INFO - ================================================================================
2025-12-14 13:08:54,470 - INFO - 軌跡抽出完了: 450サンプル（レビュアー）
2025-12-14 13:08:54,470 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:08:54,471 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 93
2025-12-14 13:08:54,471 - INFO -   正例（この期間で承諾あり）: 352 (78.2%)
2025-12-14 13:08:54,471 - INFO -   負例（この期間で承諾なし）: 49 (10.9%)
2025-12-14 13:08:54,471 - INFO -     - 依頼あり→拒否（重み=1.0）: 49
2025-12-14 13:08:54,471 - INFO -   総ステップ数: 900
2025-12-14 13:08:54,471 - INFO -   継続ステップ率: 54.9% (494/900)
2025-12-14 13:08:54,471 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:08:54,860 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:08:54,860 - INFO - 訓練データ正例率: 78.2% (352/450)
2025-12-14 13:08:54,860 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:08:54,860 - INFO - 正例率 78.2% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:08:54,861 - INFO - IRLモデルを訓練...
2025-12-14 13:08:54,861 - INFO - ============================================================
2025-12-14 13:08:54,861 - INFO - 時系列IRL訓練開始
2025-12-14 13:08:54,861 - INFO - 軌跡数: 450
2025-12-14 13:08:54,861 - INFO - エポック数: 20
2025-12-14 13:08:54,861 - INFO - ============================================================
2025-12-14 13:08:55,587 - INFO - エポック 0: 平均損失 = 1.1330
2025-12-14 13:09:02,702 - INFO - エポック 10: 平均損失 = 0.8195
2025-12-14 13:09:09,068 - INFO - 時系列IRL訓練完了
2025-12-14 13:09:09,068 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:09:09,250 - INFO - 最適閾値: 0.3027
2025-12-14 13:09:09,250 - INFO - 訓練データ性能: Precision=0.785, Recall=0.997, F1=0.879
2025-12-14 13:09:09,254 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_0-3m/irl_model.pt
2025-12-14 13:09:09,254 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_0-3m/optimal_threshold.json
2025-12-14 13:09:09,254 - INFO - 評価用軌跡を抽出...
2025-12-14 13:09:09,254 - INFO - ================================================================================
2025-12-14 13:09:09,254 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:09:09,254 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:09:09,254 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:09:09,254 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:09:09,254 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:09:09,254 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:09:09,254 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:09:09,254 - INFO - ================================================================================
2025-12-14 13:09:09,254 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:09,254 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:09:09,258 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:09:09,941 - INFO - ================================================================================
2025-12-14 13:09:09,941 - INFO - 評価用軌跡抽出完了: 225サンプル
2025-12-14 13:09:09,941 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:09:09,941 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 269
2025-12-14 13:09:09,941 - INFO -   正例（この期間で承諾あり）: 186 (82.7%)
2025-12-14 13:09:09,941 - INFO -   負例（この期間で承諾なし）: 39 (17.3%)
2025-12-14 13:09:09,941 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:09:09,941 - INFO - ================================================================================
2025-12-14 13:09:09,942 - INFO - 予測を実行...
2025-12-14 13:09:10,070 - INFO - ================================================================================
2025-12-14 13:09:10,070 - INFO - 評価結果 (0-3m → 0-3m):
2025-12-14 13:09:10,070 - INFO -   AUC-ROC: 0.6871
2025-12-14 13:09:10,071 - INFO -   AUC-PR: 0.9123
2025-12-14 13:09:10,071 - INFO -   Precision: 0.8296
2025-12-14 13:09:10,071 - INFO -   Recall: 0.9946
2025-12-14 13:09:10,071 - INFO -   F1 Score: 0.9046
2025-12-14 13:09:10,071 - INFO - ================================================================================
2025-12-14 13:09:10,073 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_0-3m/eval_0-3m
2025-12-14 13:09:10,080 - INFO - 
【2/10】パターン実行中...
2025-12-14 13:09:10,080 - INFO - ================================================================================
2025-12-14 13:09:10,080 - INFO - パターン: 0-3m → 3-6m
2025-12-14 13:09:10,080 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:10,080 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:09:10,080 - INFO - ================================================================================
2025-12-14 13:09:10,080 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:09:10,467 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:09:10,467 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:09:10,468 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:09:10,468 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:09:10,468 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:09:10,468 - INFO - ================================================================================
2025-12-14 13:09:10,468 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:09:10,468 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:10,468 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:09:10,468 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:09:10,468 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:09:10,468 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:09:10,468 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:09:10,468 - INFO - ================================================================================
2025-12-14 13:09:10,468 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:10,468 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:09:10,479 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:09:14,586 - INFO - 負例をオーバーサンプリング: 元50件 -> 100件
2025-12-14 13:09:14,586 - INFO - ================================================================================
2025-12-14 13:09:14,586 - INFO - 軌跡抽出完了: 452サンプル（レビュアー）
2025-12-14 13:09:14,586 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:09:14,586 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 13:09:14,586 - INFO -   正例（この期間で承諾あり）: 352 (77.9%)
2025-12-14 13:09:14,586 - INFO -   負例（この期間で承諾なし）: 50 (11.1%)
2025-12-14 13:09:14,586 - INFO -     - 依頼あり→拒否（重み=1.0）: 50
2025-12-14 13:09:14,586 - INFO -   総ステップ数: 904
2025-12-14 13:09:14,586 - INFO -   継続ステップ率: 54.1% (489/904)
2025-12-14 13:09:14,586 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:09:14,591 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:09:14,591 - INFO - 訓練データ正例率: 77.9% (352/452)
2025-12-14 13:09:14,591 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:09:14,591 - INFO - 正例率 77.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:09:14,591 - INFO - IRLモデルを訓練...
2025-12-14 13:09:14,591 - INFO - ============================================================
2025-12-14 13:09:14,591 - INFO - 時系列IRL訓練開始
2025-12-14 13:09:14,591 - INFO - 軌跡数: 452
2025-12-14 13:09:14,591 - INFO - エポック数: 20
2025-12-14 13:09:14,591 - INFO - ============================================================
2025-12-14 13:09:15,312 - INFO - エポック 0: 平均損失 = 1.1416
2025-12-14 13:09:22,629 - INFO - エポック 10: 平均損失 = 0.8049
2025-12-14 13:09:29,122 - INFO - 時系列IRL訓練完了
2025-12-14 13:09:29,122 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:09:29,304 - INFO - 最適閾値: 0.2857
2025-12-14 13:09:29,304 - INFO - 訓練データ性能: Precision=0.779, Recall=1.000, F1=0.876
2025-12-14 13:09:29,306 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_0-3m/irl_model.pt
2025-12-14 13:09:29,306 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_0-3m/optimal_threshold.json
2025-12-14 13:09:29,306 - INFO - 評価用軌跡を抽出...
2025-12-14 13:09:29,306 - INFO - ================================================================================
2025-12-14 13:09:29,306 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:09:29,306 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:09:29,306 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:09:29,306 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:09:29,306 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:09:29,306 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:09:29,306 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:09:29,306 - INFO - ================================================================================
2025-12-14 13:09:29,306 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:29,306 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:09:29,309 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:09:29,944 - INFO - ================================================================================
2025-12-14 13:09:29,945 - INFO - 評価用軌跡抽出完了: 195サンプル
2025-12-14 13:09:29,945 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:09:29,945 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 299
2025-12-14 13:09:29,945 - INFO -   正例（この期間で承諾あり）: 157 (80.5%)
2025-12-14 13:09:29,945 - INFO -   負例（この期間で承諾なし）: 38 (19.5%)
2025-12-14 13:09:29,945 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 13:09:29,945 - INFO - ================================================================================
2025-12-14 13:09:29,946 - INFO - 予測を実行...
2025-12-14 13:09:30,066 - INFO - ================================================================================
2025-12-14 13:09:30,066 - INFO - 評価結果 (0-3m → 3-6m):
2025-12-14 13:09:30,066 - INFO -   AUC-ROC: 0.6729
2025-12-14 13:09:30,066 - INFO -   AUC-PR: 0.8939
2025-12-14 13:09:30,066 - INFO -   Precision: 0.8051
2025-12-14 13:09:30,066 - INFO -   Recall: 1.0000
2025-12-14 13:09:30,066 - INFO -   F1 Score: 0.8920
2025-12-14 13:09:30,066 - INFO - ================================================================================
2025-12-14 13:09:30,068 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_0-3m/eval_3-6m
2025-12-14 13:09:30,075 - INFO - 
【3/10】パターン実行中...
2025-12-14 13:09:30,075 - INFO - ================================================================================
2025-12-14 13:09:30,075 - INFO - パターン: 0-3m → 6-9m
2025-12-14 13:09:30,076 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:30,076 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:09:30,076 - INFO - ================================================================================
2025-12-14 13:09:30,076 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:09:30,464 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:09:30,464 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:09:30,465 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:09:30,465 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 13:09:30,465 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:09:30,465 - INFO - ================================================================================
2025-12-14 13:09:30,465 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:09:30,465 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:30,465 - INFO - 将来窓: 0～30ヶ月
2025-12-14 13:09:30,465 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:09:30,465 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:09:30,465 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:09:30,465 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:09:30,465 - INFO - ================================================================================
2025-12-14 13:09:30,465 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:30,465 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:09:30,477 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:09:34,667 - INFO - 負例をオーバーサンプリング: 元48件 -> 96件
2025-12-14 13:09:34,667 - INFO - ================================================================================
2025-12-14 13:09:34,667 - INFO - 軌跡抽出完了: 450サンプル（レビュアー）
2025-12-14 13:09:34,667 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:09:34,667 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 13:09:34,667 - INFO -   正例（この期間で承諾あり）: 354 (78.7%)
2025-12-14 13:09:34,667 - INFO -   負例（この期間で承諾なし）: 48 (10.7%)
2025-12-14 13:09:34,667 - INFO -     - 依頼あり→拒否（重み=1.0）: 48
2025-12-14 13:09:34,667 - INFO -   総ステップ数: 900
2025-12-14 13:09:34,667 - INFO -   継続ステップ率: 54.3% (489/900)
2025-12-14 13:09:34,667 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:09:34,671 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:09:34,671 - INFO - 訓練データ正例率: 78.7% (354/450)
2025-12-14 13:09:34,671 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:09:34,671 - INFO - 正例率 78.7% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:09:34,671 - INFO - IRLモデルを訓練...
2025-12-14 13:09:34,671 - INFO - ============================================================
2025-12-14 13:09:34,671 - INFO - 時系列IRL訓練開始
2025-12-14 13:09:34,671 - INFO - 軌跡数: 450
2025-12-14 13:09:34,671 - INFO - エポック数: 20
2025-12-14 13:09:34,671 - INFO - ============================================================
2025-12-14 13:09:35,423 - INFO - エポック 0: 平均損失 = 1.1465
2025-12-14 13:09:42,806 - INFO - エポック 10: 平均損失 = 0.8228
2025-12-14 13:09:49,444 - INFO - 時系列IRL訓練完了
2025-12-14 13:09:49,444 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:09:49,626 - INFO - 最適閾値: 0.3162
2025-12-14 13:09:49,626 - INFO - 訓練データ性能: Precision=0.787, Recall=1.000, F1=0.881
2025-12-14 13:09:49,627 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_0-3m/irl_model.pt
2025-12-14 13:09:49,627 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_0-3m/optimal_threshold.json
2025-12-14 13:09:49,627 - INFO - 評価用軌跡を抽出...
2025-12-14 13:09:49,627 - INFO - ================================================================================
2025-12-14 13:09:49,627 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:09:49,627 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:09:49,627 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:09:49,628 - INFO - 将来窓: 27～30ヶ月
2025-12-14 13:09:49,628 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 13:09:49,628 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:09:49,628 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:09:49,628 - INFO - ================================================================================
2025-12-14 13:09:49,628 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:49,628 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:09:49,631 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:09:50,235 - INFO - ================================================================================
2025-12-14 13:09:50,235 - INFO - 評価用軌跡抽出完了: 177サンプル
2025-12-14 13:09:50,235 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:09:50,235 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 317
2025-12-14 13:09:50,235 - INFO -   正例（この期間で承諾あり）: 160 (90.4%)
2025-12-14 13:09:50,235 - INFO -   負例（この期間で承諾なし）: 17 (9.6%)
2025-12-14 13:09:50,235 - INFO -     - 依頼あり→拒否（重み=1.0）: 17
2025-12-14 13:09:50,236 - INFO - ================================================================================
2025-12-14 13:09:50,236 - INFO - 予測を実行...
2025-12-14 13:09:50,343 - INFO - ================================================================================
2025-12-14 13:09:50,344 - INFO - 評価結果 (0-3m → 6-9m):
2025-12-14 13:09:50,344 - INFO -   AUC-ROC: 0.6636
2025-12-14 13:09:50,344 - INFO -   AUC-PR: 0.9452
2025-12-14 13:09:50,344 - INFO -   Precision: 0.9040
2025-12-14 13:09:50,344 - INFO -   Recall: 1.0000
2025-12-14 13:09:50,344 - INFO -   F1 Score: 0.9496
2025-12-14 13:09:50,344 - INFO - ================================================================================
2025-12-14 13:09:50,345 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_0-3m/eval_6-9m
2025-12-14 13:09:50,352 - INFO - 
【4/10】パターン実行中...
2025-12-14 13:09:50,353 - INFO - ================================================================================
2025-12-14 13:09:50,353 - INFO - パターン: 0-3m → 9-12m
2025-12-14 13:09:50,353 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:50,353 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:09:50,353 - INFO - ================================================================================
2025-12-14 13:09:50,353 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:09:50,748 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:09:50,749 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:09:50,749 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:09:50,749 - INFO - 将来窓設定: 0～33ヶ月
2025-12-14 13:09:50,749 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:09:50,749 - INFO - ================================================================================
2025-12-14 13:09:50,749 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:09:50,749 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:50,749 - INFO - 将来窓: 0～33ヶ月
2025-12-14 13:09:50,749 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:09:50,749 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:09:50,749 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:09:50,749 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:09:50,749 - INFO - ================================================================================
2025-12-14 13:09:50,749 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:09:50,749 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:09:50,761 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:09:55,170 - INFO - 負例をオーバーサンプリング: 元47件 -> 94件
2025-12-14 13:09:55,170 - INFO - ================================================================================
2025-12-14 13:09:55,170 - INFO - 軌跡抽出完了: 451サンプル（レビュアー）
2025-12-14 13:09:55,170 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:09:55,170 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 90
2025-12-14 13:09:55,170 - INFO -   正例（この期間で承諾あり）: 357 (79.2%)
2025-12-14 13:09:55,170 - INFO -   負例（この期間で承諾なし）: 47 (10.4%)
2025-12-14 13:09:55,170 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 13:09:55,170 - INFO -   総ステップ数: 902
2025-12-14 13:09:55,170 - INFO -   継続ステップ率: 54.9% (495/902)
2025-12-14 13:09:55,170 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:09:55,175 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:09:55,175 - INFO - 訓練データ正例率: 79.2% (357/451)
2025-12-14 13:09:55,175 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:09:55,175 - INFO - 正例率 79.2% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:09:55,175 - INFO - IRLモデルを訓練...
2025-12-14 13:09:55,175 - INFO - ============================================================
2025-12-14 13:09:55,175 - INFO - 時系列IRL訓練開始
2025-12-14 13:09:55,175 - INFO - 軌跡数: 451
2025-12-14 13:09:55,175 - INFO - エポック数: 20
2025-12-14 13:09:55,175 - INFO - ============================================================
2025-12-14 13:09:55,970 - INFO - エポック 0: 平均損失 = 1.1330
2025-12-14 13:10:03,922 - INFO - エポック 10: 平均損失 = 0.8347
2025-12-14 13:10:10,995 - INFO - 時系列IRL訓練完了
2025-12-14 13:10:10,995 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:10:11,176 - INFO - 最適閾値: 0.3157
2025-12-14 13:10:11,176 - INFO - 訓練データ性能: Precision=0.792, Recall=1.000, F1=0.884
2025-12-14 13:10:11,177 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_0-3m/irl_model.pt
2025-12-14 13:10:11,177 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_0-3m/optimal_threshold.json
2025-12-14 13:10:11,177 - INFO - 評価用軌跡を抽出...
2025-12-14 13:10:11,177 - INFO - ================================================================================
2025-12-14 13:10:11,177 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:10:11,177 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:10:11,177 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:10:11,177 - INFO - 将来窓: 30～33ヶ月
2025-12-14 13:10:11,177 - INFO - 拡張ラベル期間: 30～12ヶ月
2025-12-14 13:10:11,177 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:10:11,177 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:10:11,177 - INFO - ================================================================================
2025-12-14 13:10:11,177 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:10:11,177 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:10:11,181 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:10:11,759 - INFO - ================================================================================
2025-12-14 13:10:11,759 - INFO - 評価用軌跡抽出完了: 165サンプル
2025-12-14 13:10:11,759 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:10:11,759 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 329
2025-12-14 13:10:11,759 - INFO -   正例（この期間で承諾あり）: 129 (78.2%)
2025-12-14 13:10:11,759 - INFO -   負例（この期間で承諾なし）: 36 (21.8%)
2025-12-14 13:10:11,759 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:10:11,759 - INFO - ================================================================================
2025-12-14 13:10:11,761 - INFO - 予測を実行...
2025-12-14 13:10:11,869 - INFO - ================================================================================
2025-12-14 13:10:11,870 - INFO - 評価結果 (0-3m → 9-12m):
2025-12-14 13:10:11,870 - INFO -   AUC-ROC: 0.5422
2025-12-14 13:10:11,870 - INFO -   AUC-PR: 0.8151
2025-12-14 13:10:11,870 - INFO -   Precision: 0.7818
2025-12-14 13:10:11,870 - INFO -   Recall: 1.0000
2025-12-14 13:10:11,870 - INFO -   F1 Score: 0.8776
2025-12-14 13:10:11,870 - INFO - ================================================================================
2025-12-14 13:10:11,871 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_0-3m/eval_9-12m
2025-12-14 13:10:11,878 - INFO - 
【5/10】パターン実行中...
2025-12-14 13:10:11,878 - INFO - ================================================================================
2025-12-14 13:10:11,878 - INFO - パターン: 3-6m → 3-6m
2025-12-14 13:10:11,878 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:11,878 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:10:11,878 - INFO - ================================================================================
2025-12-14 13:10:11,878 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:10:12,256 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:10:12,257 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:10:12,257 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:10:12,257 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:10:12,257 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:10:12,257 - INFO - ================================================================================
2025-12-14 13:10:12,257 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:10:12,257 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:12,257 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:10:12,257 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:10:12,257 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:10:12,257 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:10:12,257 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:10:12,257 - INFO - ================================================================================
2025-12-14 13:10:12,257 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:12,257 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:10:12,266 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:10:16,108 - INFO - 負例をオーバーサンプリング: 元47件 -> 94件
2025-12-14 13:10:16,108 - INFO - ================================================================================
2025-12-14 13:10:16,108 - INFO - 軌跡抽出完了: 439サンプル（レビュアー）
2025-12-14 13:10:16,108 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:10:16,108 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:10:16,108 - INFO -   正例（この期間で承諾あり）: 345 (78.6%)
2025-12-14 13:10:16,108 - INFO -   負例（この期間で承諾なし）: 47 (10.7%)
2025-12-14 13:10:16,108 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 13:10:16,108 - INFO -   総ステップ数: 878
2025-12-14 13:10:16,109 - INFO -   継続ステップ率: 50.1% (440/878)
2025-12-14 13:10:16,109 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:10:16,112 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:10:16,112 - INFO - 訓練データ正例率: 78.6% (345/439)
2025-12-14 13:10:16,112 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:10:16,112 - INFO - 正例率 78.6% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:10:16,112 - INFO - IRLモデルを訓練...
2025-12-14 13:10:16,112 - INFO - ============================================================
2025-12-14 13:10:16,112 - INFO - 時系列IRL訓練開始
2025-12-14 13:10:16,112 - INFO - 軌跡数: 439
2025-12-14 13:10:16,112 - INFO - エポック数: 20
2025-12-14 13:10:16,112 - INFO - ============================================================
2025-12-14 13:10:16,843 - INFO - エポック 0: 平均損失 = 1.1437
2025-12-14 13:10:24,118 - INFO - エポック 10: 平均損失 = 0.7424
2025-12-14 13:10:30,615 - INFO - 時系列IRL訓練完了
2025-12-14 13:10:30,615 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:10:30,776 - INFO - 最適閾値: 0.2376
2025-12-14 13:10:30,776 - INFO - 訓練データ性能: Precision=0.794, Recall=0.994, F1=0.883
2025-12-14 13:10:30,777 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_3-6m/irl_model.pt
2025-12-14 13:10:30,778 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_3-6m/optimal_threshold.json
2025-12-14 13:10:30,778 - INFO - 評価用軌跡を抽出...
2025-12-14 13:10:30,778 - INFO - ================================================================================
2025-12-14 13:10:30,778 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:10:30,778 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:10:30,778 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:10:30,778 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:10:30,778 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:10:30,778 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:10:30,778 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:10:30,778 - INFO - ================================================================================
2025-12-14 13:10:30,778 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:30,778 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:10:30,781 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:10:31,335 - INFO - ================================================================================
2025-12-14 13:10:31,335 - INFO - 評価用軌跡抽出完了: 197サンプル
2025-12-14 13:10:31,335 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:10:31,335 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 264
2025-12-14 13:10:31,335 - INFO -   正例（この期間で承諾あり）: 160 (81.2%)
2025-12-14 13:10:31,335 - INFO -   負例（この期間で承諾なし）: 37 (18.8%)
2025-12-14 13:10:31,335 - INFO -     - 依頼あり→拒否（重み=1.0）: 37
2025-12-14 13:10:31,335 - INFO - ================================================================================
2025-12-14 13:10:31,336 - INFO - 予測を実行...
2025-12-14 13:10:31,441 - INFO - ================================================================================
2025-12-14 13:10:31,441 - INFO - 評価結果 (3-6m → 3-6m):
2025-12-14 13:10:31,441 - INFO -   AUC-ROC: 0.7229
2025-12-14 13:10:31,441 - INFO -   AUC-PR: 0.9101
2025-12-14 13:10:31,441 - INFO -   Precision: 0.8163
2025-12-14 13:10:31,441 - INFO -   Recall: 1.0000
2025-12-14 13:10:31,441 - INFO -   F1 Score: 0.8989
2025-12-14 13:10:31,441 - INFO - ================================================================================
2025-12-14 13:10:31,442 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_3-6m/eval_3-6m
2025-12-14 13:10:31,450 - INFO - 
【6/10】パターン実行中...
2025-12-14 13:10:31,450 - INFO - ================================================================================
2025-12-14 13:10:31,450 - INFO - パターン: 3-6m → 6-9m
2025-12-14 13:10:31,450 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:31,450 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:10:31,450 - INFO - ================================================================================
2025-12-14 13:10:31,450 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:10:31,844 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:10:31,844 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:10:31,844 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:10:31,844 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:10:31,844 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:10:31,844 - INFO - ================================================================================
2025-12-14 13:10:31,844 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:10:31,844 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:31,844 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:10:31,844 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:10:31,844 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:10:31,844 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:10:31,844 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:10:31,844 - INFO - ================================================================================
2025-12-14 13:10:31,844 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:31,844 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:10:31,856 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:10:35,749 - INFO - 負例をオーバーサンプリング: 元42件 -> 84件
2025-12-14 13:10:35,750 - INFO - ================================================================================
2025-12-14 13:10:35,750 - INFO - 軌跡抽出完了: 434サンプル（レビュアー）
2025-12-14 13:10:35,750 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:10:35,750 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:10:35,750 - INFO -   正例（この期間で承諾あり）: 350 (80.6%)
2025-12-14 13:10:35,750 - INFO -   負例（この期間で承諾なし）: 42 (9.7%)
2025-12-14 13:10:35,750 - INFO -     - 依頼あり→拒否（重み=1.0）: 42
2025-12-14 13:10:35,750 - INFO -   総ステップ数: 868
2025-12-14 13:10:35,750 - INFO -   継続ステップ率: 51.3% (445/868)
2025-12-14 13:10:35,750 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:10:35,754 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:10:35,754 - INFO - 訓練データ正例率: 80.6% (350/434)
2025-12-14 13:10:35,754 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:10:35,754 - INFO - 正例率 80.6% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:10:35,754 - INFO - IRLモデルを訓練...
2025-12-14 13:10:35,754 - INFO - ============================================================
2025-12-14 13:10:35,754 - INFO - 時系列IRL訓練開始
2025-12-14 13:10:35,754 - INFO - 軌跡数: 434
2025-12-14 13:10:35,754 - INFO - エポック数: 20
2025-12-14 13:10:35,754 - INFO - ============================================================
2025-12-14 13:10:36,487 - INFO - エポック 0: 平均損失 = 1.1440
2025-12-14 13:10:44,054 - INFO - エポック 10: 平均損失 = 0.7504
2025-12-14 13:10:50,987 - INFO - 時系列IRL訓練完了
2025-12-14 13:10:50,987 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:10:51,152 - INFO - 最適閾値: 0.2393
2025-12-14 13:10:51,152 - INFO - 訓練データ性能: Precision=0.806, Recall=1.000, F1=0.893
2025-12-14 13:10:51,153 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_3-6m/irl_model.pt
2025-12-14 13:10:51,153 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_3-6m/optimal_threshold.json
2025-12-14 13:10:51,153 - INFO - 評価用軌跡を抽出...
2025-12-14 13:10:51,153 - INFO - ================================================================================
2025-12-14 13:10:51,153 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:10:51,153 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:10:51,153 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:10:51,153 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:10:51,153 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:10:51,153 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:10:51,153 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:10:51,153 - INFO - ================================================================================
2025-12-14 13:10:51,153 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:51,153 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:10:51,158 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:10:51,705 - INFO - ================================================================================
2025-12-14 13:10:51,705 - INFO - 評価用軌跡抽出完了: 184サンプル
2025-12-14 13:10:51,705 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:10:51,705 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 277
2025-12-14 13:10:51,705 - INFO -   正例（この期間で承諾あり）: 165 (89.7%)
2025-12-14 13:10:51,705 - INFO -   負例（この期間で承諾なし）: 19 (10.3%)
2025-12-14 13:10:51,705 - INFO -     - 依頼あり→拒否（重み=1.0）: 19
2025-12-14 13:10:51,705 - INFO - ================================================================================
2025-12-14 13:10:51,707 - INFO - 予測を実行...
2025-12-14 13:10:51,805 - INFO - ================================================================================
2025-12-14 13:10:51,805 - INFO - 評価結果 (3-6m → 6-9m):
2025-12-14 13:10:51,805 - INFO -   AUC-ROC: 0.7059
2025-12-14 13:10:51,805 - INFO -   AUC-PR: 0.9428
2025-12-14 13:10:51,805 - INFO -   Precision: 0.8967
2025-12-14 13:10:51,805 - INFO -   Recall: 1.0000
2025-12-14 13:10:51,805 - INFO -   F1 Score: 0.9456
2025-12-14 13:10:51,805 - INFO - ================================================================================
2025-12-14 13:10:51,807 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_3-6m/eval_6-9m
2025-12-14 13:10:51,813 - INFO - 
【7/10】パターン実行中...
2025-12-14 13:10:51,813 - INFO - ================================================================================
2025-12-14 13:10:51,813 - INFO - パターン: 3-6m → 9-12m
2025-12-14 13:10:51,813 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:51,813 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:10:51,814 - INFO - ================================================================================
2025-12-14 13:10:51,814 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:10:52,242 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:10:52,242 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:10:52,243 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:10:52,243 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 13:10:52,243 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:10:52,243 - INFO - ================================================================================
2025-12-14 13:10:52,243 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:10:52,243 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:52,243 - INFO - 将来窓: 0～30ヶ月
2025-12-14 13:10:52,243 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:10:52,243 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:10:52,243 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:10:52,243 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:10:52,243 - INFO - ================================================================================
2025-12-14 13:10:52,243 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:10:52,243 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:10:52,254 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:10:56,292 - INFO - 負例をオーバーサンプリング: 元39件 -> 78件
2025-12-14 13:10:56,292 - INFO - ================================================================================
2025-12-14 13:10:56,292 - INFO - 軌跡抽出完了: 431サンプル（レビュアー）
2025-12-14 13:10:56,292 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:10:56,292 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:10:56,292 - INFO -   正例（この期間で承諾あり）: 353 (81.9%)
2025-12-14 13:10:56,293 - INFO -   負例（この期間で承諾なし）: 39 (9.0%)
2025-12-14 13:10:56,293 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:10:56,293 - INFO -   総ステップ数: 862
2025-12-14 13:10:56,293 - INFO -   継続ステップ率: 51.4% (443/862)
2025-12-14 13:10:56,293 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:10:56,297 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:10:56,297 - INFO - 訓練データ正例率: 81.9% (353/431)
2025-12-14 13:10:56,297 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:10:56,297 - INFO - 正例率 81.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:10:56,297 - INFO - IRLモデルを訓練...
2025-12-14 13:10:56,297 - INFO - ============================================================
2025-12-14 13:10:56,297 - INFO - 時系列IRL訓練開始
2025-12-14 13:10:56,297 - INFO - 軌跡数: 431
2025-12-14 13:10:56,297 - INFO - エポック数: 20
2025-12-14 13:10:56,297 - INFO - ============================================================
2025-12-14 13:10:57,072 - INFO - エポック 0: 平均損失 = 1.1494
2025-12-14 13:11:04,789 - INFO - エポック 10: 平均損失 = 0.7231
2025-12-14 13:11:11,734 - INFO - 時系列IRL訓練完了
2025-12-14 13:11:11,734 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:11:11,897 - INFO - 最適閾値: 0.2226
2025-12-14 13:11:11,897 - INFO - 訓練データ性能: Precision=0.819, Recall=1.000, F1=0.901
2025-12-14 13:11:11,898 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_3-6m/irl_model.pt
2025-12-14 13:11:11,898 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_3-6m/optimal_threshold.json
2025-12-14 13:11:11,898 - INFO - 評価用軌跡を抽出...
2025-12-14 13:11:11,898 - INFO - ================================================================================
2025-12-14 13:11:11,898 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:11:11,898 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:11:11,898 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:11:11,898 - INFO - 将来窓: 27～30ヶ月
2025-12-14 13:11:11,898 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 13:11:11,898 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:11:11,898 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:11:11,898 - INFO - ================================================================================
2025-12-14 13:11:11,898 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:11:11,898 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:11:11,901 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:11:12,406 - INFO - ================================================================================
2025-12-14 13:11:12,406 - INFO - 評価用軌跡抽出完了: 168サンプル
2025-12-14 13:11:12,406 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:11:12,406 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 293
2025-12-14 13:11:12,406 - INFO -   正例（この期間で承諾あり）: 132 (78.6%)
2025-12-14 13:11:12,406 - INFO -   負例（この期間で承諾なし）: 36 (21.4%)
2025-12-14 13:11:12,406 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:11:12,406 - INFO - ================================================================================
2025-12-14 13:11:12,407 - INFO - 予測を実行...
2025-12-14 13:11:12,506 - INFO - ================================================================================
2025-12-14 13:11:12,506 - INFO - 評価結果 (3-6m → 9-12m):
2025-12-14 13:11:12,506 - INFO -   AUC-ROC: 0.6054
2025-12-14 13:11:12,506 - INFO -   AUC-PR: 0.8388
2025-12-14 13:11:12,506 - INFO -   Precision: 0.7857
2025-12-14 13:11:12,507 - INFO -   Recall: 1.0000
2025-12-14 13:11:12,507 - INFO -   F1 Score: 0.8800
2025-12-14 13:11:12,507 - INFO - ================================================================================
2025-12-14 13:11:12,508 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_3-6m/eval_9-12m
2025-12-14 13:11:12,516 - INFO - 
【8/10】パターン実行中...
2025-12-14 13:11:12,516 - INFO - ================================================================================
2025-12-14 13:11:12,516 - INFO - パターン: 6-9m → 6-9m
2025-12-14 13:11:12,516 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:11:12,516 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:11:12,516 - INFO - ================================================================================
2025-12-14 13:11:12,516 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:11:12,913 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:11:12,913 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:11:12,913 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:11:12,913 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:11:12,913 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:11:12,913 - INFO - ================================================================================
2025-12-14 13:11:12,913 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:11:12,913 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:11:12,913 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:11:12,913 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:11:12,913 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:11:12,913 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:11:12,913 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:11:12,913 - INFO - ================================================================================
2025-12-14 13:11:12,914 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:11:12,914 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:11:12,923 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 13:11:16,689 - INFO - 負例をオーバーサンプリング: 元38件 -> 76件
2025-12-14 13:11:16,689 - INFO - ================================================================================
2025-12-14 13:11:16,689 - INFO - 軌跡抽出完了: 397サンプル（レビュアー）
2025-12-14 13:11:16,689 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:11:16,689 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 113
2025-12-14 13:11:16,689 - INFO -   正例（この期間で承諾あり）: 321 (80.9%)
2025-12-14 13:11:16,689 - INFO -   負例（この期間で承諾なし）: 38 (9.6%)
2025-12-14 13:11:16,689 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 13:11:16,689 - INFO -   総ステップ数: 794
2025-12-14 13:11:16,689 - INFO -   継続ステップ率: 56.9% (452/794)
2025-12-14 13:11:16,689 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:11:16,693 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:11:16,693 - INFO - 訓練データ正例率: 80.9% (321/397)
2025-12-14 13:11:16,693 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:11:16,693 - INFO - 正例率 80.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:11:16,693 - INFO - IRLモデルを訓練...
2025-12-14 13:11:16,693 - INFO - ============================================================
2025-12-14 13:11:16,693 - INFO - 時系列IRL訓練開始
2025-12-14 13:11:16,693 - INFO - 軌跡数: 397
2025-12-14 13:11:16,693 - INFO - エポック数: 20
2025-12-14 13:11:16,693 - INFO - ============================================================
2025-12-14 13:11:17,410 - INFO - エポック 0: 平均損失 = 1.1446
2025-12-14 13:11:24,520 - INFO - エポック 10: 平均損失 = 0.7795
2025-12-14 13:11:30,904 - INFO - 時系列IRL訓練完了
2025-12-14 13:11:30,904 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:11:31,059 - INFO - 最適閾値: 0.2794
2025-12-14 13:11:31,059 - INFO - 訓練データ性能: Precision=0.809, Recall=1.000, F1=0.894
2025-12-14 13:11:31,061 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_6-9m/irl_model.pt
2025-12-14 13:11:31,061 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_6-9m/optimal_threshold.json
2025-12-14 13:11:31,061 - INFO - 評価用軌跡を抽出...
2025-12-14 13:11:31,061 - INFO - ================================================================================
2025-12-14 13:11:31,061 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:11:31,061 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 13:11:31,061 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:11:31,061 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:11:31,061 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:11:31,061 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:11:31,061 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:11:31,061 - INFO - ================================================================================
2025-12-14 13:11:31,061 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:11:31,061 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:11:31,064 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 13:11:31,619 - INFO - ================================================================================
2025-12-14 13:11:31,619 - INFO - 評価用軌跡抽出完了: 183サンプル
2025-12-14 13:11:31,619 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:11:31,619 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 289
2025-12-14 13:11:31,619 - INFO -   正例（この期間で承諾あり）: 165 (90.2%)
2025-12-14 13:11:31,619 - INFO -   負例（この期間で承諾なし）: 18 (9.8%)
2025-12-14 13:11:31,619 - INFO -     - 依頼あり→拒否（重み=1.0）: 18
2025-12-14 13:11:31,619 - INFO - ================================================================================
2025-12-14 13:11:31,620 - INFO - 予測を実行...
2025-12-14 13:11:31,720 - INFO - ================================================================================
2025-12-14 13:11:31,720 - INFO - 評価結果 (6-9m → 6-9m):
2025-12-14 13:11:31,720 - INFO -   AUC-ROC: 0.7492
2025-12-14 13:11:31,720 - INFO -   AUC-PR: 0.9491
2025-12-14 13:11:31,720 - INFO -   Precision: 0.9016
2025-12-14 13:11:31,720 - INFO -   Recall: 1.0000
2025-12-14 13:11:31,720 - INFO -   F1 Score: 0.9483
2025-12-14 13:11:31,720 - INFO - ================================================================================
2025-12-14 13:11:31,722 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_6-9m/eval_6-9m
2025-12-14 13:11:31,730 - INFO - 
【9/10】パターン実行中...
2025-12-14 13:11:31,730 - INFO - ================================================================================
2025-12-14 13:11:31,730 - INFO - パターン: 6-9m → 9-12m
2025-12-14 13:11:31,730 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:11:31,730 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:11:31,730 - INFO - ================================================================================
2025-12-14 13:11:31,730 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:11:32,131 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:11:32,131 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:11:32,131 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:11:32,131 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:11:32,131 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:11:32,131 - INFO - ================================================================================
2025-12-14 13:11:32,131 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:11:32,131 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:11:32,131 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:11:32,131 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:11:32,131 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:11:32,131 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:11:32,131 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:11:32,131 - INFO - ================================================================================
2025-12-14 13:11:32,131 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:11:32,131 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:11:32,141 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 13:11:35,821 - INFO - 負例をオーバーサンプリング: 元39件 -> 78件
2025-12-14 13:11:35,821 - INFO - ================================================================================
2025-12-14 13:11:35,821 - INFO - 軌跡抽出完了: 400サンプル（レビュアー）
2025-12-14 13:11:35,821 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:11:35,821 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 111
2025-12-14 13:11:35,821 - INFO -   正例（この期間で承諾あり）: 322 (80.5%)
2025-12-14 13:11:35,821 - INFO -   負例（この期間で承諾なし）: 39 (9.8%)
2025-12-14 13:11:35,821 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:11:35,821 - INFO -   総ステップ数: 800
2025-12-14 13:11:35,821 - INFO -   継続ステップ率: 55.0% (440/800)
2025-12-14 13:11:35,821 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:11:35,826 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:11:35,826 - INFO - 訓練データ正例率: 80.5% (322/400)
2025-12-14 13:11:35,826 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:11:35,826 - INFO - 正例率 80.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:11:35,826 - INFO - IRLモデルを訓練...
2025-12-14 13:11:35,826 - INFO - ============================================================
2025-12-14 13:11:35,826 - INFO - 時系列IRL訓練開始
2025-12-14 13:11:35,826 - INFO - 軌跡数: 400
2025-12-14 13:11:35,826 - INFO - エポック数: 20
2025-12-14 13:11:35,826 - INFO - ============================================================
2025-12-14 13:11:36,558 - INFO - エポック 0: 平均損失 = 1.1410
2025-12-14 13:11:43,898 - INFO - エポック 10: 平均損失 = 0.7616
2025-12-14 13:11:50,480 - INFO - 時系列IRL訓練完了
2025-12-14 13:11:50,481 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:11:50,638 - INFO - 最適閾値: 0.2880
2025-12-14 13:11:50,638 - INFO - 訓練データ性能: Precision=0.812, Recall=0.991, F1=0.892
2025-12-14 13:11:50,639 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_6-9m/irl_model.pt
2025-12-14 13:11:50,639 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_6-9m/optimal_threshold.json
2025-12-14 13:11:50,639 - INFO - 評価用軌跡を抽出...
2025-12-14 13:11:50,639 - INFO - ================================================================================
2025-12-14 13:11:50,639 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:11:50,639 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 13:11:50,639 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:11:50,639 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:11:50,639 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:11:50,639 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:11:50,639 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:11:50,639 - INFO - ================================================================================
2025-12-14 13:11:50,639 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:11:50,639 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:11:50,643 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 13:11:51,151 - INFO - ================================================================================
2025-12-14 13:11:51,151 - INFO - 評価用軌跡抽出完了: 160サンプル
2025-12-14 13:11:51,151 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:11:51,151 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 312
2025-12-14 13:11:51,151 - INFO -   正例（この期間で承諾あり）: 126 (78.8%)
2025-12-14 13:11:51,151 - INFO -   負例（この期間で承諾なし）: 34 (21.2%)
2025-12-14 13:11:51,151 - INFO -     - 依頼あり→拒否（重み=1.0）: 34
2025-12-14 13:11:51,151 - INFO - ================================================================================
2025-12-14 13:11:51,152 - INFO - 予測を実行...
2025-12-14 13:11:51,247 - INFO - ================================================================================
2025-12-14 13:11:51,247 - INFO - 評価結果 (6-9m → 9-12m):
2025-12-14 13:11:51,247 - INFO -   AUC-ROC: 0.6653
2025-12-14 13:11:51,247 - INFO -   AUC-PR: 0.8642
2025-12-14 13:11:51,247 - INFO -   Precision: 0.7862
2025-12-14 13:11:51,247 - INFO -   Recall: 0.9921
2025-12-14 13:11:51,247 - INFO -   F1 Score: 0.8772
2025-12-14 13:11:51,247 - INFO - ================================================================================
2025-12-14 13:11:51,249 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_6-9m/eval_9-12m
2025-12-14 13:11:51,255 - INFO - 
【10/10】パターン実行中...
2025-12-14 13:11:51,256 - INFO - ================================================================================
2025-12-14 13:11:51,256 - INFO - パターン: 9-12m → 9-12m
2025-12-14 13:11:51,256 - INFO - 訓練期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:11:51,256 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:11:51,256 - INFO - ================================================================================
2025-12-14 13:11:51,256 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:11:51,665 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:11:51,665 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:11:51,666 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:11:51,666 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:11:51,666 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:11:51,666 - INFO - ================================================================================
2025-12-14 13:11:51,666 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:11:51,666 - INFO - 訓練期間全体: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:11:51,666 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:11:51,666 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:11:51,666 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:11:51,666 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:11:51,666 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:11:51,666 - INFO - ================================================================================
2025-12-14 13:11:51,666 - INFO - 特徴量計算期間（訓練全体）: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:11:51,666 - INFO - 全体ラベル期間（train_end時点から）: 2022-01-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:11:51,675 - INFO - 特徴量計算期間内のレビュアー数: 449
2025-12-14 13:11:55,056 - INFO - 負例をオーバーサンプリング: 元36件 -> 72件
2025-12-14 13:11:55,056 - INFO - ================================================================================
2025-12-14 13:11:55,056 - INFO - 軌跡抽出完了: 385サンプル（レビュアー）
2025-12-14 13:11:55,056 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:11:55,056 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 100
2025-12-14 13:11:55,056 - INFO -   正例（この期間で承諾あり）: 313 (81.3%)
2025-12-14 13:11:55,056 - INFO -   負例（この期間で承諾なし）: 36 (9.4%)
2025-12-14 13:11:55,057 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:11:55,057 - INFO -   総ステップ数: 770
2025-12-14 13:11:55,057 - INFO -   継続ステップ率: 46.6% (359/770)
2025-12-14 13:11:55,057 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:11:55,060 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:11:55,060 - INFO - 訓練データ正例率: 81.3% (313/385)
2025-12-14 13:11:55,060 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:11:55,060 - INFO - 正例率 81.3% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:11:55,060 - INFO - IRLモデルを訓練...
2025-12-14 13:11:55,060 - INFO - ============================================================
2025-12-14 13:11:55,060 - INFO - 時系列IRL訓練開始
2025-12-14 13:11:55,060 - INFO - 軌跡数: 385
2025-12-14 13:11:55,060 - INFO - エポック数: 20
2025-12-14 13:11:55,060 - INFO - ============================================================
2025-12-14 13:11:55,704 - INFO - エポック 0: 平均損失 = 1.1486
2025-12-14 13:12:02,061 - INFO - エポック 10: 平均損失 = 0.7779
2025-12-14 13:12:07,776 - INFO - 時系列IRL訓練完了
2025-12-14 13:12:07,776 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:12:07,914 - INFO - 最適閾値: 0.2338
2025-12-14 13:12:07,914 - INFO - 訓練データ性能: Precision=0.813, Recall=1.000, F1=0.897
2025-12-14 13:12:07,915 - INFO - モデルを保存: outputs/50projects_irl/2x_os/train_9-12m/irl_model.pt
2025-12-14 13:12:07,915 - INFO - 最適閾値を保存: outputs/50projects_irl/2x_os/train_9-12m/optimal_threshold.json
2025-12-14 13:12:07,915 - INFO - 評価用軌跡を抽出...
2025-12-14 13:12:07,915 - INFO - ================================================================================
2025-12-14 13:12:07,915 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:12:07,915 - INFO - Cutoff日: 2022-01-01 00:00:00
2025-12-14 13:12:07,915 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:12:07,915 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:12:07,915 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:12:07,915 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:12:07,915 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:12:07,915 - INFO - ================================================================================
2025-12-14 13:12:07,915 - INFO - 履歴期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:12:07,915 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:12:07,918 - INFO - 履歴期間内のレビュアー数: 449
2025-12-14 13:12:08,358 - INFO - ================================================================================
2025-12-14 13:12:08,359 - INFO - 評価用軌跡抽出完了: 167サンプル
2025-12-14 13:12:08,359 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:12:08,359 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 282
2025-12-14 13:12:08,359 - INFO -   正例（この期間で承諾あり）: 131 (78.4%)
2025-12-14 13:12:08,359 - INFO -   負例（この期間で承諾なし）: 36 (21.6%)
2025-12-14 13:12:08,359 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:12:08,359 - INFO - ================================================================================
2025-12-14 13:12:08,360 - INFO - 予測を実行...
2025-12-14 13:12:08,444 - INFO - ================================================================================
2025-12-14 13:12:08,444 - INFO - 評価結果 (9-12m → 9-12m):
2025-12-14 13:12:08,444 - INFO -   AUC-ROC: 0.6515
2025-12-14 13:12:08,444 - INFO -   AUC-PR: 0.8645
2025-12-14 13:12:08,444 - INFO -   Precision: 0.7844
2025-12-14 13:12:08,444 - INFO -   Recall: 1.0000
2025-12-14 13:12:08,444 - INFO -   F1 Score: 0.8792
2025-12-14 13:12:08,444 - INFO - ================================================================================
2025-12-14 13:12:08,445 - INFO - 結果を保存: outputs/50projects_irl/2x_os/train_9-12m/eval_9-12m
2025-12-14 13:12:08,452 - INFO - ================================================================================
2025-12-14 13:12:08,452 - INFO - メトリクスマトリクスを作成中...
2025-12-14 13:12:08,452 - INFO - ================================================================================
2025-12-14 13:12:08,456 - INFO - 保存: outputs/50projects_irl/2x_os/matrix_AUC_ROC.csv
2025-12-14 13:12:08,458 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.687138  0.672896  0.663603  0.542205
3-6m        NaN  0.722889  0.705901  0.605429
6-9m        NaN       NaN  0.749158  0.665266
9-12m       NaN       NaN       NaN  0.651506
2025-12-14 13:12:08,458 - INFO - 保存: outputs/50projects_irl/2x_os/matrix_AUC_PR.csv
2025-12-14 13:12:08,459 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.912334  0.893864  0.945200  0.815086
3-6m        NaN  0.910132  0.942826  0.838831
6-9m        NaN       NaN  0.949090  0.864237
9-12m       NaN       NaN       NaN  0.864518
2025-12-14 13:12:08,459 - INFO - 保存: outputs/50projects_irl/2x_os/matrix_PRECISION.csv
2025-12-14 13:12:08,460 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.829596  0.805128  0.903955  0.781818
3-6m        NaN  0.816327  0.896739  0.785714
6-9m        NaN       NaN  0.901639  0.786164
9-12m       NaN       NaN       NaN  0.784431
2025-12-14 13:12:08,460 - INFO - 保存: outputs/50projects_irl/2x_os/matrix_RECALL.csv
2025-12-14 13:12:08,461 - INFO - 
           0-3m  3-6m  6-9m     9-12m
0-3m   0.994624   1.0   1.0  1.000000
3-6m        NaN   1.0   1.0  1.000000
6-9m        NaN   NaN   1.0  0.992063
9-12m       NaN   NaN   NaN  1.000000
2025-12-14 13:12:08,461 - INFO - 保存: outputs/50projects_irl/2x_os/matrix_f1_score.csv
2025-12-14 13:12:08,462 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.904645  0.892045  0.949555  0.877551
3-6m        NaN  0.898876  0.945559  0.880000
6-9m        NaN       NaN  0.948276  0.877193
9-12m       NaN       NaN       NaN  0.879195
2025-12-14 13:12:08,462 - INFO - ================================================================================
2025-12-14 13:12:08,462 - INFO - マトリクス作成完了
2025-12-14 13:12:08,462 - INFO - ================================================================================
2025-12-14 13:12:08,462 - INFO - ================================================================================
2025-12-14 13:12:08,462 - INFO - 全パターンの訓練・評価が完了しました
2025-12-14 13:12:08,463 - INFO - 結果: outputs/50projects_irl/2x_os
2025-12-14 13:12:08,463 - INFO - ================================================================================

--- [3/3] 3x Oversampling ---
2025-12-14 13:12:08,953 - INFO - 訓練期間ベース: 2021-01-01 00:00:00
2025-12-14 13:12:08,953 - INFO - 評価期間ベース: 2023-01-01 00:00:00
2025-12-14 13:12:08,953 - INFO - 生成されたパターン数: 10
2025-12-14 13:12:08,953 - INFO -   0-3m → 0-3m
2025-12-14 13:12:08,953 - INFO -   0-3m → 3-6m
2025-12-14 13:12:08,953 - INFO -   0-3m → 6-9m
2025-12-14 13:12:08,953 - INFO -   0-3m → 9-12m
2025-12-14 13:12:08,953 - INFO -   3-6m → 3-6m
2025-12-14 13:12:08,953 - INFO -   3-6m → 6-9m
2025-12-14 13:12:08,953 - INFO -   3-6m → 9-12m
2025-12-14 13:12:08,953 - INFO -   6-9m → 6-9m
2025-12-14 13:12:08,953 - INFO -   6-9m → 9-12m
2025-12-14 13:12:08,953 - INFO -   9-12m → 9-12m
2025-12-14 13:12:08,953 - INFO - ================================================================================
2025-12-14 13:12:08,953 - INFO - 全10パターンの訓練・評価を開始
2025-12-14 13:12:08,953 - INFO - ================================================================================
2025-12-14 13:12:08,953 - INFO - 
【1/10】パターン実行中...
2025-12-14 13:12:08,953 - INFO - ================================================================================
2025-12-14 13:12:08,953 - INFO - パターン: 0-3m → 0-3m
2025-12-14 13:12:08,953 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:08,953 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:12:08,953 - INFO - ================================================================================
2025-12-14 13:12:09,885 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:12:10,275 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:12:10,276 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:12:10,276 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:12:10,276 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:12:10,276 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:12:10,276 - INFO - ================================================================================
2025-12-14 13:12:10,276 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:12:10,276 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:10,276 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:12:10,276 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:12:10,276 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:12:10,276 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:12:10,276 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:12:10,276 - INFO - ================================================================================
2025-12-14 13:12:10,276 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:10,276 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:12:10,287 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:12:14,257 - INFO - 負例をオーバーサンプリング: 元49件 -> 147件
2025-12-14 13:12:14,257 - INFO - ================================================================================
2025-12-14 13:12:14,257 - INFO - 軌跡抽出完了: 499サンプル（レビュアー）
2025-12-14 13:12:14,257 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:12:14,257 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 93
2025-12-14 13:12:14,257 - INFO -   正例（この期間で承諾あり）: 352 (70.5%)
2025-12-14 13:12:14,257 - INFO -   負例（この期間で承諾なし）: 49 (9.8%)
2025-12-14 13:12:14,257 - INFO -     - 依頼あり→拒否（重み=1.0）: 49
2025-12-14 13:12:14,257 - INFO -   総ステップ数: 998
2025-12-14 13:12:14,257 - INFO -   継続ステップ率: 50.7% (506/998)
2025-12-14 13:12:14,257 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:12:14,646 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:12:14,646 - INFO - 訓練データ正例率: 70.5% (352/499)
2025-12-14 13:12:14,646 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:12:14,646 - INFO - 正例率 70.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:12:14,646 - INFO - IRLモデルを訓練...
2025-12-14 13:12:14,646 - INFO - ============================================================
2025-12-14 13:12:14,646 - INFO - 時系列IRL訓練開始
2025-12-14 13:12:14,646 - INFO - 軌跡数: 499
2025-12-14 13:12:14,646 - INFO - エポック数: 20
2025-12-14 13:12:14,646 - INFO - ============================================================
2025-12-14 13:12:15,420 - INFO - エポック 0: 平均損失 = 1.1309
2025-12-14 13:12:22,976 - INFO - エポック 10: 平均損失 = 0.8201
2025-12-14 13:12:29,796 - INFO - 時系列IRL訓練完了
2025-12-14 13:12:29,797 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:12:29,988 - INFO - 最適閾値: 0.3394
2025-12-14 13:12:29,988 - INFO - 訓練データ性能: Precision=0.815, Recall=0.875, F1=0.844
2025-12-14 13:12:29,992 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_0-3m/irl_model.pt
2025-12-14 13:12:29,992 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_0-3m/optimal_threshold.json
2025-12-14 13:12:29,992 - INFO - 評価用軌跡を抽出...
2025-12-14 13:12:29,992 - INFO - ================================================================================
2025-12-14 13:12:29,992 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:12:29,992 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:12:29,992 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:12:29,992 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:12:29,992 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:12:29,992 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:12:29,992 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:12:29,992 - INFO - ================================================================================
2025-12-14 13:12:29,992 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:29,992 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-14 13:12:29,996 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:12:30,668 - INFO - ================================================================================
2025-12-14 13:12:30,668 - INFO - 評価用軌跡抽出完了: 225サンプル
2025-12-14 13:12:30,668 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:12:30,668 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 269
2025-12-14 13:12:30,668 - INFO -   正例（この期間で承諾あり）: 186 (82.7%)
2025-12-14 13:12:30,669 - INFO -   負例（この期間で承諾なし）: 39 (17.3%)
2025-12-14 13:12:30,669 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:12:30,669 - INFO - ================================================================================
2025-12-14 13:12:30,669 - INFO - 予測を実行...
2025-12-14 13:12:30,797 - INFO - ================================================================================
2025-12-14 13:12:30,797 - INFO - 評価結果 (0-3m → 0-3m):
2025-12-14 13:12:30,797 - INFO -   AUC-ROC: 0.6836
2025-12-14 13:12:30,797 - INFO -   AUC-PR: 0.9102
2025-12-14 13:12:30,797 - INFO -   Precision: 0.8488
2025-12-14 13:12:30,797 - INFO -   Recall: 0.9355
2025-12-14 13:12:30,797 - INFO -   F1 Score: 0.8900
2025-12-14 13:12:30,797 - INFO - ================================================================================
2025-12-14 13:12:30,799 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_0-3m/eval_0-3m
2025-12-14 13:12:30,806 - INFO - 
【2/10】パターン実行中...
2025-12-14 13:12:30,806 - INFO - ================================================================================
2025-12-14 13:12:30,806 - INFO - パターン: 0-3m → 3-6m
2025-12-14 13:12:30,806 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:30,806 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:12:30,806 - INFO - ================================================================================
2025-12-14 13:12:30,806 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:12:31,188 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:12:31,188 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:12:31,189 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:12:31,189 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:12:31,189 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:12:31,189 - INFO - ================================================================================
2025-12-14 13:12:31,189 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:12:31,189 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:31,189 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:12:31,189 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:12:31,189 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:12:31,189 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:12:31,189 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:12:31,189 - INFO - ================================================================================
2025-12-14 13:12:31,189 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:31,189 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:12:31,200 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:12:35,239 - INFO - 負例をオーバーサンプリング: 元50件 -> 150件
2025-12-14 13:12:35,239 - INFO - ================================================================================
2025-12-14 13:12:35,239 - INFO - 軌跡抽出完了: 502サンプル（レビュアー）
2025-12-14 13:12:35,239 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:12:35,239 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 13:12:35,239 - INFO -   正例（この期間で承諾あり）: 352 (70.1%)
2025-12-14 13:12:35,239 - INFO -   負例（この期間で承諾なし）: 50 (10.0%)
2025-12-14 13:12:35,239 - INFO -     - 依頼あり→拒否（重み=1.0）: 50
2025-12-14 13:12:35,239 - INFO -   総ステップ数: 1004
2025-12-14 13:12:35,239 - INFO -   継続ステップ率: 50.8% (510/1004)
2025-12-14 13:12:35,239 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:12:35,242 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:12:35,243 - INFO - 訓練データ正例率: 70.1% (352/502)
2025-12-14 13:12:35,243 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:12:35,243 - INFO - 正例率 70.1% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:12:35,243 - INFO - IRLモデルを訓練...
2025-12-14 13:12:35,243 - INFO - ============================================================
2025-12-14 13:12:35,243 - INFO - 時系列IRL訓練開始
2025-12-14 13:12:35,243 - INFO - 軌跡数: 502
2025-12-14 13:12:35,243 - INFO - エポック数: 20
2025-12-14 13:12:35,243 - INFO - ============================================================
2025-12-14 13:12:36,004 - INFO - エポック 0: 平均損失 = 1.1417
2025-12-14 13:12:43,609 - INFO - エポック 10: 平均損失 = 0.8115
2025-12-14 13:12:50,435 - INFO - 時系列IRL訓練完了
2025-12-14 13:12:50,435 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:12:50,627 - INFO - 最適閾値: 0.3155
2025-12-14 13:12:50,627 - INFO - 訓練データ性能: Precision=0.755, Recall=0.926, F1=0.832
2025-12-14 13:12:50,628 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_0-3m/irl_model.pt
2025-12-14 13:12:50,628 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_0-3m/optimal_threshold.json
2025-12-14 13:12:50,628 - INFO - 評価用軌跡を抽出...
2025-12-14 13:12:50,628 - INFO - ================================================================================
2025-12-14 13:12:50,629 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:12:50,629 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:12:50,629 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:12:50,629 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:12:50,629 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:12:50,629 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:12:50,629 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:12:50,629 - INFO - ================================================================================
2025-12-14 13:12:50,629 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:50,629 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:12:50,632 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:12:51,265 - INFO - ================================================================================
2025-12-14 13:12:51,266 - INFO - 評価用軌跡抽出完了: 195サンプル
2025-12-14 13:12:51,266 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:12:51,266 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 299
2025-12-14 13:12:51,266 - INFO -   正例（この期間で承諾あり）: 157 (80.5%)
2025-12-14 13:12:51,266 - INFO -   負例（この期間で承諾なし）: 38 (19.5%)
2025-12-14 13:12:51,266 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 13:12:51,266 - INFO - ================================================================================
2025-12-14 13:12:51,266 - INFO - 予測を実行...
2025-12-14 13:12:51,386 - INFO - ================================================================================
2025-12-14 13:12:51,386 - INFO - 評価結果 (0-3m → 3-6m):
2025-12-14 13:12:51,386 - INFO -   AUC-ROC: 0.6746
2025-12-14 13:12:51,386 - INFO -   AUC-PR: 0.8951
2025-12-14 13:12:51,386 - INFO -   Precision: 0.8152
2025-12-14 13:12:51,386 - INFO -   Recall: 0.9554
2025-12-14 13:12:51,386 - INFO -   F1 Score: 0.8798
2025-12-14 13:12:51,386 - INFO - ================================================================================
2025-12-14 13:12:51,387 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_0-3m/eval_3-6m
2025-12-14 13:12:51,394 - INFO - 
【3/10】パターン実行中...
2025-12-14 13:12:51,394 - INFO - ================================================================================
2025-12-14 13:12:51,394 - INFO - パターン: 0-3m → 6-9m
2025-12-14 13:12:51,394 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:51,394 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:12:51,394 - INFO - ================================================================================
2025-12-14 13:12:51,394 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:12:51,784 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:12:51,784 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:12:51,784 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:12:51,785 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 13:12:51,785 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:12:51,785 - INFO - ================================================================================
2025-12-14 13:12:51,785 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:12:51,785 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:51,785 - INFO - 将来窓: 0～30ヶ月
2025-12-14 13:12:51,785 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:12:51,785 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:12:51,785 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:12:51,785 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:12:51,785 - INFO - ================================================================================
2025-12-14 13:12:51,785 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:12:51,785 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:12:51,797 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:12:55,932 - INFO - 負例をオーバーサンプリング: 元48件 -> 144件
2025-12-14 13:12:55,932 - INFO - ================================================================================
2025-12-14 13:12:55,932 - INFO - 軌跡抽出完了: 498サンプル（レビュアー）
2025-12-14 13:12:55,932 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:12:55,932 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 92
2025-12-14 13:12:55,932 - INFO -   正例（この期間で承諾あり）: 354 (71.1%)
2025-12-14 13:12:55,932 - INFO -   負例（この期間で承諾なし）: 48 (9.6%)
2025-12-14 13:12:55,932 - INFO -     - 依頼あり→拒否（重み=1.0）: 48
2025-12-14 13:12:55,932 - INFO -   総ステップ数: 996
2025-12-14 13:12:55,932 - INFO -   継続ステップ率: 51.6% (514/996)
2025-12-14 13:12:55,932 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:12:55,936 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:12:55,936 - INFO - 訓練データ正例率: 71.1% (354/498)
2025-12-14 13:12:55,936 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:12:55,936 - INFO - 正例率 71.1% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:12:55,936 - INFO - IRLモデルを訓練...
2025-12-14 13:12:55,936 - INFO - ============================================================
2025-12-14 13:12:55,936 - INFO - 時系列IRL訓練開始
2025-12-14 13:12:55,936 - INFO - 軌跡数: 498
2025-12-14 13:12:55,936 - INFO - エポック数: 20
2025-12-14 13:12:55,936 - INFO - ============================================================
2025-12-14 13:12:56,730 - INFO - エポック 0: 平均損失 = 1.1529
2025-12-14 13:13:04,582 - INFO - エポック 10: 平均損失 = 0.8284
2025-12-14 13:13:11,647 - INFO - 時系列IRL訓練完了
2025-12-14 13:13:11,647 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:13:11,840 - INFO - 最適閾値: 0.2795
2025-12-14 13:13:11,840 - INFO - 訓練データ性能: Precision=0.711, Recall=1.000, F1=0.831
2025-12-14 13:13:11,841 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_0-3m/irl_model.pt
2025-12-14 13:13:11,841 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_0-3m/optimal_threshold.json
2025-12-14 13:13:11,841 - INFO - 評価用軌跡を抽出...
2025-12-14 13:13:11,841 - INFO - ================================================================================
2025-12-14 13:13:11,841 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:13:11,841 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:13:11,841 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:13:11,841 - INFO - 将来窓: 27～30ヶ月
2025-12-14 13:13:11,841 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 13:13:11,841 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:13:11,841 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:13:11,841 - INFO - ================================================================================
2025-12-14 13:13:11,841 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:13:11,841 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:13:11,844 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:13:12,452 - INFO - ================================================================================
2025-12-14 13:13:12,452 - INFO - 評価用軌跡抽出完了: 177サンプル
2025-12-14 13:13:12,452 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:13:12,452 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 317
2025-12-14 13:13:12,452 - INFO -   正例（この期間で承諾あり）: 160 (90.4%)
2025-12-14 13:13:12,452 - INFO -   負例（この期間で承諾なし）: 17 (9.6%)
2025-12-14 13:13:12,452 - INFO -     - 依頼あり→拒否（重み=1.0）: 17
2025-12-14 13:13:12,453 - INFO - ================================================================================
2025-12-14 13:13:12,453 - INFO - 予測を実行...
2025-12-14 13:13:12,561 - INFO - ================================================================================
2025-12-14 13:13:12,561 - INFO - 評価結果 (0-3m → 6-9m):
2025-12-14 13:13:12,561 - INFO -   AUC-ROC: 0.6710
2025-12-14 13:13:12,561 - INFO -   AUC-PR: 0.9448
2025-12-14 13:13:12,561 - INFO -   Precision: 0.9040
2025-12-14 13:13:12,561 - INFO -   Recall: 1.0000
2025-12-14 13:13:12,561 - INFO -   F1 Score: 0.9496
2025-12-14 13:13:12,561 - INFO - ================================================================================
2025-12-14 13:13:12,562 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_0-3m/eval_6-9m
2025-12-14 13:13:12,570 - INFO - 
【4/10】パターン実行中...
2025-12-14 13:13:12,570 - INFO - ================================================================================
2025-12-14 13:13:12,570 - INFO - パターン: 0-3m → 9-12m
2025-12-14 13:13:12,570 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:13:12,570 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:13:12,570 - INFO - ================================================================================
2025-12-14 13:13:12,570 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:13:12,955 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:13:12,955 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:13:12,955 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:13:12,955 - INFO - 将来窓設定: 0～33ヶ月
2025-12-14 13:13:12,955 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:13:12,955 - INFO - ================================================================================
2025-12-14 13:13:12,955 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:13:12,955 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:13:12,955 - INFO - 将来窓: 0～33ヶ月
2025-12-14 13:13:12,955 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:13:12,955 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:13:12,955 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:13:12,955 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:13:12,955 - INFO - ================================================================================
2025-12-14 13:13:12,955 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:13:12,955 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:13:12,968 - INFO - 特徴量計算期間内のレビュアー数: 494
2025-12-14 13:13:17,203 - INFO - 負例をオーバーサンプリング: 元47件 -> 141件
2025-12-14 13:13:17,203 - INFO - ================================================================================
2025-12-14 13:13:17,203 - INFO - 軌跡抽出完了: 498サンプル（レビュアー）
2025-12-14 13:13:17,203 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:13:17,203 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 90
2025-12-14 13:13:17,203 - INFO -   正例（この期間で承諾あり）: 357 (71.7%)
2025-12-14 13:13:17,203 - INFO -   負例（この期間で承諾なし）: 47 (9.4%)
2025-12-14 13:13:17,203 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 13:13:17,203 - INFO -   総ステップ数: 996
2025-12-14 13:13:17,203 - INFO -   継続ステップ率: 50.2% (500/996)
2025-12-14 13:13:17,203 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:13:17,207 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:13:17,208 - INFO - 訓練データ正例率: 71.7% (357/498)
2025-12-14 13:13:17,208 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:13:17,208 - INFO - 正例率 71.7% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:13:17,208 - INFO - IRLモデルを訓練...
2025-12-14 13:13:17,208 - INFO - ============================================================
2025-12-14 13:13:17,208 - INFO - 時系列IRL訓練開始
2025-12-14 13:13:17,208 - INFO - 軌跡数: 498
2025-12-14 13:13:17,208 - INFO - エポック数: 20
2025-12-14 13:13:17,208 - INFO - ============================================================
2025-12-14 13:13:17,975 - INFO - エポック 0: 平均損失 = 1.1579
2025-12-14 13:13:25,716 - INFO - エポック 10: 平均損失 = 0.7941
2025-12-14 13:13:32,599 - INFO - 時系列IRL訓練完了
2025-12-14 13:13:32,599 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:13:32,792 - INFO - 最適閾値: 0.2673
2025-12-14 13:13:32,792 - INFO - 訓練データ性能: Precision=0.717, Recall=1.000, F1=0.835
2025-12-14 13:13:32,793 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_0-3m/irl_model.pt
2025-12-14 13:13:32,793 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_0-3m/optimal_threshold.json
2025-12-14 13:13:32,793 - INFO - 評価用軌跡を抽出...
2025-12-14 13:13:32,793 - INFO - ================================================================================
2025-12-14 13:13:32,793 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:13:32,793 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-14 13:13:32,793 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:13:32,793 - INFO - 将来窓: 30～33ヶ月
2025-12-14 13:13:32,793 - INFO - 拡張ラベル期間: 30～12ヶ月
2025-12-14 13:13:32,793 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:13:32,793 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:13:32,793 - INFO - ================================================================================
2025-12-14 13:13:32,793 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-14 13:13:32,793 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:13:32,796 - INFO - 履歴期間内のレビュアー数: 494
2025-12-14 13:13:33,368 - INFO - ================================================================================
2025-12-14 13:13:33,368 - INFO - 評価用軌跡抽出完了: 165サンプル
2025-12-14 13:13:33,368 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:13:33,368 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 329
2025-12-14 13:13:33,368 - INFO -   正例（この期間で承諾あり）: 129 (78.2%)
2025-12-14 13:13:33,368 - INFO -   負例（この期間で承諾なし）: 36 (21.8%)
2025-12-14 13:13:33,368 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:13:33,368 - INFO - ================================================================================
2025-12-14 13:13:33,369 - INFO - 予測を実行...
2025-12-14 13:13:33,479 - INFO - ================================================================================
2025-12-14 13:13:33,479 - INFO - 評価結果 (0-3m → 9-12m):
2025-12-14 13:13:33,479 - INFO -   AUC-ROC: 0.5474
2025-12-14 13:13:33,479 - INFO -   AUC-PR: 0.8075
2025-12-14 13:13:33,479 - INFO -   Precision: 0.7818
2025-12-14 13:13:33,479 - INFO -   Recall: 1.0000
2025-12-14 13:13:33,479 - INFO -   F1 Score: 0.8776
2025-12-14 13:13:33,479 - INFO - ================================================================================
2025-12-14 13:13:33,480 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_0-3m/eval_9-12m
2025-12-14 13:13:33,488 - INFO - 
【5/10】パターン実行中...
2025-12-14 13:13:33,488 - INFO - ================================================================================
2025-12-14 13:13:33,488 - INFO - パターン: 3-6m → 3-6m
2025-12-14 13:13:33,488 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:13:33,488 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:13:33,488 - INFO - ================================================================================
2025-12-14 13:13:33,488 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:13:33,876 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:13:33,877 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:13:33,877 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:13:33,877 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:13:33,877 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:13:33,877 - INFO - ================================================================================
2025-12-14 13:13:33,877 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:13:33,877 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:13:33,877 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:13:33,877 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:13:33,877 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:13:33,877 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:13:33,877 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:13:33,877 - INFO - ================================================================================
2025-12-14 13:13:33,877 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:13:33,877 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:13:33,887 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:13:37,684 - INFO - 負例をオーバーサンプリング: 元47件 -> 141件
2025-12-14 13:13:37,684 - INFO - ================================================================================
2025-12-14 13:13:37,684 - INFO - 軌跡抽出完了: 486サンプル（レビュアー）
2025-12-14 13:13:37,684 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:13:37,684 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:13:37,684 - INFO -   正例（この期間で承諾あり）: 345 (71.0%)
2025-12-14 13:13:37,684 - INFO -   負例（この期間で承諾なし）: 47 (9.7%)
2025-12-14 13:13:37,684 - INFO -     - 依頼あり→拒否（重み=1.0）: 47
2025-12-14 13:13:37,684 - INFO -   総ステップ数: 972
2025-12-14 13:13:37,684 - INFO -   継続ステップ率: 47.3% (460/972)
2025-12-14 13:13:37,684 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:13:37,688 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:13:37,688 - INFO - 訓練データ正例率: 71.0% (345/486)
2025-12-14 13:13:37,688 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:13:37,688 - INFO - 正例率 71.0% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:13:37,688 - INFO - IRLモデルを訓練...
2025-12-14 13:13:37,688 - INFO - ============================================================
2025-12-14 13:13:37,688 - INFO - 時系列IRL訓練開始
2025-12-14 13:13:37,688 - INFO - 軌跡数: 486
2025-12-14 13:13:37,688 - INFO - エポック数: 20
2025-12-14 13:13:37,688 - INFO - ============================================================
2025-12-14 13:13:38,488 - INFO - エポック 0: 平均損失 = 1.1373
2025-12-14 13:13:46,455 - INFO - エポック 10: 平均損失 = 0.7545
2025-12-14 13:13:53,521 - INFO - 時系列IRL訓練完了
2025-12-14 13:13:53,521 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:13:53,696 - INFO - 最適閾値: 0.2860
2025-12-14 13:13:53,696 - INFO - 訓練データ性能: Precision=0.736, Recall=0.980, F1=0.841
2025-12-14 13:13:53,698 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_3-6m/irl_model.pt
2025-12-14 13:13:53,698 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_3-6m/optimal_threshold.json
2025-12-14 13:13:53,698 - INFO - 評価用軌跡を抽出...
2025-12-14 13:13:53,698 - INFO - ================================================================================
2025-12-14 13:13:53,698 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:13:53,698 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:13:53,698 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:13:53,698 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:13:53,698 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:13:53,698 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:13:53,698 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:13:53,698 - INFO - ================================================================================
2025-12-14 13:13:53,698 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:13:53,698 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-14 13:13:53,702 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:13:54,258 - INFO - ================================================================================
2025-12-14 13:13:54,258 - INFO - 評価用軌跡抽出完了: 197サンプル
2025-12-14 13:13:54,258 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:13:54,258 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 264
2025-12-14 13:13:54,258 - INFO -   正例（この期間で承諾あり）: 160 (81.2%)
2025-12-14 13:13:54,258 - INFO -   負例（この期間で承諾なし）: 37 (18.8%)
2025-12-14 13:13:54,258 - INFO -     - 依頼あり→拒否（重み=1.0）: 37
2025-12-14 13:13:54,258 - INFO - ================================================================================
2025-12-14 13:13:54,258 - INFO - 予測を実行...
2025-12-14 13:13:54,363 - INFO - ================================================================================
2025-12-14 13:13:54,363 - INFO - 評価結果 (3-6m → 3-6m):
2025-12-14 13:13:54,363 - INFO -   AUC-ROC: 0.7327
2025-12-14 13:13:54,363 - INFO -   AUC-PR: 0.9152
2025-12-14 13:13:54,363 - INFO -   Precision: 0.8238
2025-12-14 13:13:54,363 - INFO -   Recall: 0.9938
2025-12-14 13:13:54,363 - INFO -   F1 Score: 0.9008
2025-12-14 13:13:54,363 - INFO - ================================================================================
2025-12-14 13:13:54,364 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_3-6m/eval_3-6m
2025-12-14 13:13:54,371 - INFO - 
【6/10】パターン実行中...
2025-12-14 13:13:54,371 - INFO - ================================================================================
2025-12-14 13:13:54,371 - INFO - パターン: 3-6m → 6-9m
2025-12-14 13:13:54,371 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:13:54,371 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:13:54,371 - INFO - ================================================================================
2025-12-14 13:13:54,371 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:13:54,763 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:13:54,763 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:13:54,763 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:13:54,764 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:13:54,764 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:13:54,764 - INFO - ================================================================================
2025-12-14 13:13:54,764 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:13:54,764 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:13:54,764 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:13:54,764 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:13:54,764 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:13:54,764 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:13:54,764 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:13:54,764 - INFO - ================================================================================
2025-12-14 13:13:54,764 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:13:54,764 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:13:54,774 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:13:59,043 - INFO - 負例をオーバーサンプリング: 元42件 -> 126件
2025-12-14 13:13:59,044 - INFO - ================================================================================
2025-12-14 13:13:59,044 - INFO - 軌跡抽出完了: 476サンプル（レビュアー）
2025-12-14 13:13:59,044 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:13:59,044 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:13:59,044 - INFO -   正例（この期間で承諾あり）: 350 (73.5%)
2025-12-14 13:13:59,044 - INFO -   負例（この期間で承諾なし）: 42 (8.8%)
2025-12-14 13:13:59,044 - INFO -     - 依頼あり→拒否（重み=1.0）: 42
2025-12-14 13:13:59,044 - INFO -   総ステップ数: 952
2025-12-14 13:13:59,044 - INFO -   継続ステップ率: 47.4% (451/952)
2025-12-14 13:13:59,044 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:13:59,047 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:13:59,047 - INFO - 訓練データ正例率: 73.5% (350/476)
2025-12-14 13:13:59,048 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:13:59,048 - INFO - 正例率 73.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:13:59,048 - INFO - IRLモデルを訓練...
2025-12-14 13:13:59,048 - INFO - ============================================================
2025-12-14 13:13:59,048 - INFO - 時系列IRL訓練開始
2025-12-14 13:13:59,048 - INFO - 軌跡数: 476
2025-12-14 13:13:59,048 - INFO - エポック数: 20
2025-12-14 13:13:59,048 - INFO - ============================================================
2025-12-14 13:13:59,757 - INFO - エポック 0: 平均損失 = 1.1258
2025-12-14 13:14:06,773 - INFO - エポック 10: 平均損失 = 0.7528
2025-12-14 13:14:13,092 - INFO - 時系列IRL訓練完了
2025-12-14 13:14:13,092 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:14:13,264 - INFO - 最適閾値: 0.2039
2025-12-14 13:14:13,264 - INFO - 訓練データ性能: Precision=0.735, Recall=1.000, F1=0.847
2025-12-14 13:14:13,265 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_3-6m/irl_model.pt
2025-12-14 13:14:13,265 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_3-6m/optimal_threshold.json
2025-12-14 13:14:13,265 - INFO - 評価用軌跡を抽出...
2025-12-14 13:14:13,265 - INFO - ================================================================================
2025-12-14 13:14:13,265 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:14:13,265 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:14:13,265 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:14:13,265 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:14:13,265 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:14:13,265 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:14:13,265 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:14:13,265 - INFO - ================================================================================
2025-12-14 13:14:13,265 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:14:13,265 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:14:13,268 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:14:13,815 - INFO - ================================================================================
2025-12-14 13:14:13,815 - INFO - 評価用軌跡抽出完了: 184サンプル
2025-12-14 13:14:13,815 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:14:13,815 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 277
2025-12-14 13:14:13,815 - INFO -   正例（この期間で承諾あり）: 165 (89.7%)
2025-12-14 13:14:13,815 - INFO -   負例（この期間で承諾なし）: 19 (10.3%)
2025-12-14 13:14:13,815 - INFO -     - 依頼あり→拒否（重み=1.0）: 19
2025-12-14 13:14:13,815 - INFO - ================================================================================
2025-12-14 13:14:13,816 - INFO - 予測を実行...
2025-12-14 13:14:13,915 - INFO - ================================================================================
2025-12-14 13:14:13,915 - INFO - 評価結果 (3-6m → 6-9m):
2025-12-14 13:14:13,915 - INFO -   AUC-ROC: 0.7008
2025-12-14 13:14:13,915 - INFO -   AUC-PR: 0.9422
2025-12-14 13:14:13,915 - INFO -   Precision: 0.8967
2025-12-14 13:14:13,915 - INFO -   Recall: 1.0000
2025-12-14 13:14:13,915 - INFO -   F1 Score: 0.9456
2025-12-14 13:14:13,915 - INFO - ================================================================================
2025-12-14 13:14:13,916 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_3-6m/eval_6-9m
2025-12-14 13:14:13,924 - INFO - 
【7/10】パターン実行中...
2025-12-14 13:14:13,925 - INFO - ================================================================================
2025-12-14 13:14:13,925 - INFO - パターン: 3-6m → 9-12m
2025-12-14 13:14:13,925 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:14:13,925 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:14:13,925 - INFO - ================================================================================
2025-12-14 13:14:13,925 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:14:14,324 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:14:14,324 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:14:14,324 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:14:14,324 - INFO - 将来窓設定: 0～30ヶ月
2025-12-14 13:14:14,325 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:14:14,325 - INFO - ================================================================================
2025-12-14 13:14:14,325 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:14:14,325 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:14:14,325 - INFO - 将来窓: 0～30ヶ月
2025-12-14 13:14:14,325 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:14:14,325 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:14:14,325 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:14:14,325 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:14:14,325 - INFO - ================================================================================
2025-12-14 13:14:14,325 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:14:14,325 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:14:14,335 - INFO - 特徴量計算期間内のレビュアー数: 461
2025-12-14 13:14:18,258 - INFO - 負例をオーバーサンプリング: 元39件 -> 117件
2025-12-14 13:14:18,258 - INFO - ================================================================================
2025-12-14 13:14:18,258 - INFO - 軌跡抽出完了: 470サンプル（レビュアー）
2025-12-14 13:14:18,258 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:14:18,258 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 69
2025-12-14 13:14:18,258 - INFO -   正例（この期間で承諾あり）: 353 (75.1%)
2025-12-14 13:14:18,258 - INFO -   負例（この期間で承諾なし）: 39 (8.3%)
2025-12-14 13:14:18,258 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:14:18,258 - INFO -   総ステップ数: 940
2025-12-14 13:14:18,258 - INFO -   継続ステップ率: 48.0% (451/940)
2025-12-14 13:14:18,258 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:14:18,262 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:14:18,262 - INFO - 訓練データ正例率: 75.1% (353/470)
2025-12-14 13:14:18,262 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:14:18,262 - INFO - 正例率 75.1% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:14:18,262 - INFO - IRLモデルを訓練...
2025-12-14 13:14:18,262 - INFO - ============================================================
2025-12-14 13:14:18,262 - INFO - 時系列IRL訓練開始
2025-12-14 13:14:18,262 - INFO - 軌跡数: 470
2025-12-14 13:14:18,262 - INFO - エポック数: 20
2025-12-14 13:14:18,262 - INFO - ============================================================
2025-12-14 13:14:18,982 - INFO - エポック 0: 平均損失 = 1.1413
2025-12-14 13:14:26,132 - INFO - エポック 10: 平均損失 = 0.7330
2025-12-14 13:14:32,551 - INFO - 時系列IRL訓練完了
2025-12-14 13:14:32,551 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:14:32,720 - INFO - 最適閾値: 0.1999
2025-12-14 13:14:32,721 - INFO - 訓練データ性能: Precision=0.751, Recall=1.000, F1=0.858
2025-12-14 13:14:32,722 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_3-6m/irl_model.pt
2025-12-14 13:14:32,722 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_3-6m/optimal_threshold.json
2025-12-14 13:14:32,722 - INFO - 評価用軌跡を抽出...
2025-12-14 13:14:32,722 - INFO - ================================================================================
2025-12-14 13:14:32,722 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:14:32,722 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-14 13:14:32,722 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:14:32,722 - INFO - 将来窓: 27～30ヶ月
2025-12-14 13:14:32,722 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-14 13:14:32,722 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:14:32,722 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:14:32,722 - INFO - ================================================================================
2025-12-14 13:14:32,722 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-14 13:14:32,722 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:14:32,725 - INFO - 履歴期間内のレビュアー数: 461
2025-12-14 13:14:33,222 - INFO - ================================================================================
2025-12-14 13:14:33,222 - INFO - 評価用軌跡抽出完了: 168サンプル
2025-12-14 13:14:33,222 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:14:33,222 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 293
2025-12-14 13:14:33,222 - INFO -   正例（この期間で承諾あり）: 132 (78.6%)
2025-12-14 13:14:33,222 - INFO -   負例（この期間で承諾なし）: 36 (21.4%)
2025-12-14 13:14:33,222 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:14:33,222 - INFO - ================================================================================
2025-12-14 13:14:33,223 - INFO - 予測を実行...
2025-12-14 13:14:33,320 - INFO - ================================================================================
2025-12-14 13:14:33,320 - INFO - 評価結果 (3-6m → 9-12m):
2025-12-14 13:14:33,320 - INFO -   AUC-ROC: 0.6197
2025-12-14 13:14:33,320 - INFO -   AUC-PR: 0.8463
2025-12-14 13:14:33,320 - INFO -   Precision: 0.7857
2025-12-14 13:14:33,320 - INFO -   Recall: 1.0000
2025-12-14 13:14:33,320 - INFO -   F1 Score: 0.8800
2025-12-14 13:14:33,320 - INFO - ================================================================================
2025-12-14 13:14:33,321 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_3-6m/eval_9-12m
2025-12-14 13:14:33,329 - INFO - 
【8/10】パターン実行中...
2025-12-14 13:14:33,329 - INFO - ================================================================================
2025-12-14 13:14:33,329 - INFO - パターン: 6-9m → 6-9m
2025-12-14 13:14:33,329 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:14:33,329 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:14:33,329 - INFO - ================================================================================
2025-12-14 13:14:33,329 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:14:33,732 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:14:33,732 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:14:33,732 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:14:33,732 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:14:33,732 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:14:33,732 - INFO - ================================================================================
2025-12-14 13:14:33,732 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:14:33,732 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:14:33,732 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:14:33,732 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:14:33,732 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:14:33,732 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:14:33,732 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:14:33,732 - INFO - ================================================================================
2025-12-14 13:14:33,732 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:14:33,732 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:14:33,742 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 13:14:37,425 - INFO - 負例をオーバーサンプリング: 元38件 -> 114件
2025-12-14 13:14:37,426 - INFO - ================================================================================
2025-12-14 13:14:37,426 - INFO - 軌跡抽出完了: 435サンプル（レビュアー）
2025-12-14 13:14:37,426 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:14:37,426 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 113
2025-12-14 13:14:37,426 - INFO -   正例（この期間で承諾あり）: 321 (73.8%)
2025-12-14 13:14:37,426 - INFO -   負例（この期間で承諾なし）: 38 (8.7%)
2025-12-14 13:14:37,426 - INFO -     - 依頼あり→拒否（重み=1.0）: 38
2025-12-14 13:14:37,426 - INFO -   総ステップ数: 870
2025-12-14 13:14:37,426 - INFO -   継続ステップ率: 53.8% (468/870)
2025-12-14 13:14:37,426 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:14:37,429 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:14:37,429 - INFO - 訓練データ正例率: 73.8% (321/435)
2025-12-14 13:14:37,429 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:14:37,429 - INFO - 正例率 73.8% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:14:37,430 - INFO - IRLモデルを訓練...
2025-12-14 13:14:37,430 - INFO - ============================================================
2025-12-14 13:14:37,430 - INFO - 時系列IRL訓練開始
2025-12-14 13:14:37,430 - INFO - 軌跡数: 435
2025-12-14 13:14:37,430 - INFO - エポック数: 20
2025-12-14 13:14:37,430 - INFO - ============================================================
2025-12-14 13:14:38,078 - INFO - エポック 0: 平均損失 = 1.1522
2025-12-14 13:14:44,493 - INFO - エポック 10: 平均損失 = 0.7736
2025-12-14 13:14:50,278 - INFO - 時系列IRL訓練完了
2025-12-14 13:14:50,278 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:14:50,443 - INFO - 最適閾値: 0.2196
2025-12-14 13:14:50,443 - INFO - 訓練データ性能: Precision=0.738, Recall=1.000, F1=0.849
2025-12-14 13:14:50,444 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_6-9m/irl_model.pt
2025-12-14 13:14:50,444 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_6-9m/optimal_threshold.json
2025-12-14 13:14:50,444 - INFO - 評価用軌跡を抽出...
2025-12-14 13:14:50,444 - INFO - ================================================================================
2025-12-14 13:14:50,444 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:14:50,444 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 13:14:50,444 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:14:50,444 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:14:50,444 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:14:50,444 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:14:50,444 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:14:50,444 - INFO - ================================================================================
2025-12-14 13:14:50,445 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:14:50,445 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-14 13:14:50,447 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 13:14:51,002 - INFO - ================================================================================
2025-12-14 13:14:51,002 - INFO - 評価用軌跡抽出完了: 183サンプル
2025-12-14 13:14:51,002 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:14:51,002 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 289
2025-12-14 13:14:51,002 - INFO -   正例（この期間で承諾あり）: 165 (90.2%)
2025-12-14 13:14:51,002 - INFO -   負例（この期間で承諾なし）: 18 (9.8%)
2025-12-14 13:14:51,002 - INFO -     - 依頼あり→拒否（重み=1.0）: 18
2025-12-14 13:14:51,002 - INFO - ================================================================================
2025-12-14 13:14:51,002 - INFO - 予測を実行...
2025-12-14 13:14:51,102 - INFO - ================================================================================
2025-12-14 13:14:51,102 - INFO - 評価結果 (6-9m → 6-9m):
2025-12-14 13:14:51,102 - INFO -   AUC-ROC: 0.7401
2025-12-14 13:14:51,102 - INFO -   AUC-PR: 0.9475
2025-12-14 13:14:51,102 - INFO -   Precision: 0.9016
2025-12-14 13:14:51,102 - INFO -   Recall: 1.0000
2025-12-14 13:14:51,102 - INFO -   F1 Score: 0.9483
2025-12-14 13:14:51,102 - INFO - ================================================================================
2025-12-14 13:14:51,103 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_6-9m/eval_6-9m
2025-12-14 13:14:51,111 - INFO - 
【9/10】パターン実行中...
2025-12-14 13:14:51,111 - INFO - ================================================================================
2025-12-14 13:14:51,111 - INFO - パターン: 6-9m → 9-12m
2025-12-14 13:14:51,111 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:14:51,111 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:14:51,111 - INFO - ================================================================================
2025-12-14 13:14:51,111 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:14:51,513 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:14:51,513 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:14:51,514 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:14:51,514 - INFO - 将来窓設定: 0～27ヶ月
2025-12-14 13:14:51,514 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:14:51,514 - INFO - ================================================================================
2025-12-14 13:14:51,514 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:14:51,514 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:14:51,514 - INFO - 将来窓: 0～27ヶ月
2025-12-14 13:14:51,514 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:14:51,514 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:14:51,514 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:14:51,514 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:14:51,514 - INFO - ================================================================================
2025-12-14 13:14:51,514 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:14:51,514 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:14:51,524 - INFO - 特徴量計算期間内のレビュアー数: 472
2025-12-14 13:14:55,194 - INFO - 負例をオーバーサンプリング: 元39件 -> 117件
2025-12-14 13:14:55,194 - INFO - ================================================================================
2025-12-14 13:14:55,194 - INFO - 軌跡抽出完了: 439サンプル（レビュアー）
2025-12-14 13:14:55,194 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:14:55,194 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 111
2025-12-14 13:14:55,194 - INFO -   正例（この期間で承諾あり）: 322 (73.3%)
2025-12-14 13:14:55,194 - INFO -   負例（この期間で承諾なし）: 39 (8.9%)
2025-12-14 13:14:55,194 - INFO -     - 依頼あり→拒否（重み=1.0）: 39
2025-12-14 13:14:55,194 - INFO -   総ステップ数: 878
2025-12-14 13:14:55,194 - INFO -   継続ステップ率: 51.8% (455/878)
2025-12-14 13:14:55,194 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:14:55,197 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:14:55,197 - INFO - 訓練データ正例率: 73.3% (322/439)
2025-12-14 13:14:55,197 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:14:55,197 - INFO - 正例率 73.3% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:14:55,197 - INFO - IRLモデルを訓練...
2025-12-14 13:14:55,197 - INFO - ============================================================
2025-12-14 13:14:55,197 - INFO - 時系列IRL訓練開始
2025-12-14 13:14:55,197 - INFO - 軌跡数: 439
2025-12-14 13:14:55,197 - INFO - エポック数: 20
2025-12-14 13:14:55,197 - INFO - ============================================================
2025-12-14 13:14:55,868 - INFO - エポック 0: 平均損失 = 1.1580
2025-12-14 13:15:02,517 - INFO - エポック 10: 平均損失 = 0.7381
2025-12-14 13:15:08,522 - INFO - 時系列IRL訓練完了
2025-12-14 13:15:08,522 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:15:08,687 - INFO - 最適閾値: 0.2296
2025-12-14 13:15:08,687 - INFO - 訓練データ性能: Precision=0.748, Recall=0.997, F1=0.855
2025-12-14 13:15:08,688 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_6-9m/irl_model.pt
2025-12-14 13:15:08,688 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_6-9m/optimal_threshold.json
2025-12-14 13:15:08,688 - INFO - 評価用軌跡を抽出...
2025-12-14 13:15:08,688 - INFO - ================================================================================
2025-12-14 13:15:08,688 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:15:08,688 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-14 13:15:08,688 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:15:08,688 - INFO - 将来窓: 24～27ヶ月
2025-12-14 13:15:08,688 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-14 13:15:08,688 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:15:08,688 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:15:08,688 - INFO - ================================================================================
2025-12-14 13:15:08,688 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-14 13:15:08,688 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:15:08,691 - INFO - 履歴期間内のレビュアー数: 472
2025-12-14 13:15:09,197 - INFO - ================================================================================
2025-12-14 13:15:09,197 - INFO - 評価用軌跡抽出完了: 160サンプル
2025-12-14 13:15:09,197 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:15:09,197 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 312
2025-12-14 13:15:09,197 - INFO -   正例（この期間で承諾あり）: 126 (78.8%)
2025-12-14 13:15:09,197 - INFO -   負例（この期間で承諾なし）: 34 (21.2%)
2025-12-14 13:15:09,197 - INFO -     - 依頼あり→拒否（重み=1.0）: 34
2025-12-14 13:15:09,197 - INFO - ================================================================================
2025-12-14 13:15:09,198 - INFO - 予測を実行...
2025-12-14 13:15:09,295 - INFO - ================================================================================
2025-12-14 13:15:09,295 - INFO - 評価結果 (6-9m → 9-12m):
2025-12-14 13:15:09,295 - INFO -   AUC-ROC: 0.6604
2025-12-14 13:15:09,295 - INFO -   AUC-PR: 0.8624
2025-12-14 13:15:09,295 - INFO -   Precision: 0.7862
2025-12-14 13:15:09,295 - INFO -   Recall: 0.9921
2025-12-14 13:15:09,295 - INFO -   F1 Score: 0.8772
2025-12-14 13:15:09,295 - INFO - ================================================================================
2025-12-14 13:15:09,296 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_6-9m/eval_9-12m
2025-12-14 13:15:09,305 - INFO - 
【10/10】パターン実行中...
2025-12-14 13:15:09,305 - INFO - ================================================================================
2025-12-14 13:15:09,305 - INFO - パターン: 9-12m → 9-12m
2025-12-14 13:15:09,305 - INFO - 訓練期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:15:09,305 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:15:09,305 - INFO - ================================================================================
2025-12-14 13:15:09,305 - INFO - レビュー依頼データを読み込み: data/openstack_50proj_2021_2024_feat.csv
2025-12-14 13:15:09,705 - INFO - 総レビュー依頼数: 119010
2025-12-14 13:15:09,706 - INFO - 承諾数: 73480 (61.7%)
2025-12-14 13:15:09,706 - INFO - 拒否数: 45530 (38.3%)
2025-12-14 13:15:09,706 - INFO - 将来窓設定: 0～24ヶ月
2025-12-14 13:15:09,706 - INFO - 訓練用軌跡を抽出...
2025-12-14 13:15:09,706 - INFO - ================================================================================
2025-12-14 13:15:09,706 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-14 13:15:09,706 - INFO - 訓練期間全体: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:15:09,706 - INFO - 将来窓: 0～24ヶ月
2025-12-14 13:15:09,706 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-14 13:15:09,706 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:15:09,706 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-14 13:15:09,706 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-14 13:15:09,706 - INFO - ================================================================================
2025-12-14 13:15:09,706 - INFO - 特徴量計算期間（訓練全体）: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:15:09,706 - INFO - 全体ラベル期間（train_end時点から）: 2022-01-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:15:09,715 - INFO - 特徴量計算期間内のレビュアー数: 449
2025-12-14 13:15:13,075 - INFO - 負例をオーバーサンプリング: 元36件 -> 108件
2025-12-14 13:15:13,075 - INFO - ================================================================================
2025-12-14 13:15:13,075 - INFO - 軌跡抽出完了: 421サンプル（レビュアー）
2025-12-14 13:15:13,075 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:15:13,075 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 100
2025-12-14 13:15:13,075 - INFO -   正例（この期間で承諾あり）: 313 (74.3%)
2025-12-14 13:15:13,075 - INFO -   負例（この期間で承諾なし）: 36 (8.6%)
2025-12-14 13:15:13,075 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:15:13,075 - INFO -   総ステップ数: 842
2025-12-14 13:15:13,075 - INFO -   継続ステップ率: 42.8% (360/842)
2025-12-14 13:15:13,075 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-14 13:15:13,078 - INFO - 継続予測IRLシステムを初期化しました
2025-12-14 13:15:13,078 - INFO - 訓練データ正例率: 74.3% (313/421)
2025-12-14 13:15:13,078 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-14 13:15:13,078 - INFO - 正例率 74.3% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-14 13:15:13,078 - INFO - IRLモデルを訓練...
2025-12-14 13:15:13,078 - INFO - ============================================================
2025-12-14 13:15:13,078 - INFO - 時系列IRL訓練開始
2025-12-14 13:15:13,078 - INFO - 軌跡数: 421
2025-12-14 13:15:13,078 - INFO - エポック数: 20
2025-12-14 13:15:13,078 - INFO - ============================================================
2025-12-14 13:15:13,779 - INFO - エポック 0: 平均損失 = 1.1451
2025-12-14 13:15:20,631 - INFO - エポック 10: 平均損失 = 0.7296
2025-12-14 13:15:26,803 - INFO - 時系列IRL訓練完了
2025-12-14 13:15:26,804 - INFO - 訓練データ上で最適閾値を決定...
2025-12-14 13:15:26,946 - INFO - 最適閾値: 0.2216
2025-12-14 13:15:26,946 - INFO - 訓練データ性能: Precision=0.743, Recall=1.000, F1=0.853
2025-12-14 13:15:26,948 - INFO - モデルを保存: outputs/50projects_irl/3x_os/train_9-12m/irl_model.pt
2025-12-14 13:15:26,948 - INFO - 最適閾値を保存: outputs/50projects_irl/3x_os/train_9-12m/optimal_threshold.json
2025-12-14 13:15:26,948 - INFO - 評価用軌跡を抽出...
2025-12-14 13:15:26,948 - INFO - ================================================================================
2025-12-14 13:15:26,948 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-14 13:15:26,948 - INFO - Cutoff日: 2022-01-01 00:00:00
2025-12-14 13:15:26,948 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-14 13:15:26,948 - INFO - 将来窓: 21～24ヶ月
2025-12-14 13:15:26,948 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-14 13:15:26,948 - INFO - プロジェクト: 全プロジェクト
2025-12-14 13:15:26,948 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-14 13:15:26,948 - INFO - ================================================================================
2025-12-14 13:15:26,948 - INFO - 履歴期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-14 13:15:26,948 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-14 13:15:26,950 - INFO - 履歴期間内のレビュアー数: 449
2025-12-14 13:15:27,395 - INFO - ================================================================================
2025-12-14 13:15:27,395 - INFO - 評価用軌跡抽出完了: 167サンプル
2025-12-14 13:15:27,395 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-14 13:15:27,395 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 282
2025-12-14 13:15:27,395 - INFO -   正例（この期間で承諾あり）: 131 (78.4%)
2025-12-14 13:15:27,395 - INFO -   負例（この期間で承諾なし）: 36 (21.6%)
2025-12-14 13:15:27,395 - INFO -     - 依頼あり→拒否（重み=1.0）: 36
2025-12-14 13:15:27,395 - INFO - ================================================================================
2025-12-14 13:15:27,396 - INFO - 予測を実行...
2025-12-14 13:15:27,482 - INFO - ================================================================================
2025-12-14 13:15:27,482 - INFO - 評価結果 (9-12m → 9-12m):
2025-12-14 13:15:27,482 - INFO -   AUC-ROC: 0.6494
2025-12-14 13:15:27,482 - INFO -   AUC-PR: 0.8644
2025-12-14 13:15:27,482 - INFO -   Precision: 0.7844
2025-12-14 13:15:27,482 - INFO -   Recall: 1.0000
2025-12-14 13:15:27,482 - INFO -   F1 Score: 0.8792
2025-12-14 13:15:27,482 - INFO - ================================================================================
2025-12-14 13:15:27,483 - INFO - 結果を保存: outputs/50projects_irl/3x_os/train_9-12m/eval_9-12m
2025-12-14 13:15:27,489 - INFO - ================================================================================
2025-12-14 13:15:27,489 - INFO - メトリクスマトリクスを作成中...
2025-12-14 13:15:27,489 - INFO - ================================================================================
2025-12-14 13:15:27,493 - INFO - 保存: outputs/50projects_irl/3x_os/matrix_AUC_ROC.csv
2025-12-14 13:15:27,495 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.683554  0.674573  0.670956  0.547373
3-6m        NaN  0.732686  0.700797  0.619739
6-9m        NaN       NaN  0.740067  0.660364
9-12m       NaN       NaN       NaN  0.649385
2025-12-14 13:15:27,495 - INFO - 保存: outputs/50projects_irl/3x_os/matrix_AUC_PR.csv
2025-12-14 13:15:27,496 - INFO - 
          0-3m      3-6m      6-9m     9-12m
0-3m   0.91019  0.895097  0.944804  0.807450
3-6m       NaN  0.915248  0.942210  0.846312
6-9m       NaN       NaN  0.947487  0.862351
9-12m      NaN       NaN       NaN  0.864373
2025-12-14 13:15:27,496 - INFO - 保存: outputs/50projects_irl/3x_os/matrix_PRECISION.csv
2025-12-14 13:15:27,497 - INFO - 
          0-3m      3-6m      6-9m     9-12m
0-3m   0.84878  0.815217  0.903955  0.781818
3-6m       NaN  0.823834  0.896739  0.785714
6-9m       NaN       NaN  0.901639  0.786164
9-12m      NaN       NaN       NaN  0.784431
2025-12-14 13:15:27,498 - INFO - 保存: outputs/50projects_irl/3x_os/matrix_RECALL.csv
2025-12-14 13:15:27,499 - INFO - 
           0-3m      3-6m  6-9m     9-12m
0-3m   0.935484  0.955414   1.0  1.000000
3-6m        NaN  0.993750   1.0  1.000000
6-9m        NaN       NaN   1.0  0.992063
9-12m       NaN       NaN   NaN  1.000000
2025-12-14 13:15:27,499 - INFO - 保存: outputs/50projects_irl/3x_os/matrix_f1_score.csv
2025-12-14 13:15:27,500 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.890026  0.879765  0.949555  0.877551
3-6m        NaN  0.900850  0.945559  0.880000
6-9m        NaN       NaN  0.948276  0.877193
9-12m       NaN       NaN       NaN  0.879195
2025-12-14 13:15:27,500 - INFO - ================================================================================
2025-12-14 13:15:27,500 - INFO - マトリクス作成完了
2025-12-14 13:15:27,500 - INFO - ================================================================================
2025-12-14 13:15:27,500 - INFO - ================================================================================
2025-12-14 13:15:27,500 - INFO - 全パターンの訓練・評価が完了しました
2025-12-14 13:15:27,500 - INFO - 結果: outputs/50projects_irl/3x_os
2025-12-14 13:15:27,500 - INFO - ================================================================================

==============================================
結果サマリー
==============================================

50プロジェクト IRL 学習結果
================================================================================
実験                    F1  Precision   Recall  AUC-ROC
--------------------------------------------------------------------------------
no_os           (結果なし)
2x_os           (結果なし)
3x_os           (結果なし)
================================================================================

参考: 20プロジェクト結果（Multi-Project）
--------------------------------------------------------------------------------


==============================================
完了！
==============================================
結果保存先: outputs/50projects_irl

詳細結果:
  - outputs/50projects_irl/no_os/metrics.json
  - outputs/50projects_irl/2x_os/metrics.json
  - outputs/50projects_irl/3x_os/metrics.json

