2025-12-18 11:47:11,972 - INFO - 訓練期間ベース: 2021-01-01 00:00:00
2025-12-18 11:47:11,972 - INFO - 評価期間ベース: 2023-01-01 00:00:00
2025-12-18 11:47:11,973 - INFO - 生成されたパターン数: 10
2025-12-18 11:47:11,973 - INFO -   0-3m → 0-3m
2025-12-18 11:47:11,973 - INFO -   0-3m → 3-6m
2025-12-18 11:47:11,973 - INFO -   0-3m → 6-9m
2025-12-18 11:47:11,973 - INFO -   0-3m → 9-12m
2025-12-18 11:47:11,973 - INFO -   3-6m → 3-6m
2025-12-18 11:47:11,973 - INFO -   3-6m → 6-9m
2025-12-18 11:47:11,973 - INFO -   3-6m → 9-12m
2025-12-18 11:47:11,973 - INFO -   6-9m → 6-9m
2025-12-18 11:47:11,973 - INFO -   6-9m → 9-12m
2025-12-18 11:47:11,973 - INFO -   9-12m → 9-12m
2025-12-18 11:47:11,973 - INFO - ================================================================================
2025-12-18 11:47:11,973 - INFO - 全10パターンの訓練・評価を開始
2025-12-18 11:47:11,973 - INFO - ================================================================================
2025-12-18 11:47:11,973 - INFO - 
【1/10】パターン実行中...
2025-12-18 11:47:11,973 - INFO - ================================================================================
2025-12-18 11:47:11,973 - INFO - パターン: 0-3m → 0-3m
2025-12-18 11:47:11,973 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:11,973 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-18 11:47:11,973 - INFO - ================================================================================
2025-12-18 11:47:14,279 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:14,304 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:14,304 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:14,304 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:14,305 - INFO - 将来窓設定: 0～24ヶ月
2025-12-18 11:47:14,305 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:14,305 - INFO - ================================================================================
2025-12-18 11:47:14,305 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:14,305 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:14,305 - INFO - 将来窓: 0～24ヶ月
2025-12-18 11:47:14,305 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:14,305 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:14,305 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:14,305 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:14,305 - INFO - ================================================================================
2025-12-18 11:47:14,305 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:14,305 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-18 11:47:14,306 - INFO - 特徴量計算期間内のレビュアー数: 70
2025-12-18 11:47:14,444 - INFO - ================================================================================
2025-12-18 11:47:14,444 - INFO - 軌跡抽出完了: 61サンプル（レビュアー）
2025-12-18 11:47:14,444 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:14,444 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-18 11:47:14,444 - INFO -   正例（この期間で承諾あり）: 54 (88.5%)
2025-12-18 11:47:14,444 - INFO -   負例（この期間で承諾なし）: 7 (11.5%)
2025-12-18 11:47:14,444 - INFO -     - 依頼あり→拒否（重み=1.0）: 7
2025-12-18 11:47:14,445 - INFO -   総ステップ数: 122
2025-12-18 11:47:14,445 - INFO -   継続ステップ率: 32.8% (40/122)
2025-12-18 11:47:14,445 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:14,996 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:14,996 - INFO - 訓練データ正例率: 88.5% (54/61)
2025-12-18 11:47:14,996 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:14,996 - INFO - 正例率 88.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:14,996 - INFO - IRLモデルを訓練...
2025-12-18 11:47:14,996 - INFO - ============================================================
2025-12-18 11:47:14,996 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:14,996 - INFO - 軌跡数: 61
2025-12-18 11:47:14,996 - INFO - エポック数: 50
2025-12-18 11:47:14,996 - INFO - ============================================================
2025-12-18 11:47:15,130 - INFO - エポック 0: 平均損失 = 1.1831
2025-12-18 11:47:16,453 - INFO - エポック 10: 平均損失 = 0.9976
2025-12-18 11:47:17,725 - INFO - エポック 20: 平均損失 = 0.9579
2025-12-18 11:47:18,803 - INFO - エポック 30: 平均損失 = 0.9090
2025-12-18 11:47:19,831 - INFO - エポック 40: 平均損失 = 0.8659
2025-12-18 11:47:20,635 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:20,635 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:20,658 - INFO - 最適閾値: 0.0139
2025-12-18 11:47:20,658 - INFO - 訓練データ性能: Precision=0.885, Recall=1.000, F1=0.939
2025-12-18 11:47:20,661 - INFO - モデルを保存: outputs/qt_50projects_irl/train_0-3m/irl_model.pt
2025-12-18 11:47:20,661 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-18 11:47:20,661 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:20,661 - INFO - ================================================================================
2025-12-18 11:47:20,661 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:20,661 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-18 11:47:20,661 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:20,661 - INFO - 将来窓: 21～24ヶ月
2025-12-18 11:47:20,661 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-18 11:47:20,661 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:20,661 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:20,661 - INFO - ================================================================================
2025-12-18 11:47:20,661 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:20,661 - INFO - 評価期間: 2023-01-01 00:00:00 ～ 2023-04-01 00:00:00
2025-12-18 11:47:20,662 - INFO - 履歴期間内のレビュアー数: 70
2025-12-18 11:47:20,715 - INFO - ================================================================================
2025-12-18 11:47:20,715 - INFO - 評価用軌跡抽出完了: 44サンプル
2025-12-18 11:47:20,715 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:20,715 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 26
2025-12-18 11:47:20,715 - INFO -   正例（この期間で承諾あり）: 26 (59.1%)
2025-12-18 11:47:20,715 - INFO -   負例（この期間で承諾なし）: 18 (40.9%)
2025-12-18 11:47:20,715 - INFO -     - 依頼あり→拒否（重み=1.0）: 18
2025-12-18 11:47:20,715 - INFO - ================================================================================
2025-12-18 11:47:20,715 - INFO - 予測を実行...
2025-12-18 11:47:20,736 - INFO - ================================================================================
2025-12-18 11:47:20,736 - INFO - 評価結果 (0-3m → 0-3m):
2025-12-18 11:47:20,736 - INFO -   AUC-ROC: 0.5214
2025-12-18 11:47:20,736 - INFO -   AUC-PR: 0.5684
2025-12-18 11:47:20,736 - INFO -   Precision: 0.5909
2025-12-18 11:47:20,736 - INFO -   Recall: 1.0000
2025-12-18 11:47:20,736 - INFO -   F1 Score: 0.7429
2025-12-18 11:47:20,736 - INFO - ================================================================================
2025-12-18 11:47:20,737 - INFO - 結果を保存: outputs/qt_50projects_irl/train_0-3m/eval_0-3m
2025-12-18 11:47:20,738 - INFO - 
【2/10】パターン実行中...
2025-12-18 11:47:20,738 - INFO - ================================================================================
2025-12-18 11:47:20,738 - INFO - パターン: 0-3m → 3-6m
2025-12-18 11:47:20,738 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:20,738 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:20,738 - INFO - ================================================================================
2025-12-18 11:47:20,738 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:20,752 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:20,752 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:20,752 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:20,752 - INFO - 将来窓設定: 0～27ヶ月
2025-12-18 11:47:20,752 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:20,752 - INFO - ================================================================================
2025-12-18 11:47:20,752 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:20,752 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:20,752 - INFO - 将来窓: 0～27ヶ月
2025-12-18 11:47:20,753 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:20,753 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:20,753 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:20,753 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:20,753 - INFO - ================================================================================
2025-12-18 11:47:20,753 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:20,753 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:20,753 - INFO - 特徴量計算期間内のレビュアー数: 70
2025-12-18 11:47:20,887 - INFO - ================================================================================
2025-12-18 11:47:20,887 - INFO - 軌跡抽出完了: 61サンプル（レビュアー）
2025-12-18 11:47:20,887 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:20,887 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-18 11:47:20,887 - INFO -   正例（この期間で承諾あり）: 54 (88.5%)
2025-12-18 11:47:20,887 - INFO -   負例（この期間で承諾なし）: 7 (11.5%)
2025-12-18 11:47:20,887 - INFO -     - 依頼あり→拒否（重み=1.0）: 7
2025-12-18 11:47:20,887 - INFO -   総ステップ数: 122
2025-12-18 11:47:20,887 - INFO -   継続ステップ率: 32.8% (40/122)
2025-12-18 11:47:20,887 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:20,888 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:20,888 - INFO - 訓練データ正例率: 88.5% (54/61)
2025-12-18 11:47:20,888 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:20,888 - INFO - 正例率 88.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:20,888 - INFO - IRLモデルを訓練...
2025-12-18 11:47:20,888 - INFO - ============================================================
2025-12-18 11:47:20,888 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:20,888 - INFO - 軌跡数: 61
2025-12-18 11:47:20,888 - INFO - エポック数: 50
2025-12-18 11:47:20,888 - INFO - ============================================================
2025-12-18 11:47:20,975 - INFO - エポック 0: 平均損失 = 1.1800
2025-12-18 11:47:21,867 - INFO - エポック 10: 平均損失 = 0.9949
2025-12-18 11:47:22,776 - INFO - エポック 20: 平均損失 = 0.9188
2025-12-18 11:47:23,862 - INFO - エポック 30: 平均損失 = 0.9084
2025-12-18 11:47:24,822 - INFO - エポック 40: 平均損失 = 0.8570
2025-12-18 11:47:25,757 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:25,758 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:25,782 - INFO - 最適閾値: 0.0134
2025-12-18 11:47:25,782 - INFO - 訓練データ性能: Precision=0.885, Recall=1.000, F1=0.939
2025-12-18 11:47:25,783 - INFO - モデルを保存: outputs/qt_50projects_irl/train_0-3m/irl_model.pt
2025-12-18 11:47:25,783 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-18 11:47:25,783 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:25,784 - INFO - ================================================================================
2025-12-18 11:47:25,784 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:25,784 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-18 11:47:25,784 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:25,784 - INFO - 将来窓: 24～27ヶ月
2025-12-18 11:47:25,784 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-18 11:47:25,784 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:25,784 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:25,784 - INFO - ================================================================================
2025-12-18 11:47:25,784 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:25,784 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:25,785 - INFO - 履歴期間内のレビュアー数: 70
2025-12-18 11:47:25,834 - INFO - ================================================================================
2025-12-18 11:47:25,834 - INFO - 評価用軌跡抽出完了: 36サンプル
2025-12-18 11:47:25,834 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:25,834 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 34
2025-12-18 11:47:25,834 - INFO -   正例（この期間で承諾あり）: 21 (58.3%)
2025-12-18 11:47:25,834 - INFO -   負例（この期間で承諾なし）: 15 (41.7%)
2025-12-18 11:47:25,834 - INFO -     - 依頼あり→拒否（重み=1.0）: 15
2025-12-18 11:47:25,834 - INFO - ================================================================================
2025-12-18 11:47:25,834 - INFO - 予測を実行...
2025-12-18 11:47:25,852 - INFO - ================================================================================
2025-12-18 11:47:25,853 - INFO - 評価結果 (0-3m → 3-6m):
2025-12-18 11:47:25,853 - INFO -   AUC-ROC: 0.8063
2025-12-18 11:47:25,853 - INFO -   AUC-PR: 0.8431
2025-12-18 11:47:25,853 - INFO -   Precision: 0.5833
2025-12-18 11:47:25,853 - INFO -   Recall: 1.0000
2025-12-18 11:47:25,853 - INFO -   F1 Score: 0.7368
2025-12-18 11:47:25,853 - INFO - ================================================================================
2025-12-18 11:47:25,854 - INFO - 結果を保存: outputs/qt_50projects_irl/train_0-3m/eval_3-6m
2025-12-18 11:47:25,854 - INFO - 
【3/10】パターン実行中...
2025-12-18 11:47:25,854 - INFO - ================================================================================
2025-12-18 11:47:25,854 - INFO - パターン: 0-3m → 6-9m
2025-12-18 11:47:25,854 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:25,854 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:25,854 - INFO - ================================================================================
2025-12-18 11:47:25,854 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:25,869 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:25,869 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:25,869 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:25,869 - INFO - 将来窓設定: 0～30ヶ月
2025-12-18 11:47:25,869 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:25,869 - INFO - ================================================================================
2025-12-18 11:47:25,869 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:25,869 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:25,869 - INFO - 将来窓: 0～30ヶ月
2025-12-18 11:47:25,869 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:25,869 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:25,869 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:25,869 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:25,869 - INFO - ================================================================================
2025-12-18 11:47:25,869 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:25,869 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:25,870 - INFO - 特徴量計算期間内のレビュアー数: 70
2025-12-18 11:47:26,097 - INFO - ================================================================================
2025-12-18 11:47:26,097 - INFO - 軌跡抽出完了: 61サンプル（レビュアー）
2025-12-18 11:47:26,097 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:26,097 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-18 11:47:26,097 - INFO -   正例（この期間で承諾あり）: 54 (88.5%)
2025-12-18 11:47:26,097 - INFO -   負例（この期間で承諾なし）: 7 (11.5%)
2025-12-18 11:47:26,097 - INFO -     - 依頼あり→拒否（重み=1.0）: 7
2025-12-18 11:47:26,097 - INFO -   総ステップ数: 122
2025-12-18 11:47:26,097 - INFO -   継続ステップ率: 32.8% (40/122)
2025-12-18 11:47:26,097 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:26,098 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:26,099 - INFO - 訓練データ正例率: 88.5% (54/61)
2025-12-18 11:47:26,099 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:26,099 - INFO - 正例率 88.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:26,099 - INFO - IRLモデルを訓練...
2025-12-18 11:47:26,099 - INFO - ============================================================
2025-12-18 11:47:26,099 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:26,099 - INFO - 軌跡数: 61
2025-12-18 11:47:26,099 - INFO - エポック数: 50
2025-12-18 11:47:26,099 - INFO - ============================================================
2025-12-18 11:47:26,355 - INFO - エポック 0: 平均損失 = 1.1963
2025-12-18 11:47:27,390 - INFO - エポック 10: 平均損失 = 0.9798
2025-12-18 11:47:28,477 - INFO - エポック 20: 平均損失 = 0.9510
2025-12-18 11:47:29,392 - INFO - エポック 30: 平均損失 = 0.8990
2025-12-18 11:47:30,281 - INFO - エポック 40: 平均損失 = 0.8990
2025-12-18 11:47:31,118 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:31,119 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:31,142 - INFO - 最適閾値: 0.0191
2025-12-18 11:47:31,142 - INFO - 訓練データ性能: Precision=0.885, Recall=1.000, F1=0.939
2025-12-18 11:47:31,143 - INFO - モデルを保存: outputs/qt_50projects_irl/train_0-3m/irl_model.pt
2025-12-18 11:47:31,143 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-18 11:47:31,143 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:31,143 - INFO - ================================================================================
2025-12-18 11:47:31,143 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:31,143 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-18 11:47:31,143 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:31,143 - INFO - 将来窓: 27～30ヶ月
2025-12-18 11:47:31,143 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-18 11:47:31,143 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:31,143 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:31,143 - INFO - ================================================================================
2025-12-18 11:47:31,143 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:31,144 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:31,144 - INFO - 履歴期間内のレビュアー数: 70
2025-12-18 11:47:31,190 - INFO - ================================================================================
2025-12-18 11:47:31,190 - INFO - 評価用軌跡抽出完了: 34サンプル
2025-12-18 11:47:31,190 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:31,190 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 36
2025-12-18 11:47:31,190 - INFO -   正例（この期間で承諾あり）: 25 (73.5%)
2025-12-18 11:47:31,190 - INFO -   負例（この期間で承諾なし）: 9 (26.5%)
2025-12-18 11:47:31,190 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-18 11:47:31,190 - INFO - ================================================================================
2025-12-18 11:47:31,190 - INFO - 予測を実行...
2025-12-18 11:47:31,206 - INFO - ================================================================================
2025-12-18 11:47:31,206 - INFO - 評価結果 (0-3m → 6-9m):
2025-12-18 11:47:31,206 - INFO -   AUC-ROC: 0.5289
2025-12-18 11:47:31,206 - INFO -   AUC-PR: 0.7650
2025-12-18 11:47:31,206 - INFO -   Precision: 0.7353
2025-12-18 11:47:31,206 - INFO -   Recall: 1.0000
2025-12-18 11:47:31,206 - INFO -   F1 Score: 0.8475
2025-12-18 11:47:31,206 - INFO - ================================================================================
2025-12-18 11:47:31,207 - INFO - 結果を保存: outputs/qt_50projects_irl/train_0-3m/eval_6-9m
2025-12-18 11:47:31,208 - INFO - 
【4/10】パターン実行中...
2025-12-18 11:47:31,208 - INFO - ================================================================================
2025-12-18 11:47:31,208 - INFO - パターン: 0-3m → 9-12m
2025-12-18 11:47:31,208 - INFO - 訓練期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:31,208 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:31,208 - INFO - ================================================================================
2025-12-18 11:47:31,208 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:31,222 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:31,222 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:31,222 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:31,222 - INFO - 将来窓設定: 0～33ヶ月
2025-12-18 11:47:31,222 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:31,222 - INFO - ================================================================================
2025-12-18 11:47:31,222 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:31,222 - INFO - 訓練期間全体: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:31,222 - INFO - 将来窓: 0～33ヶ月
2025-12-18 11:47:31,222 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:31,222 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:31,222 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:31,222 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:31,222 - INFO - ================================================================================
2025-12-18 11:47:31,222 - INFO - 特徴量計算期間（訓練全体）: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:31,222 - INFO - 全体ラベル期間（train_end時点から）: 2021-04-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:31,223 - INFO - 特徴量計算期間内のレビュアー数: 70
2025-12-18 11:47:31,363 - INFO - ================================================================================
2025-12-18 11:47:31,363 - INFO - 軌跡抽出完了: 61サンプル（レビュアー）
2025-12-18 11:47:31,363 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:31,363 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-18 11:47:31,363 - INFO -   正例（この期間で承諾あり）: 54 (88.5%)
2025-12-18 11:47:31,363 - INFO -   負例（この期間で承諾なし）: 7 (11.5%)
2025-12-18 11:47:31,363 - INFO -     - 依頼あり→拒否（重み=1.0）: 7
2025-12-18 11:47:31,363 - INFO -   総ステップ数: 122
2025-12-18 11:47:31,363 - INFO -   継続ステップ率: 32.8% (40/122)
2025-12-18 11:47:31,363 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:31,364 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:31,364 - INFO - 訓練データ正例率: 88.5% (54/61)
2025-12-18 11:47:31,364 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:31,364 - INFO - 正例率 88.5% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:31,364 - INFO - IRLモデルを訓練...
2025-12-18 11:47:31,364 - INFO - ============================================================
2025-12-18 11:47:31,364 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:31,364 - INFO - 軌跡数: 61
2025-12-18 11:47:31,364 - INFO - エポック数: 50
2025-12-18 11:47:31,364 - INFO - ============================================================
2025-12-18 11:47:31,457 - INFO - エポック 0: 平均損失 = 1.1856
2025-12-18 11:47:32,392 - INFO - エポック 10: 平均損失 = 0.9806
2025-12-18 11:47:33,310 - INFO - エポック 20: 平均損失 = 0.9485
2025-12-18 11:47:34,270 - INFO - エポック 30: 平均損失 = 0.9009
2025-12-18 11:47:35,231 - INFO - エポック 40: 平均損失 = 0.8818
2025-12-18 11:47:36,059 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:36,059 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:36,082 - INFO - 最適閾値: 0.0062
2025-12-18 11:47:36,082 - INFO - 訓練データ性能: Precision=0.885, Recall=1.000, F1=0.939
2025-12-18 11:47:36,083 - INFO - モデルを保存: outputs/qt_50projects_irl/train_0-3m/irl_model.pt
2025-12-18 11:47:36,083 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_0-3m/optimal_threshold.json
2025-12-18 11:47:36,083 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:36,083 - INFO - ================================================================================
2025-12-18 11:47:36,083 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:36,083 - INFO - Cutoff日: 2021-04-01 00:00:00
2025-12-18 11:47:36,083 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:36,083 - INFO - 将来窓: 30～33ヶ月
2025-12-18 11:47:36,083 - INFO - 拡張ラベル期間: 30～12ヶ月
2025-12-18 11:47:36,083 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:36,083 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:36,083 - INFO - ================================================================================
2025-12-18 11:47:36,084 - INFO - 履歴期間: 2021-01-01 00:00:00 ～ 2021-04-01 00:00:00
2025-12-18 11:47:36,084 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:36,084 - INFO - 履歴期間内のレビュアー数: 70
2025-12-18 11:47:36,132 - INFO - ================================================================================
2025-12-18 11:47:36,132 - INFO - 評価用軌跡抽出完了: 38サンプル
2025-12-18 11:47:36,132 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:36,132 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 32
2025-12-18 11:47:36,132 - INFO -   正例（この期間で承諾あり）: 29 (76.3%)
2025-12-18 11:47:36,132 - INFO -   負例（この期間で承諾なし）: 9 (23.7%)
2025-12-18 11:47:36,132 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-18 11:47:36,132 - INFO - ================================================================================
2025-12-18 11:47:36,132 - INFO - 予測を実行...
2025-12-18 11:47:36,150 - INFO - ================================================================================
2025-12-18 11:47:36,150 - INFO - 評価結果 (0-3m → 9-12m):
2025-12-18 11:47:36,150 - INFO -   AUC-ROC: 0.6513
2025-12-18 11:47:36,150 - INFO -   AUC-PR: 0.8540
2025-12-18 11:47:36,150 - INFO -   Precision: 0.7632
2025-12-18 11:47:36,150 - INFO -   Recall: 1.0000
2025-12-18 11:47:36,150 - INFO -   F1 Score: 0.8657
2025-12-18 11:47:36,150 - INFO - ================================================================================
2025-12-18 11:47:36,151 - INFO - 結果を保存: outputs/qt_50projects_irl/train_0-3m/eval_9-12m
2025-12-18 11:47:36,152 - INFO - 
【5/10】パターン実行中...
2025-12-18 11:47:36,152 - INFO - ================================================================================
2025-12-18 11:47:36,152 - INFO - パターン: 3-6m → 3-6m
2025-12-18 11:47:36,152 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:36,152 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:36,152 - INFO - ================================================================================
2025-12-18 11:47:36,152 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:36,167 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:36,167 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:36,167 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:36,167 - INFO - 将来窓設定: 0～24ヶ月
2025-12-18 11:47:36,167 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:36,167 - INFO - ================================================================================
2025-12-18 11:47:36,167 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:36,167 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:36,167 - INFO - 将来窓: 0～24ヶ月
2025-12-18 11:47:36,167 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:36,167 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:36,167 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:36,167 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:36,167 - INFO - ================================================================================
2025-12-18 11:47:36,167 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:36,167 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:36,168 - INFO - 特徴量計算期間内のレビュアー数: 89
2025-12-18 11:47:36,348 - INFO - ================================================================================
2025-12-18 11:47:36,348 - INFO - 軌跡抽出完了: 80サンプル（レビュアー）
2025-12-18 11:47:36,348 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:36,348 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 9
2025-12-18 11:47:36,348 - INFO -   正例（この期間で承諾あり）: 71 (88.8%)
2025-12-18 11:47:36,349 - INFO -   負例（この期間で承諾なし）: 9 (11.2%)
2025-12-18 11:47:36,349 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-18 11:47:36,349 - INFO -   総ステップ数: 160
2025-12-18 11:47:36,349 - INFO -   継続ステップ率: 40.6% (65/160)
2025-12-18 11:47:36,349 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:36,349 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:36,349 - INFO - 訓練データ正例率: 88.8% (71/80)
2025-12-18 11:47:36,349 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:36,349 - INFO - 正例率 88.8% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:36,349 - INFO - IRLモデルを訓練...
2025-12-18 11:47:36,349 - INFO - ============================================================
2025-12-18 11:47:36,349 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:36,350 - INFO - 軌跡数: 80
2025-12-18 11:47:36,350 - INFO - エポック数: 50
2025-12-18 11:47:36,350 - INFO - ============================================================
2025-12-18 11:47:36,472 - INFO - エポック 0: 平均損失 = 1.1800
2025-12-18 11:47:37,691 - INFO - エポック 10: 平均損失 = 0.9406
2025-12-18 11:47:38,894 - INFO - エポック 20: 平均損失 = 0.8744
2025-12-18 11:47:40,081 - INFO - エポック 30: 平均損失 = 0.7985
2025-12-18 11:47:41,279 - INFO - エポック 40: 平均損失 = 0.7541
2025-12-18 11:47:42,366 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:42,366 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:42,405 - INFO - 最適閾値: 0.0154
2025-12-18 11:47:42,405 - INFO - 訓練データ性能: Precision=0.887, Recall=1.000, F1=0.940
2025-12-18 11:47:42,406 - INFO - モデルを保存: outputs/qt_50projects_irl/train_3-6m/irl_model.pt
2025-12-18 11:47:42,406 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-18 11:47:42,406 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:42,406 - INFO - ================================================================================
2025-12-18 11:47:42,406 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:42,406 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-18 11:47:42,406 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:42,406 - INFO - 将来窓: 21～24ヶ月
2025-12-18 11:47:42,406 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-18 11:47:42,406 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:42,406 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:42,406 - INFO - ================================================================================
2025-12-18 11:47:42,407 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:42,407 - INFO - 評価期間: 2023-04-01 00:00:00 ～ 2023-07-01 00:00:00
2025-12-18 11:47:42,407 - INFO - 履歴期間内のレビュアー数: 89
2025-12-18 11:47:42,462 - INFO - ================================================================================
2025-12-18 11:47:42,462 - INFO - 評価用軌跡抽出完了: 38サンプル
2025-12-18 11:47:42,462 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:42,462 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 51
2025-12-18 11:47:42,462 - INFO -   正例（この期間で承諾あり）: 22 (57.9%)
2025-12-18 11:47:42,462 - INFO -   負例（この期間で承諾なし）: 16 (42.1%)
2025-12-18 11:47:42,462 - INFO -     - 依頼あり→拒否（重み=1.0）: 16
2025-12-18 11:47:42,462 - INFO - ================================================================================
2025-12-18 11:47:42,462 - INFO - 予測を実行...
2025-12-18 11:47:42,486 - INFO - ================================================================================
2025-12-18 11:47:42,486 - INFO - 評価結果 (3-6m → 3-6m):
2025-12-18 11:47:42,486 - INFO -   AUC-ROC: 0.3409
2025-12-18 11:47:42,486 - INFO -   AUC-PR: 0.4995
2025-12-18 11:47:42,486 - INFO -   Precision: 0.5789
2025-12-18 11:47:42,486 - INFO -   Recall: 1.0000
2025-12-18 11:47:42,486 - INFO -   F1 Score: 0.7333
2025-12-18 11:47:42,486 - INFO - ================================================================================
2025-12-18 11:47:42,487 - INFO - 結果を保存: outputs/qt_50projects_irl/train_3-6m/eval_3-6m
2025-12-18 11:47:42,488 - INFO - 
【6/10】パターン実行中...
2025-12-18 11:47:42,488 - INFO - ================================================================================
2025-12-18 11:47:42,488 - INFO - パターン: 3-6m → 6-9m
2025-12-18 11:47:42,488 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:42,488 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:42,488 - INFO - ================================================================================
2025-12-18 11:47:42,488 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:42,501 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:42,502 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:42,502 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:42,502 - INFO - 将来窓設定: 0～27ヶ月
2025-12-18 11:47:42,502 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:42,502 - INFO - ================================================================================
2025-12-18 11:47:42,502 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:42,502 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:42,502 - INFO - 将来窓: 0～27ヶ月
2025-12-18 11:47:42,502 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:42,502 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:42,502 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:42,502 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:42,502 - INFO - ================================================================================
2025-12-18 11:47:42,502 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:42,502 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:42,503 - INFO - 特徴量計算期間内のレビュアー数: 89
2025-12-18 11:47:42,684 - INFO - ================================================================================
2025-12-18 11:47:42,684 - INFO - 軌跡抽出完了: 81サンプル（レビュアー）
2025-12-18 11:47:42,684 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:42,684 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 8
2025-12-18 11:47:42,684 - INFO -   正例（この期間で承諾あり）: 72 (88.9%)
2025-12-18 11:47:42,684 - INFO -   負例（この期間で承諾なし）: 9 (11.1%)
2025-12-18 11:47:42,684 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-18 11:47:42,684 - INFO -   総ステップ数: 162
2025-12-18 11:47:42,684 - INFO -   継続ステップ率: 41.4% (67/162)
2025-12-18 11:47:42,684 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:42,685 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:42,685 - INFO - 訓練データ正例率: 88.9% (72/81)
2025-12-18 11:47:42,685 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:42,685 - INFO - 正例率 88.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:42,685 - INFO - IRLモデルを訓練...
2025-12-18 11:47:42,685 - INFO - ============================================================
2025-12-18 11:47:42,685 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:42,685 - INFO - 軌跡数: 81
2025-12-18 11:47:42,685 - INFO - エポック数: 50
2025-12-18 11:47:42,685 - INFO - ============================================================
2025-12-18 11:47:42,809 - INFO - エポック 0: 平均損失 = 1.1521
2025-12-18 11:47:44,017 - INFO - エポック 10: 平均損失 = 0.9351
2025-12-18 11:47:45,247 - INFO - エポック 20: 平均損失 = 0.8528
2025-12-18 11:47:46,478 - INFO - エポック 30: 平均損失 = 0.8144
2025-12-18 11:47:47,597 - INFO - エポック 40: 平均損失 = 0.7417
2025-12-18 11:47:48,541 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:48,541 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:48,576 - INFO - 最適閾値: 0.0191
2025-12-18 11:47:48,576 - INFO - 訓練データ性能: Precision=0.889, Recall=1.000, F1=0.941
2025-12-18 11:47:48,577 - INFO - モデルを保存: outputs/qt_50projects_irl/train_3-6m/irl_model.pt
2025-12-18 11:47:48,577 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-18 11:47:48,577 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:48,577 - INFO - ================================================================================
2025-12-18 11:47:48,577 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:48,577 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-18 11:47:48,577 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:48,577 - INFO - 将来窓: 24～27ヶ月
2025-12-18 11:47:48,577 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-18 11:47:48,577 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:48,577 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:48,577 - INFO - ================================================================================
2025-12-18 11:47:48,577 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:48,577 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:48,578 - INFO - 履歴期間内のレビュアー数: 89
2025-12-18 11:47:48,629 - INFO - ================================================================================
2025-12-18 11:47:48,629 - INFO - 評価用軌跡抽出完了: 41サンプル
2025-12-18 11:47:48,629 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:48,629 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 48
2025-12-18 11:47:48,629 - INFO -   正例（この期間で承諾あり）: 30 (73.2%)
2025-12-18 11:47:48,629 - INFO -   負例（この期間で承諾なし）: 11 (26.8%)
2025-12-18 11:47:48,629 - INFO -     - 依頼あり→拒否（重み=1.0）: 11
2025-12-18 11:47:48,629 - INFO - ================================================================================
2025-12-18 11:47:48,629 - INFO - 予測を実行...
2025-12-18 11:47:48,652 - INFO - ================================================================================
2025-12-18 11:47:48,652 - INFO - 評価結果 (3-6m → 6-9m):
2025-12-18 11:47:48,652 - INFO -   AUC-ROC: 0.4030
2025-12-18 11:47:48,652 - INFO -   AUC-PR: 0.7340
2025-12-18 11:47:48,652 - INFO -   Precision: 0.7317
2025-12-18 11:47:48,652 - INFO -   Recall: 1.0000
2025-12-18 11:47:48,652 - INFO -   F1 Score: 0.8451
2025-12-18 11:47:48,652 - INFO - ================================================================================
2025-12-18 11:47:48,653 - INFO - 結果を保存: outputs/qt_50projects_irl/train_3-6m/eval_6-9m
2025-12-18 11:47:48,653 - INFO - 
【7/10】パターン実行中...
2025-12-18 11:47:48,653 - INFO - ================================================================================
2025-12-18 11:47:48,653 - INFO - パターン: 3-6m → 9-12m
2025-12-18 11:47:48,653 - INFO - 訓練期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:48,653 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:48,653 - INFO - ================================================================================
2025-12-18 11:47:48,653 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:48,665 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:48,665 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:48,665 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:48,665 - INFO - 将来窓設定: 0～30ヶ月
2025-12-18 11:47:48,665 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:48,665 - INFO - ================================================================================
2025-12-18 11:47:48,665 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:48,665 - INFO - 訓練期間全体: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:48,665 - INFO - 将来窓: 0～30ヶ月
2025-12-18 11:47:48,665 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:48,665 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:48,665 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:48,665 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:48,665 - INFO - ================================================================================
2025-12-18 11:47:48,665 - INFO - 特徴量計算期間（訓練全体）: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:48,665 - INFO - 全体ラベル期間（train_end時点から）: 2021-07-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:48,666 - INFO - 特徴量計算期間内のレビュアー数: 89
2025-12-18 11:47:48,828 - INFO - ================================================================================
2025-12-18 11:47:48,828 - INFO - 軌跡抽出完了: 81サンプル（レビュアー）
2025-12-18 11:47:48,828 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:48,828 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 8
2025-12-18 11:47:48,828 - INFO -   正例（この期間で承諾あり）: 72 (88.9%)
2025-12-18 11:47:48,828 - INFO -   負例（この期間で承諾なし）: 9 (11.1%)
2025-12-18 11:47:48,828 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-18 11:47:48,828 - INFO -   総ステップ数: 162
2025-12-18 11:47:48,828 - INFO -   継続ステップ率: 41.4% (67/162)
2025-12-18 11:47:48,828 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:48,829 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:48,829 - INFO - 訓練データ正例率: 88.9% (72/81)
2025-12-18 11:47:48,829 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:48,829 - INFO - 正例率 88.9% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:48,829 - INFO - IRLモデルを訓練...
2025-12-18 11:47:48,829 - INFO - ============================================================
2025-12-18 11:47:48,829 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:48,829 - INFO - 軌跡数: 81
2025-12-18 11:47:48,829 - INFO - エポック数: 50
2025-12-18 11:47:48,829 - INFO - ============================================================
2025-12-18 11:47:48,937 - INFO - エポック 0: 平均損失 = 1.1515
2025-12-18 11:47:49,976 - INFO - エポック 10: 平均損失 = 0.8962
2025-12-18 11:47:51,011 - INFO - エポック 20: 平均損失 = 0.8233
2025-12-18 11:47:52,037 - INFO - エポック 30: 平均損失 = 0.8190
2025-12-18 11:47:53,071 - INFO - エポック 40: 平均損失 = 0.7782
2025-12-18 11:47:53,993 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:53,993 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:54,027 - INFO - 最適閾値: 0.0105
2025-12-18 11:47:54,027 - INFO - 訓練データ性能: Precision=0.889, Recall=1.000, F1=0.941
2025-12-18 11:47:54,028 - INFO - モデルを保存: outputs/qt_50projects_irl/train_3-6m/irl_model.pt
2025-12-18 11:47:54,028 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_3-6m/optimal_threshold.json
2025-12-18 11:47:54,028 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:54,028 - INFO - ================================================================================
2025-12-18 11:47:54,028 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:54,028 - INFO - Cutoff日: 2021-07-01 00:00:00
2025-12-18 11:47:54,028 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:54,028 - INFO - 将来窓: 27～30ヶ月
2025-12-18 11:47:54,028 - INFO - 拡張ラベル期間: 27～12ヶ月
2025-12-18 11:47:54,028 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:54,028 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:54,028 - INFO - ================================================================================
2025-12-18 11:47:54,028 - INFO - 履歴期間: 2021-04-01 00:00:00 ～ 2021-07-01 00:00:00
2025-12-18 11:47:54,028 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:54,029 - INFO - 履歴期間内のレビュアー数: 89
2025-12-18 11:47:54,082 - INFO - ================================================================================
2025-12-18 11:47:54,082 - INFO - 評価用軌跡抽出完了: 43サンプル
2025-12-18 11:47:54,082 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:54,082 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 46
2025-12-18 11:47:54,082 - INFO -   正例（この期間で承諾あり）: 30 (69.8%)
2025-12-18 11:47:54,082 - INFO -   負例（この期間で承諾なし）: 13 (30.2%)
2025-12-18 11:47:54,082 - INFO -     - 依頼あり→拒否（重み=1.0）: 13
2025-12-18 11:47:54,082 - INFO - ================================================================================
2025-12-18 11:47:54,082 - INFO - 予測を実行...
2025-12-18 11:47:54,105 - INFO - ================================================================================
2025-12-18 11:47:54,105 - INFO - 評価結果 (3-6m → 9-12m):
2025-12-18 11:47:54,105 - INFO -   AUC-ROC: 0.3949
2025-12-18 11:47:54,105 - INFO -   AUC-PR: 0.6281
2025-12-18 11:47:54,105 - INFO -   Precision: 0.6977
2025-12-18 11:47:54,105 - INFO -   Recall: 1.0000
2025-12-18 11:47:54,105 - INFO -   F1 Score: 0.8219
2025-12-18 11:47:54,105 - INFO - ================================================================================
2025-12-18 11:47:54,106 - INFO - 結果を保存: outputs/qt_50projects_irl/train_3-6m/eval_9-12m
2025-12-18 11:47:54,106 - INFO - 
【8/10】パターン実行中...
2025-12-18 11:47:54,106 - INFO - ================================================================================
2025-12-18 11:47:54,106 - INFO - パターン: 6-9m → 6-9m
2025-12-18 11:47:54,106 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:54,106 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:54,106 - INFO - ================================================================================
2025-12-18 11:47:54,106 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:54,118 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:54,118 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:54,118 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:54,118 - INFO - 将来窓設定: 0～24ヶ月
2025-12-18 11:47:54,118 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:54,118 - INFO - ================================================================================
2025-12-18 11:47:54,118 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:54,118 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:54,118 - INFO - 将来窓: 0～24ヶ月
2025-12-18 11:47:54,118 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:54,118 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:54,118 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:54,118 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:54,118 - INFO - ================================================================================
2025-12-18 11:47:54,118 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:54,118 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:54,119 - INFO - 特徴量計算期間内のレビュアー数: 73
2025-12-18 11:47:54,251 - INFO - ================================================================================
2025-12-18 11:47:54,251 - INFO - 軌跡抽出完了: 67サンプル（レビュアー）
2025-12-18 11:47:54,251 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:54,251 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 6
2025-12-18 11:47:54,251 - INFO -   正例（この期間で承諾あり）: 57 (85.1%)
2025-12-18 11:47:54,251 - INFO -   負例（この期間で承諾なし）: 10 (14.9%)
2025-12-18 11:47:54,251 - INFO -     - 依頼あり→拒否（重み=1.0）: 10
2025-12-18 11:47:54,251 - INFO -   総ステップ数: 134
2025-12-18 11:47:54,251 - INFO -   継続ステップ率: 44.8% (60/134)
2025-12-18 11:47:54,251 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:54,252 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:54,252 - INFO - 訓練データ正例率: 85.1% (57/67)
2025-12-18 11:47:54,252 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:54,252 - INFO - 正例率 85.1% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:54,252 - INFO - IRLモデルを訓練...
2025-12-18 11:47:54,252 - INFO - ============================================================
2025-12-18 11:47:54,252 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:54,252 - INFO - 軌跡数: 67
2025-12-18 11:47:54,252 - INFO - エポック数: 50
2025-12-18 11:47:54,252 - INFO - ============================================================
2025-12-18 11:47:54,340 - INFO - エポック 0: 平均損失 = 1.1581
2025-12-18 11:47:55,186 - INFO - エポック 10: 平均損失 = 1.1417
2025-12-18 11:47:56,012 - INFO - エポック 20: 平均損失 = 1.0809
2025-12-18 11:47:56,836 - INFO - エポック 30: 平均損失 = 1.0452
2025-12-18 11:47:57,660 - INFO - エポック 40: 平均損失 = 1.0455
2025-12-18 11:47:58,399 - INFO - 時系列IRL訓練完了
2025-12-18 11:47:58,399 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:47:58,425 - INFO - 最適閾値: 0.0852
2025-12-18 11:47:58,425 - INFO - 訓練データ性能: Precision=0.851, Recall=1.000, F1=0.919
2025-12-18 11:47:58,426 - INFO - モデルを保存: outputs/qt_50projects_irl/train_6-9m/irl_model.pt
2025-12-18 11:47:58,426 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_6-9m/optimal_threshold.json
2025-12-18 11:47:58,426 - INFO - 評価用軌跡を抽出...
2025-12-18 11:47:58,426 - INFO - ================================================================================
2025-12-18 11:47:58,426 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:47:58,426 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-18 11:47:58,426 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:47:58,426 - INFO - 将来窓: 21～24ヶ月
2025-12-18 11:47:58,426 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-18 11:47:58,426 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:58,426 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:47:58,426 - INFO - ================================================================================
2025-12-18 11:47:58,427 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:58,427 - INFO - 評価期間: 2023-07-01 00:00:00 ～ 2023-10-01 00:00:00
2025-12-18 11:47:58,427 - INFO - 履歴期間内のレビュアー数: 73
2025-12-18 11:47:58,471 - INFO - ================================================================================
2025-12-18 11:47:58,471 - INFO - 評価用軌跡抽出完了: 38サンプル
2025-12-18 11:47:58,471 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:58,471 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 35
2025-12-18 11:47:58,471 - INFO -   正例（この期間で承諾あり）: 29 (76.3%)
2025-12-18 11:47:58,471 - INFO -   負例（この期間で承諾なし）: 9 (23.7%)
2025-12-18 11:47:58,471 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-18 11:47:58,471 - INFO - ================================================================================
2025-12-18 11:47:58,471 - INFO - 予測を実行...
2025-12-18 11:47:58,489 - INFO - ================================================================================
2025-12-18 11:47:58,489 - INFO - 評価結果 (6-9m → 6-9m):
2025-12-18 11:47:58,489 - INFO -   AUC-ROC: 0.4828
2025-12-18 11:47:58,489 - INFO -   AUC-PR: 0.8051
2025-12-18 11:47:58,489 - INFO -   Precision: 0.7632
2025-12-18 11:47:58,490 - INFO -   Recall: 1.0000
2025-12-18 11:47:58,490 - INFO -   F1 Score: 0.8657
2025-12-18 11:47:58,490 - INFO - ================================================================================
2025-12-18 11:47:58,490 - INFO - 結果を保存: outputs/qt_50projects_irl/train_6-9m/eval_6-9m
2025-12-18 11:47:58,491 - INFO - 
【9/10】パターン実行中...
2025-12-18 11:47:58,491 - INFO - ================================================================================
2025-12-18 11:47:58,491 - INFO - パターン: 6-9m → 9-12m
2025-12-18 11:47:58,491 - INFO - 訓練期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:58,491 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:58,491 - INFO - ================================================================================
2025-12-18 11:47:58,491 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:47:58,502 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:47:58,502 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:47:58,502 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:47:58,502 - INFO - 将来窓設定: 0～27ヶ月
2025-12-18 11:47:58,502 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:47:58,502 - INFO - ================================================================================
2025-12-18 11:47:58,502 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:47:58,502 - INFO - 訓練期間全体: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:58,502 - INFO - 将来窓: 0～27ヶ月
2025-12-18 11:47:58,502 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:47:58,502 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:47:58,502 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:47:58,503 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:47:58,503 - INFO - ================================================================================
2025-12-18 11:47:58,503 - INFO - 特徴量計算期間（訓練全体）: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:47:58,503 - INFO - 全体ラベル期間（train_end時点から）: 2021-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:47:58,503 - INFO - 特徴量計算期間内のレビュアー数: 73
2025-12-18 11:47:58,636 - INFO - ================================================================================
2025-12-18 11:47:58,636 - INFO - 軌跡抽出完了: 68サンプル（レビュアー）
2025-12-18 11:47:58,636 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:47:58,636 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 5
2025-12-18 11:47:58,636 - INFO -   正例（この期間で承諾あり）: 58 (85.3%)
2025-12-18 11:47:58,636 - INFO -   負例（この期間で承諾なし）: 10 (14.7%)
2025-12-18 11:47:58,636 - INFO -     - 依頼あり→拒否（重み=1.0）: 10
2025-12-18 11:47:58,636 - INFO -   総ステップ数: 136
2025-12-18 11:47:58,636 - INFO -   継続ステップ率: 44.1% (60/136)
2025-12-18 11:47:58,636 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:47:58,637 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:47:58,637 - INFO - 訓練データ正例率: 85.3% (58/68)
2025-12-18 11:47:58,637 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:47:58,637 - INFO - 正例率 85.3% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:47:58,637 - INFO - IRLモデルを訓練...
2025-12-18 11:47:58,637 - INFO - ============================================================
2025-12-18 11:47:58,637 - INFO - 時系列IRL訓練開始
2025-12-18 11:47:58,637 - INFO - 軌跡数: 68
2025-12-18 11:47:58,637 - INFO - エポック数: 50
2025-12-18 11:47:58,637 - INFO - ============================================================
2025-12-18 11:47:58,723 - INFO - エポック 0: 平均損失 = 1.2247
2025-12-18 11:47:59,543 - INFO - エポック 10: 平均損失 = 1.1255
2025-12-18 11:48:00,364 - INFO - エポック 20: 平均損失 = 1.0760
2025-12-18 11:48:01,190 - INFO - エポック 30: 平均損失 = 1.0556
2025-12-18 11:48:02,009 - INFO - エポック 40: 平均損失 = 1.0482
2025-12-18 11:48:02,750 - INFO - 時系列IRL訓練完了
2025-12-18 11:48:02,750 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:48:02,776 - INFO - 最適閾値: 0.0815
2025-12-18 11:48:02,776 - INFO - 訓練データ性能: Precision=0.853, Recall=1.000, F1=0.921
2025-12-18 11:48:02,778 - INFO - モデルを保存: outputs/qt_50projects_irl/train_6-9m/irl_model.pt
2025-12-18 11:48:02,778 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_6-9m/optimal_threshold.json
2025-12-18 11:48:02,778 - INFO - 評価用軌跡を抽出...
2025-12-18 11:48:02,778 - INFO - ================================================================================
2025-12-18 11:48:02,778 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:48:02,778 - INFO - Cutoff日: 2021-10-01 00:00:00
2025-12-18 11:48:02,778 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:48:02,778 - INFO - 将来窓: 24～27ヶ月
2025-12-18 11:48:02,778 - INFO - 拡張ラベル期間: 24～12ヶ月
2025-12-18 11:48:02,778 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:48:02,778 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:48:02,778 - INFO - ================================================================================
2025-12-18 11:48:02,778 - INFO - 履歴期間: 2021-07-01 00:00:00 ～ 2021-10-01 00:00:00
2025-12-18 11:48:02,778 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:48:02,779 - INFO - 履歴期間内のレビュアー数: 73
2025-12-18 11:48:02,824 - INFO - ================================================================================
2025-12-18 11:48:02,824 - INFO - 評価用軌跡抽出完了: 39サンプル
2025-12-18 11:48:02,824 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:48:02,824 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 34
2025-12-18 11:48:02,824 - INFO -   正例（この期間で承諾あり）: 31 (79.5%)
2025-12-18 11:48:02,824 - INFO -   負例（この期間で承諾なし）: 8 (20.5%)
2025-12-18 11:48:02,824 - INFO -     - 依頼あり→拒否（重み=1.0）: 8
2025-12-18 11:48:02,824 - INFO - ================================================================================
2025-12-18 11:48:02,824 - INFO - 予測を実行...
2025-12-18 11:48:02,843 - INFO - ================================================================================
2025-12-18 11:48:02,843 - INFO - 評価結果 (6-9m → 9-12m):
2025-12-18 11:48:02,843 - INFO -   AUC-ROC: 0.5040
2025-12-18 11:48:02,843 - INFO -   AUC-PR: 0.8271
2025-12-18 11:48:02,843 - INFO -   Precision: 0.7949
2025-12-18 11:48:02,843 - INFO -   Recall: 1.0000
2025-12-18 11:48:02,843 - INFO -   F1 Score: 0.8857
2025-12-18 11:48:02,843 - INFO - ================================================================================
2025-12-18 11:48:02,843 - INFO - 結果を保存: outputs/qt_50projects_irl/train_6-9m/eval_9-12m
2025-12-18 11:48:02,844 - INFO - 
【10/10】パターン実行中...
2025-12-18 11:48:02,844 - INFO - ================================================================================
2025-12-18 11:48:02,844 - INFO - パターン: 9-12m → 9-12m
2025-12-18 11:48:02,844 - INFO - 訓練期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-18 11:48:02,844 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:48:02,844 - INFO - ================================================================================
2025-12-18 11:48:02,844 - INFO - レビュー依頼データを読み込み: data/qt_50proj_2021_2024_feat.csv
2025-12-18 11:48:02,855 - INFO - 総レビュー依頼数: 3121
2025-12-18 11:48:02,856 - INFO - 承諾数: 1366 (43.8%)
2025-12-18 11:48:02,856 - INFO - 拒否数: 1755 (56.2%)
2025-12-18 11:48:02,856 - INFO - 将来窓設定: 0～24ヶ月
2025-12-18 11:48:02,856 - INFO - 訓練用軌跡を抽出...
2025-12-18 11:48:02,856 - INFO - ================================================================================
2025-12-18 11:48:02,856 - INFO - レビュー承諾予測用軌跡抽出を開始（データリークなし版）
2025-12-18 11:48:02,856 - INFO - 訓練期間全体: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-18 11:48:02,856 - INFO - 将来窓: 0～24ヶ月
2025-12-18 11:48:02,856 - INFO - 拡張ラベル期間: 0～12ヶ月
2025-12-18 11:48:02,856 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:48:02,856 - INFO - ラベル定義: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、訓練時は拡張期間にも依頼なしで除外
2025-12-18 11:48:02,856 - INFO - データリーク防止: 訓練期間内でラベル計算
2025-12-18 11:48:02,856 - INFO - ================================================================================
2025-12-18 11:48:02,856 - INFO - 特徴量計算期間（訓練全体）: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-18 11:48:02,856 - INFO - 全体ラベル期間（train_end時点から）: 2022-01-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:48:02,857 - INFO - 特徴量計算期間内のレビュアー数: 84
2025-12-18 11:48:02,998 - INFO - ================================================================================
2025-12-18 11:48:02,998 - INFO - 軌跡抽出完了: 71サンプル（レビュアー）
2025-12-18 11:48:02,998 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:48:02,998 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 13
2025-12-18 11:48:02,998 - INFO -   正例（この期間で承諾あり）: 62 (87.3%)
2025-12-18 11:48:02,998 - INFO -   負例（この期間で承諾なし）: 9 (12.7%)
2025-12-18 11:48:02,998 - INFO -     - 依頼あり→拒否（重み=1.0）: 9
2025-12-18 11:48:02,998 - INFO -   総ステップ数: 142
2025-12-18 11:48:02,998 - INFO -   継続ステップ率: 41.5% (59/142)
2025-12-18 11:48:02,998 - INFO - ================================================================================
/Users/kazuki-h/research/multiproject_research/.venv/lib/python3.13/site-packages/torch/nn/modules/rnn.py:123: UserWarning: dropout option adds dropout after all but last recurrent layer, so non-zero dropout expects num_layers greater than 1, but got dropout=0.2 and num_layers=1
  warnings.warn(
2025-12-18 11:48:02,999 - INFO - 継続予測IRLシステムを初期化しました
2025-12-18 11:48:02,999 - INFO - 訓練データ正例率: 87.3% (62/71)
2025-12-18 11:48:02,999 - INFO - Focal Loss パラメータ更新: alpha=0.400, gamma=1.000
2025-12-18 11:48:02,999 - INFO - 正例率 87.3% に基づき自動調整: バランス重視（正例率≥60%・軽い正例優先)
2025-12-18 11:48:02,999 - INFO - IRLモデルを訓練...
2025-12-18 11:48:02,999 - INFO - ============================================================
2025-12-18 11:48:02,999 - INFO - 時系列IRL訓練開始
2025-12-18 11:48:02,999 - INFO - 軌跡数: 71
2025-12-18 11:48:02,999 - INFO - エポック数: 50
2025-12-18 11:48:02,999 - INFO - ============================================================
2025-12-18 11:48:03,089 - INFO - エポック 0: 平均損失 = 1.2032
2025-12-18 11:48:03,960 - INFO - エポック 10: 平均損失 = 1.0673
2025-12-18 11:48:04,823 - INFO - エポック 20: 平均損失 = 1.0463
2025-12-18 11:48:05,748 - INFO - エポック 30: 平均損失 = 0.9995
2025-12-18 11:48:06,629 - INFO - エポック 40: 平均損失 = 0.9695
2025-12-18 11:48:07,418 - INFO - 時系列IRL訓練完了
2025-12-18 11:48:07,418 - INFO - 訓練データ上で最適閾値を決定...
2025-12-18 11:48:07,445 - INFO - 最適閾値: 0.0144
2025-12-18 11:48:07,445 - INFO - 訓練データ性能: Precision=0.873, Recall=1.000, F1=0.932
2025-12-18 11:48:07,446 - INFO - モデルを保存: outputs/qt_50projects_irl/train_9-12m/irl_model.pt
2025-12-18 11:48:07,446 - INFO - 最適閾値を保存: outputs/qt_50projects_irl/train_9-12m/optimal_threshold.json
2025-12-18 11:48:07,446 - INFO - 評価用軌跡を抽出...
2025-12-18 11:48:07,446 - INFO - ================================================================================
2025-12-18 11:48:07,446 - INFO - 評価用軌跡抽出を開始（スナップショット特徴量用）
2025-12-18 11:48:07,446 - INFO - Cutoff日: 2022-01-01 00:00:00
2025-12-18 11:48:07,446 - INFO - 履歴ウィンドウ: 3ヶ月
2025-12-18 11:48:07,446 - INFO - 将来窓: 21～24ヶ月
2025-12-18 11:48:07,446 - INFO - 拡張ラベル期間: 21～12ヶ月
2025-12-18 11:48:07,446 - INFO - プロジェクト: 全プロジェクト
2025-12-18 11:48:07,446 - INFO - 継続判定: この期間で承諾=1、この期間で拒否=0、依頼なし→拡張期間チェック、評価時は拡張期間にも依頼なしで除外（予測の母集団に入れない）
2025-12-18 11:48:07,446 - INFO - ================================================================================
2025-12-18 11:48:07,446 - INFO - 履歴期間: 2021-10-01 00:00:00 ～ 2022-01-01 00:00:00
2025-12-18 11:48:07,446 - INFO - 評価期間: 2023-10-01 00:00:00 ～ 2024-01-01 00:00:00
2025-12-18 11:48:07,447 - INFO - 履歴期間内のレビュアー数: 84
2025-12-18 11:48:07,497 - INFO - ================================================================================
2025-12-18 11:48:07,497 - INFO - 評価用軌跡抽出完了: 42サンプル
2025-12-18 11:48:07,497 - INFO -   スキップ（最小依頼数未満）: 0
2025-12-18 11:48:07,497 - INFO -   スキップ（訓練期間末尾まで依頼なし）: 42
2025-12-18 11:48:07,497 - INFO -   正例（この期間で承諾あり）: 29 (69.0%)
2025-12-18 11:48:07,497 - INFO -   負例（この期間で承諾なし）: 13 (31.0%)
2025-12-18 11:48:07,497 - INFO -     - 依頼あり→拒否（重み=1.0）: 13
2025-12-18 11:48:07,497 - INFO - ================================================================================
2025-12-18 11:48:07,497 - INFO - 予測を実行...
2025-12-18 11:48:07,517 - INFO - ================================================================================
2025-12-18 11:48:07,517 - INFO - 評価結果 (9-12m → 9-12m):
2025-12-18 11:48:07,517 - INFO -   AUC-ROC: 0.3090
2025-12-18 11:48:07,517 - INFO -   AUC-PR: 0.5770
2025-12-18 11:48:07,517 - INFO -   Precision: 0.6905
2025-12-18 11:48:07,517 - INFO -   Recall: 1.0000
2025-12-18 11:48:07,517 - INFO -   F1 Score: 0.8169
2025-12-18 11:48:07,517 - INFO - ================================================================================
2025-12-18 11:48:07,518 - INFO - 結果を保存: outputs/qt_50projects_irl/train_9-12m/eval_9-12m
2025-12-18 11:48:07,518 - INFO - ================================================================================
2025-12-18 11:48:07,519 - INFO - メトリクスマトリクスを作成中...
2025-12-18 11:48:07,519 - INFO - ================================================================================
2025-12-18 11:48:07,521 - INFO - 保存: outputs/qt_50projects_irl/matrix_AUC_ROC.csv
2025-12-18 11:48:07,523 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.521368  0.806349  0.528889  0.651341
3-6m        NaN  0.340909  0.403030  0.394872
6-9m        NaN       NaN  0.482759  0.504032
9-12m       NaN       NaN       NaN  0.309019
2025-12-18 11:48:07,523 - INFO - 保存: outputs/qt_50projects_irl/matrix_AUC_PR.csv
2025-12-18 11:48:07,524 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.568445  0.843062  0.765029  0.854027
3-6m        NaN  0.499530  0.734007  0.628143
6-9m        NaN       NaN  0.805092  0.827091
9-12m       NaN       NaN       NaN  0.577050
2025-12-18 11:48:07,524 - INFO - 保存: outputs/qt_50projects_irl/matrix_PRECISION.csv
2025-12-18 11:48:07,525 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.590909  0.583333  0.735294  0.763158
3-6m        NaN  0.578947  0.731707  0.697674
6-9m        NaN       NaN  0.763158  0.794872
9-12m       NaN       NaN       NaN  0.690476
2025-12-18 11:48:07,525 - INFO - 保存: outputs/qt_50projects_irl/matrix_RECALL.csv
2025-12-18 11:48:07,527 - INFO - 
       0-3m  3-6m  6-9m  9-12m
0-3m    1.0   1.0   1.0    1.0
3-6m    NaN   1.0   1.0    1.0
6-9m    NaN   NaN   1.0    1.0
9-12m   NaN   NaN   NaN    1.0
2025-12-18 11:48:07,527 - INFO - 保存: outputs/qt_50projects_irl/matrix_f1_score.csv
2025-12-18 11:48:07,528 - INFO - 
           0-3m      3-6m      6-9m     9-12m
0-3m   0.742857  0.736842  0.847458  0.865672
3-6m        NaN  0.733333  0.845070  0.821918
6-9m        NaN       NaN  0.865672  0.885714
9-12m       NaN       NaN       NaN  0.816901
2025-12-18 11:48:07,528 - INFO - ================================================================================
2025-12-18 11:48:07,528 - INFO - マトリクス作成完了
2025-12-18 11:48:07,528 - INFO - ================================================================================
2025-12-18 11:48:07,528 - INFO - ================================================================================
2025-12-18 11:48:07,528 - INFO - 全パターンの訓練・評価が完了しました
2025-12-18 11:48:07,528 - INFO - 結果: outputs/qt_50projects_irl
2025-12-18 11:48:07,528 - INFO - ================================================================================
