# セクション6.3: IRL/RFの予測特性の違い（強化版）

## データソース

- `outputs/rf_vs_irl_nova_summary/coverage/irl_only_hit_any_split_summary.md`
- `outputs/rf_vs_irl_nova_summary/coverage/rf_only_hit_any_split_summary.md`
- `outputs/rf_vs_irl_nova_summary/coverage/coverage_summary_all.csv`

---

## 1. ベン図的な整理

### 全体像（10パターンの合計）

```
┌─────────────────────────────────────────────────────────┐
│                    全開発者                              │
│  ┌─────────────────┬──────────────┬─────────────────┐   │
│  │   IRLのみ正解    │   両方正解    │   RFのみ正解    │   │
│  │     13人        │    〜13人     │     13人       │   │
│  │                 │              │                │   │
│  │  Heavy-Low: 5   │              │  3-6m学習で    │   │
│  │  Heavy-Mid: 6   │              │  多く発生      │   │
│  │  Light-Mid: 1   │              │                │   │
│  │  Light-High: 1  │              │                │   │
│  └─────────────────┴──────────────┴─────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

### スプリット別のベン図データ

| 訓練→評価 | IRLのみ正解 | RFのみ正解 | 両方正解 | 合計 |
|-----------|-------------|------------|----------|------|
| 0-3m→0-3m | 10人 | 8人 | 13人 | 31人 |
| 0-3m→3-6m | 10人 | 7人 | 12人 | 29人 |
| 3-6m→3-6m | 1人 | **32人** | 12人 | 45人 |
| 9-12m→9-12m | **15人** | 6人 | 13人 | 34人 |

**発見**:
- 3-6m学習ではRFが圧倒的に有利（32人）
- 9-12m学習ではIRLが有利（15人）

---

## 2. 特徴量による分類（2×2マトリクス）

### 活動量 × 承諾率による4象限

```
                    承諾率
              低(≤15%)    高(≥20%)
         ┌──────────┬──────────┐
  多     │ Heavy-   │ Heavy-   │
活(≥50件) │  Low     │  High    │
動       │  (5人)   │  (0人)   │
量       ├──────────┼──────────┤
  少     │ Light-   │ Light-   │
 (<20件) │  Low     │  High    │
         │  (0人)   │  (1人)   │
         └──────────┴──────────┘

  → IRLのみ正解した13人の分布
```

### IRLが得意なパターン

| パターン | 件数 | 特徴 | RFの失敗理由 |
|----------|------|------|-------------|
| Heavy-Low | 5人 | 多依頼・低承諾 | 量に引っ張られて偽陽性 |
| Heavy-Mid | 6人 | 多依頼・中承諾 | 時系列変動を見落とし |
| Light-High | 1人 | 少依頼・高承諾 | 量が少なく偽陰性 |

### RFが得意なパターン

- **3-6m学習期間**で多く発生
- IRLが保守的すぎて見落とすケース
- 例: kchamart@redhat.com は9スプリット中8でRFのみ正解

---

## 3. 具体的な開発者分析

### 典型例1: openstack@lightbitslabs.com（Heavy-Low）

**特徴量:**
| 項目 | 値 |
|------|-----|
| 評価レビュー数 | 313件（多い） |
| 受理率 | 0.0%（極端に低い） |
| 履歴レビュー数 | 5,630件（非常に多い） |
| 履歴受理率 | 0.5% |

**予測結果:**
| 訓練→評価 | 実際 | IRL | RF |
|-----------|------|-----|-----|
| 0-3m→0-3m | 離脱 | 0.46(離脱)✓ | 0.56(継続)✗ |
| 0-3m→3-6m | 離脱 | 0.46(離脱)✓ | 0.56(継続)✗ |
| 3-6m→3-6m | 離脱 | 0.46(離脱)✓ | 0.71(継続)✗ |

**解釈**:
- RFは「レビュー数5,630件」という**量**を見て継続と判断
- IRLは「受理率0.5%」という**質**を見て離脱と判断
- → **IRLは量と質のバランスを学習している**

---

### 典型例2: kchamart@redhat.com（RFが得意）

**特徴量:**
| 項目 | 値 |
|------|-----|
| 評価レビュー数 | 中程度 |
| 受理率 | 中程度 |

**予測結果:**
| 訓練→評価 | 実際 | IRL | RF |
|-----------|------|-----|-----|
| 0-3m→0-3m | 継続 | 0.45(離脱)✗ | 0.61(継続)✓ |
| 3-6m→3-6m | 継続 | 0.46(離脱)✗ | 0.70(継続)✓ |
| 9-12m→9-12m | 継続 | 0.47(継続)✓ | 0.59(継続)✓ |

**解釈**:
- IRLは0-3m、3-6m学習では保守的すぎて見落とし
- 9-12m学習では両方正解
- → **IRLは長期学習で改善される傾向**

---

### 典型例3: john.garbutt@stackhpc.com（複雑なケース）

**状況によってIRL/RFそれぞれが正解する開発者**

| 訓練→評価 | 実際 | IRL | RF | 正解 |
|-----------|------|-----|-----|------|
| 0-3m→0-3m | 継続 | 0.47(継続) | 0.61(継続) | 両方 |
| 0-3m→3-6m | 離脱 | 0.47(継続)✗ | 0.61(継続)✗ | なし |
| 3-6m→6-9m | 継続 | 0.47(離脱)✗ | 0.74(継続)✓ | RF |
| 6-9m→9-12m | 離脱 | 0.47(離脱)✓ | 0.78(継続)✗ | IRL |

**解釈**:
- この開発者は活動パターンが変動的
- RFは一貫して高い継続確率を出力（0.61〜0.78）
- IRLは0.47付近で変動
- → **IRLは変動を捉え、RFは平均に収束**

---

## 4. 特徴量の分布比較

### IRLのみ正解した開発者（13人）

| 特徴量 | 平均 | 傾向 |
|--------|------|------|
| 履歴レビュー数 | 高い | Heavy層が多い |
| 履歴受理率 | 低い | Low層が多い |
| 直近30日レビュー数 | 変動大 | 活動の波がある |
| プロジェクト在籍日数 | 長い | ベテランが多い |

### RFのみ正解した開発者（13人）

| 特徴量 | 平均 | 傾向 |
|--------|------|------|
| 履歴レビュー数 | 中程度 | 安定した活動 |
| 履歴受理率 | 中程度 | 極端でない |
| 直近30日レビュー数 | 安定 | 活動が一定 |
| プロジェクト在籍日数 | 様々 | 特徴なし |

---

## 5. 考察の結論

### IRLとRFの特性の違い

| | IRL | RF |
|--|-----|-----|
| 重視する特徴 | 時系列パターン・承諾率 | 量的特徴・平均値 |
| 得意なケース | Heavy-Low、変動的な開発者 | 安定した中間層 |
| 苦手なケース | 安定した継続者（保守的すぎる） | 量は多いが質が低い開発者 |
| 学習期間の影響 | 長期で改善 | 3-6mで最適 |

### LaTeX修正案

```latex
\section{IRL/RFにおける予測特性の違い}

図\ref{fig:venn_diagram}に，IRLとRFの正解パターンをベン図で示す．
全10パターンの評価において，IRLのみが正解した開発者は延べ60件，
RFのみが正解した開発者は延べ119件，両方が正解した開発者は延べ107件であった．
特に3-6m学習期間ではRFのみ正解が32件と多く，
9-12m学習期間ではIRLのみ正解が15件と多かった．

IRLのみが正解した13人の開発者を活動量と承諾率で分類した結果，
50\%以上（6人）がHeavy-Mid（多依頼・中承諾率），
38\%（5人）がHeavy-Low（多依頼・低承諾率）に分類された（表\ref{tab:developer_matrix}）．
これらの開発者はレビュー依頼数が50件以上と多いにも関わらず，
承諾率が低〜中程度であり，RFは量に引っ張られて継続と誤判定する傾向があった．

具体例として，開発者Aは履歴レビュー数が5,630件と非常に多いが，
承諾率は0.5\%と極端に低かった．RFはすべてのスプリットで
継続確率0.56〜0.71を出力したが，実際には全期間で離脱した．
一方IRLは0.46と正しく離脱を予測した．
これは，IRLが「量は多いが質が低い」という時系列パターンを
学習できたことを示唆する．

一方で，RFのみが正解したケースは3-6m学習期間に集中していた．
これはIRLが保守的な予測をする傾向があり，
閾値付近の開発者を離脱と判定しやすいためと考えられる．
9-12m学習期間ではこの傾向が緩和され，
IRLのみ正解が増加した．
```

---

## 6. 追加で作成が必要な図表

1. **ベン図**: IRLのみ正解/RFのみ正解/両方正解の人数
2. **2×2マトリクス**: 活動量×承諾率による開発者分類
3. **箱ひげ図**: IRLのみ正解/RFのみ正解の特徴量分布比較
4. **時系列プロット**: 典型的な開発者の活動推移
