# 卒論データ整理

## 1. 研究の概要

### 目的

- OSS開発者のLTC（長期貢献者）候補者を予測するモデルの構築
- 逆強化学習（IRL）を用いてレビュアーの継続的なレビュー依頼の受諾を予測
- 従来手法（RF）との比較

### 予測タスク

- 基準点から指定期間（0-3m, 3-6m, 6-9m, 9-12m）内にレビュー承諾があるかを予測
- 二値分類問題（True: 承諾あり / False: 承諾なし）

---

## 2. データの場所

### 2.1 実験結果データ

| データ         | パス                                                                    | 内容                              |
| -------------- | ----------------------------------------------------------------------- | --------------------------------- |
| IRL AUC-ROC    | `outputs/rf_vs_irl_nova_summary/performance/irl/irl_matrix_AUC_ROC.csv` | IRLモデルのAUC-ROCマトリクス      |
| RF AUC-ROC     | `outputs/rf_vs_irl_nova_summary/performance/rf/rf_matrix_AUC_ROC.csv`   | RFモデルのAUC-ROCマトリクス       |
| IRL F1         | `outputs/rf_vs_irl_nova_summary/performance/irl/irl_matrix_F1.csv`      | IRLモデルのF1マトリクス           |
| RF F1          | `outputs/rf_vs_irl_nova_summary/performance/rf/rf_matrix_F1.csv`        | RFモデルのF1マトリクス            |
| カバレッジ全体 | `outputs/rf_vs_irl_nova_summary/coverage/coverage_summary_all.csv`      | IRL/RF正解数の比較                |
| IRLのみ正解    | `outputs/rf_vs_irl_nova_summary/coverage/coverage_irl_only_all.csv`     | IRLのみが正しく予測した開発者詳細 |

### 2.2 特徴量重要度データ

| データ      | パス                                                                                                      | 内容                 |
| ----------- | --------------------------------------------------------------------------------------------------------- | -------------------- |
| 0-3mモデル  | `results/review_continuation_cross_eval_nova/train_0-3m/feature_importance/gradient_importance.json`      | 勾配ベース重要度     |
| 3-6mモデル  | `results/review_continuation_cross_eval_nova/train_3-6m/feature_importance/gradient_importance.json`      | 勾配ベース重要度     |
| 6-9mモデル  | `results/review_continuation_cross_eval_nova/train_6-9m/feature_importance/gradient_importance.json`      | 勾配ベース重要度     |
| 9-12mモデル | `results/review_continuation_cross_eval_nova/train_9-12m/feature_importance/gradient_importance.json`     | 勾配ベース重要度     |
| 平均        | `results/review_continuation_cross_eval_nova/average_feature_importance/gradient_importance_average.json` | 全モデル平均         |
| 遷移データ  | `outputs/rf_vs_irl_nova_summary/features/irl/irl_8_features_transition.csv`                               | 期間ごとの重要度推移 |

#

---

## 3. 主要な結果

### 3.1 AUC-ROC比較（IRL vs RF）

```
IRL AUC-ROC:
train_period,0-3m,3-6m,6-9m,9-12m
0-3m,0.717,0.823,0.910,0.734
3-6m,,0.820,0.894,0.802
6-9m,,,0.785,0.832
9-12m,,,,0.693

RF AUC-ROC:
train_period,0-3m,3-6m,6-9m,9-12m
0-3m,0.714,0.767,0.920,0.712
3-6m,,0.807,0.928,0.750
6-9m,,,0.899,0.678
9-12m,,,,0.644
```

**結果**: 10パターン中7パターンでIRLがRFを上回る

### 3.2 カバレッジ（正解数）

```csv
train,eval,IRL_positives,RF_positives,IRL_only,RF_only,Both
0-3m,0-3m,23,21,10,8,13
0-3m,3-6m,22,19,10,7,12
0-3m,6-9m,18,15,7,4,11
0-3m,9-12m,18,15,7,4,11
3-6m,3-6m,13,44,1,32,12
3-6m,6-9m,9,35,0,26,9
3-6m,9-12m,9,33,0,24,9
6-9m,6-9m,18,23,5,10,13
6-9m,9-12m,18,23,5,10,13
9-12m,9-12m,28,19,15,6,13
```

### 3.3 特徴量重要度（勾配ベース）

```csv
期間,総レビュー数,協力度,平均活動間隔,レビュー規模,総コミット数,応答速度,コード品質,レビュー負荷
0-3m,0.031644,0.015556,-0.016490,-0.000503,0.012541,-0.002736,-0.008889,0.010485
3-6m,0.017580,0.009139,-0.010497,-0.000249,0.008378,0.003467,-0.010609,-0.000800
6-9m,0.010238,0.013107,-0.006731,-0.006485,0.007123,0.004843,-0.006671,-0.002184
9-12m,0.006589,0.014604,-0.009005,-0.006364,0.003769,0.005186,-0.005223,-0.003285
```

**傾向**:

- 総レビュー数: 0.0316 → 0.0066（79%減少）
- 協力度: 0.0156 → 0.0146（安定、9-12mで最重要に）

---

## 4. IRLのみが正解した開発者の分析

### 4.1 16件の詳細

| case_id | pattern     | reviewer_email              | true_label | irl_prob | rf_prob | history_requests | history_rate |
| ------- | ----------- | --------------------------- | ---------- | -------- | ------- | ---------------- | ------------ |
| 1       | 0-3m→0-3m   | nova_hyperv_ci@...          | 0          | 0.452    | 0.63    | 725              | 0.6%         |
| 2       | 0-3m→0-3m   | auniyal@redhat.com          | 1          | 0.476    | 0.42    | 15               | 20.0%        |
| 3       | 0-3m→0-3m   | jichenjc@cn.ibm.com         | 0          | 0.456    | 0.83    | 57               | 3.5%         |
| 4       | 0-3m→0-3m   | hejie.xu@intel.com          | 0          | 0.449    | 0.51    | 5                | 0.0%         |
| ...     | ...         | ...                         | ...        | ...      | ...     | ...              | ...          |
| 14      | 9-12m→9-12m | kchamart@redhat.com         | 1          | 0.475    | 0.25    | 11               | 27.3%        |
| 15      | 9-12m→9-12m | john.garbutt@stackhpc.com   | 0          | 0.469    | 0.57    | 44               | 13.6%        |
| 16      | 9-12m→9-12m | christian.rohmann@inovex.de | 1          | 0.475    | 0.08    | 5                | 20.0%        |

### 4.2 パターン分類

**パターンA: 多依頼・低承諾率（RFが誤って「継続」と予測）**

- 件数: 8件（50%）
- 例: nova_hyperv_ci（725件, 0.6%）, jichenjc（57件, 3.5%）
- 特徴: 依頼数50件以上かつ承諾率15%以下

**パターンB: 少依頼・高承諾率（RFが誤って「離脱」と予測）**

- 件数: 5件（31%）
- 例: auniyal（15件, 20%）, christian.rohmann（5件, 20%）
- 特徴: 依頼数20件以下かつ承諾率20%以上

---

## 5. 考察補強のためのデータ

### セクション6.1用

- AUC-ROC比較表 → 表として追加
- 「10パターン中7パターンでIRLが優位」

### セクション6.2用

- 特徴量重要度の推移 → 具体的数値で補強
- 「総レビュー数が79%減少、協力度が最重要に」

### セクション6.3用

- IRLのみ正解の16件分析 → パターン別人数・割合
- 「パターンA: 8件（50%）、パターンB: 5件（31%）」

---

# 考察補強用・追記案（Tex反映前）

## A. 評価期間ごとのレビュアー分布（2023年）

**目的**: 「妄想に近い」と言われた考察に対し、開発者分布の推移を数値で補強する。

### A-1. レビュアー分布（中央値と四分位）

| 期間  | レビュアー数 | 依頼数（中央値 [IQR]） | 承諾率（中央値 [IQR]） | 応答遅延日数（中央値 [IQR]） |
| ----- | -----------: | ---------------------: | ---------------------: | ---------------------------: |
| 0-3m  |           39 |             3 (1–18.5) |    0.500 (0.278–0.995) |           6.25 (0.75–25.125) |
| 3-6m  |           42 |            4 (1–15.75) |    0.433 (0.000–0.939) |            7.00 (2.00–42.00) |
| 6-9m  |           32 |              3 (1–9.0) |    0.554 (0.188–0.667) |          7.50 (2.375–18.375) |
| 9-12m |           27 |             3 (1–10.5) |    0.773 (0.547–1.000) |             4.50 (0.00–7.75) |

**読み取り（案）**

- 依頼数の中央値は3〜4件で大きな変化はない。
- 承諾率中央値は0-3mの0.500から9-12mの0.773へ上昇。
- 応答遅延中央値は9-12mで4.5日に短縮。後半期間で活動が集中している可能性。

### A-2. 承諾率分布の推移

| 期間  |      0–10% |   10–30% |     30–50% |     50–70% |    70–100% |
| ----- | ---------: | -------: | ---------: | ---------: | ---------: |
| 0-3m  |  20.5% (8) | 5.1% (2) | 28.2% (11) |   7.7% (3) | 38.5% (15) |
| 3-6m  | 38.1% (16) | 9.5% (4) |   7.1% (3) |  14.3% (6) | 31.0% (13) |
| 6-9m  |  25.0% (8) | 3.1% (1) |  18.8% (6) | 34.4% (11) |  18.8% (6) |
| 9-12m |   7.4% (2) | 7.4% (2) |   7.4% (2) |  22.2% (6) | 55.6% (15) |

**読み取り（案）**

- 3-6mは低承諾（0–10%）が38.1%と最多。
- 9-12mでは高承諾（70–100%）が55.6%と過半数。
- 「長期側で質的特徴が重要」というRQ3の示唆と整合。

### A-3. 履歴系特徴量（期間末の中央値と四分位）

| 期間  | 直近180日レビュー数 |     直近180日承諾率 | 直近30日負荷 |            在籍日数 |
| ----- | ------------------: | ------------------: | -----------: | ------------------: |
| 0-3m  |           17 (0–45) | 0.500 (0.353–1.000) |     1 (0–14) | 1254 (517.5–2100.5) |
| 3-6m  |       10.5 (0–53.5) | 0.655 (0.333–1.000) |   0 (0–6.75) |   1468.5 (967–2235) |
| 6-9m  |         12 (0–56.5) | 0.584 (0.350–0.809) |      1 (0–5) |   1570 (464.5–2294) |
| 9-12m |           14 (1–67) | 0.667 (0.477–0.936) |     2 (0–18) | 1450 (780.5–2383.5) |

**読み取り（案）**

- 直近180日の承諾率中央値は0.500→0.667へ上昇。
- 在籍日数は概ね1,200〜1,500日台で大きく変化せず。
- 高承諾率の上昇は「経験年数の増加」だけでは説明できず、直近の応答傾向や負荷の影響が大きい可能性。

---

## B. Tex反映時の挿入候補（位置案）

- 考察の「短期予測と長期予測における特徴量の違い」直後にA-1〜A-3を挿入。
- 表番号は要調整。

---

## C. 作成根拠

- 使用データ: `data/review_requests_openstack_multi_5y_detail.csv`（再収集済み）
- 評価期間: 2023-01-01〜2024-01-01 を 0-3m / 3-6m / 6-9m / 9-12m に分割
- 分布はレビュアー単位で集計（中央値と四分位）
