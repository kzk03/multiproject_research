# モデル×評価期間ごとの詳細比較

## データソース
- カバレッジ: `outputs/rf_vs_irl_nova_summary/coverage/coverage_summary_all.csv`
- 性能指標: `outputs/rf_vs_irl_nova_summary/performance/`

---

## 0-3mモデル

### 0-3m → 0-3m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │ 10人  │  13人   │  8人  │       │
│  └───────┴─────────┴───────┘       │
│     IRL正解: 23人  /  RF正解: 21人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 |
|------|-----|-----|------|
| Precision | 0.565 | 0.524 | +0.041 |
| Recall | 0.619 | 0.524 | +0.095 |
| AUC-ROC | 0.717 | 0.714 | +0.003 |
| F1 | 0.591 | 0.524 | +0.067 |

---

### 0-3m → 3-6m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │ 10人  │  12人   │  7人  │       │
│  └───────┴─────────┴───────┘       │
│     IRL正解: 22人  /  RF正解: 19人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 |
|------|-----|-----|------|
| Precision | 0.636 | 0.579 | +0.057 |
| Recall | 0.778 | 0.611 | **+0.167** |
| AUC-ROC | 0.823 | 0.767 | **+0.056** |
| F1 | 0.700 | 0.595 | **+0.105** |

---

### 0-3m → 6-9m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │  7人  │  11人   │  4人  │       │
│  └───────┴─────────┴───────┘       │
│     IRL正解: 18人  /  RF正解: 15人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 |
|------|-----|-----|------|
| Precision | 0.667 | 0.667 | 0.000 |
| Recall | 0.923 | 0.769 | +0.154 |
| AUC-ROC | 0.910 | 0.920 | -0.010 |
| F1 | 0.774 | 0.714 | +0.060 |

---

### 0-3m → 9-12m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │  7人  │  11人   │  4人  │       │
│  └───────┴─────────┴───────┘       │
│     IRL正解: 18人  /  RF正解: 15人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 |
|------|-----|-----|------|
| Precision | 0.611 | 0.600 | +0.011 |
| Recall | 0.688 | 0.563 | +0.125 |
| AUC-ROC | 0.734 | 0.712 | +0.022 |
| F1 | 0.647 | 0.581 | +0.066 |

---

## 3-6mモデル

### 3-6m → 3-6m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │  1人  │  12人   │ 32人  │  ←RF多い│
│  └───────┴─────────┴───────┘       │
│     IRL正解: 13人  /  RF正解: 44人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 | 備考 |
|------|-----|-----|------|------|
| Precision | **0.769** | 0.386 | **+0.383** | IRL圧勝 |
| Recall | 0.556 | **0.944** | -0.388 | RF圧勝 |
| AUC-ROC | 0.820 | 0.807 | +0.013 | |
| F1 | 0.645 | 0.548 | +0.097 | |

**解釈:** RFは44人を「継続」と予測（Recall高）だが、偽陽性も多い（Precision低）

---

### 3-6m → 6-9m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │  0人  │   9人   │ 26人  │  ←RF多い│
│  └───────┴─────────┴───────┘       │
│     IRL正解: 9人   /  RF正解: 35人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 | 備考 |
|------|-----|-----|------|------|
| Precision | **0.778** | 0.371 | **+0.407** | IRL圧勝 |
| Recall | 0.538 | **1.000** | -0.462 | RF全員拾う |
| AUC-ROC | 0.894 | 0.928 | -0.034 | |
| F1 | 0.636 | 0.542 | +0.094 | |

**解釈:** RFはRecall 1.00（継続者全員を拾う）だが、Precision 0.37（偽陽性だらけ）

---

### 3-6m → 9-12m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │  0人  │   9人   │ 24人  │  ←RF多い│
│  └───────┴─────────┴───────┘       │
│     IRL正解: 9人   /  RF正解: 33人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 | 備考 |
|------|-----|-----|------|------|
| Precision | **0.778** | 0.424 | **+0.354** | IRL圧勝 |
| Recall | 0.438 | **0.875** | -0.437 | RF高い |
| AUC-ROC | 0.802 | 0.750 | **+0.052** | IRL優位 |
| F1 | 0.560 | 0.571 | -0.011 | ほぼ同等 |

---

## 6-9mモデル

### 6-9m → 6-9m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │  5人  │  13人   │ 10人  │       │
│  └───────┴─────────┴───────┘       │
│     IRL正解: 18人  /  RF正解: 23人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 | 備考 |
|------|-----|-----|------|------|
| Precision | 0.500 | 0.565 | -0.065 | RF優位 |
| Recall | 0.692 | **1.000** | -0.308 | RF全員拾う |
| AUC-ROC | 0.785 | **0.899** | **-0.114** | RF優位 |
| F1 | 0.581 | **0.722** | -0.141 | RF優位 |

**解釈:** 6-9mモデルの同期間評価はRFが優位

---

### 6-9m → 9-12m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │  5人  │  13人   │ 10人  │       │
│  └───────┴─────────┴───────┘       │
│     IRL正解: 18人  /  RF正解: 23人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 | 備考 |
|------|-----|-----|------|------|
| Precision | 0.667 | 0.565 | +0.102 | IRL優位 |
| Recall | 0.750 | 0.813 | -0.063 | RF優位 |
| AUC-ROC | **0.832** | 0.678 | **+0.154** | IRL圧勝 |
| F1 | 0.706 | 0.667 | +0.039 | IRL優位 |

**解釈:** 評価期間が離れるとIRLが優位に逆転

---

## 9-12mモデル

### 9-12m → 9-12m評価

**ベン図:**
```
┌─────────────────────────────────────┐
│           正解した開発者             │
│  ┌───────┬─────────┬───────┐       │
│  │ IRL   │  両方   │  RF   │       │
│  │ のみ  │  正解   │ のみ  │       │
│  │ 15人  │  13人   │  6人  │ ←IRL多い│
│  └───────┴─────────┴───────┘       │
│     IRL正解: 28人  /  RF正解: 19人   │
└─────────────────────────────────────┘
```

| 指標 | IRL | RF | 差分 | 備考 |
|------|-----|-----|------|------|
| Precision | 0.571 | 0.474 | +0.097 | IRL優位 |
| Recall | **1.000** | 0.563 | **+0.437** | IRL全員拾う |
| AUC-ROC | 0.693 | 0.644 | +0.049 | IRL優位 |
| F1 | **0.727** | 0.514 | **+0.213** | IRL圧勝 |

**解釈:** 長期学習ではIRLが全指標で優位

---

## 全体まとめ

| モデル | 評価期間 | IRLのみ | RFのみ | 両方 | Precision優位 | Recall優位 |
|--------|----------|---------|--------|------|---------------|------------|
| 0-3m | 0-3m | 10 | 8 | 13 | IRL +0.04 | IRL +0.10 |
| 0-3m | 3-6m | 10 | 7 | 12 | IRL +0.06 | IRL +0.17 |
| 0-3m | 6-9m | 7 | 4 | 11 | 同等 | IRL +0.15 |
| 0-3m | 9-12m | 7 | 4 | 11 | IRL +0.01 | IRL +0.13 |
| **3-6m** | **3-6m** | **1** | **32** | 12 | **IRL +0.38** | **RF +0.39** |
| **3-6m** | **6-9m** | **0** | **26** | 9 | **IRL +0.41** | **RF +0.46** |
| **3-6m** | **9-12m** | **0** | **24** | 9 | **IRL +0.35** | **RF +0.44** |
| 6-9m | 6-9m | 5 | 10 | 13 | RF +0.07 | RF +0.31 |
| 6-9m | 9-12m | 5 | 10 | 13 | IRL +0.10 | RF +0.06 |
| **9-12m** | **9-12m** | **15** | **6** | 13 | IRL +0.10 | **IRL +0.44** |

### 重要な発見

1. **3-6mモデルの「RFのみ正解」が多い理由**
   - RFはRecallが高い（0.87〜1.00）= 多くを「継続」と予測
   - しかしPrecisionが低い（0.37〜0.42）= 偽陽性も多い
   - ベン図の「RFのみ正解」は**当たりだけをカウント**、外れはカウントされていない

2. **9-12mモデルでIRLが優位な理由**
   - IRLはRecall 1.00、Precision 0.57
   - 長期の時系列パターンを学習できている

3. **カバレッジ（ベン図）だけでは不十分**
   - 偽陽性（継続と予測したが実際は離脱）の数も考慮すべき
   - Precision/Recallと合わせて議論する必要がある
