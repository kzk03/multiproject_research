# IRL vs RF (Case2) 詳細分析レポート

Nova プロジェクト、Cross-Temporal 評価（訓練期間 ≤ 評価期間）の 10 パターン比較

---

## 0. 用語説明

- **パターン**: 「訓練期間 → 評価期間」の組み合わせ（例: 0-3m → 6-9m）
- **サンプル数**: 各パターンで評価対象となる開発者数
- **IRL のみ正解/RF のみ正解**: 一方のモデルだけが正しく予測したケース

---

## 1. 全体サマリー

### 1.1 性能比較

| パターン      | IRL F1    | RF F1 | F1 勝者 | IRL AUC   | RF AUC    | AUC 勝者 |
| ------------- | --------- | ----- | ------- | --------- | --------- | -------- |
| 0-3m → 0-3m   | 0.591     | 0.565 | **IRL** | 0.717     | 0.730     | RF       |
| 0-3m → 3-6m   | 0.700     | 0.622 | **IRL** | 0.823     | 0.836     | RF       |
| 0-3m → 6-9m   | **0.774** | 0.649 | **IRL** | **0.910** | 0.780     | **IRL**  |
| 0-3m → 9-12m  | 0.647     | 0.615 | **IRL** | 0.734     | 0.805     | RF       |
| 3-6m → 3-6m   | 0.645     | 0.625 | **IRL** | 0.820     | 0.809     | **IRL**  |
| 3-6m → 6-9m   | 0.636     | 0.786 | RF      | **0.894** | 0.833     | **IRL**  |
| 3-6m → 9-12m  | 0.560     | 0.690 | RF      | 0.802     | 0.797     | **IRL**  |
| 6-9m → 6-9m   | 0.581     | 0.759 | RF      | 0.785     | **0.933** | RF       |
| 6-9m → 9-12m  | **0.706** | 0.545 | **IRL** | 0.832     | 0.780     | **IRL**  |
| 9-12m → 9-12m | 0.727     | 0.688 | **IRL** | 0.693     | **0.900** | RF       |
| **平均**      | **0.657** | 0.654 |         | 0.801     | **0.820** |          |

**勝敗:**

- F1 スコア: **IRL 7 勝 / RF 3 勝**
- AUC-ROC: **IRL 5 勝 / RF 5 勝**

### 1.2 予測一致・不一致の内訳

| 分類         | 件数 | 割合  | 説明                     |
| ------------ | ---- | ----- | ------------------------ |
| 両方正解     | 264  | 63.2% | IRL・RF 両方が正しく予測 |
| 両方不正解   | 58   | 13.9% | IRL・RF 両方が誤って予測 |
| IRL のみ正解 | 46   | 11.0% | IRL が当てて RF が外した |
| RF のみ正解  | 50   | 12.0% | RF が当てて IRL が外した |

---

## 2. 活動量・承諾率別分析

開発者の**履歴依頼数**と**承諾率**によって、IRL と RF の得意・不得意が明確に分かれる。

### 2.1 履歴依頼数の分布

| 分位点          | 依頼数 |
| --------------- | ------ |
| 25%点           | 7 件   |
| 50%点（中央値） | 44 件  |
| 75%点           | 164 件 |

### 2.2 活動量別の予測正解パターン

| 活動量               | n   | 両方正解 | 両方不正解 | IRL のみ  | RF のみ   | 傾向         |
| -------------------- | --- | -------- | ---------- | --------- | --------- | ------------ |
| 低活動 (≤7 件)       | 138 | 77.5%    | 10.1%      | **7.2%**  | 5.1%      | 両方得意     |
| 中低活動 (7-44 件)   | 74  | 63.5%    | 9.5%       | 10.8%     | **16.2%** | RF やや優勢  |
| 中高活動 (44-164 件) | 104 | 43.3%    | **25.0%**  | **20.2%** | 11.5%     | **IRL 優勢** |
| 高活動 (>164 件)     | 102 | 63.7%    | 10.8%      | 6.9%      | **18.6%** | RF 優勢      |

#### 重要な発見

1. **中高活動層で IRL が強い理由**（IRL のみ正解 21 件、うち離脱 18 件）

   - IRL は「見かけ上活発だが実は離脱する」パターンを検出
   - 26 特徴量で活動の質（プロジェクト関与度、レビュー傾向など）を評価
   - RF は依頼数だけ見て「活発=継続」と誤判定

2. **高活動層で RF が強い理由**（RF のみ正解 19 件、うち離脱 14 件）
   - 承諾率 0%の CI ボットを単純なルールで検出
   - IRL は活動量の多さに引っ張られて継続と誤判定

### 2.3 承諾率別の予測正解パターン

| 承諾率 | n   | 両方正解  | 両方不正解 | IRL のみ  | RF のみ   | 傾向         |
| ------ | --- | --------- | ---------- | --------- | --------- | ------------ |
| 0%     | 99  | 72.7%     | 5.1%       | 10.1%     | **12.1%** | RF 優勢      |
| 0-5%   | 52  | 40.4%     | **17.3%**  | **23.1%** | 19.2%     | **IRL 優勢** |
| 5-15%  | 83  | 48.2%     | **27.7%**  | 13.3%     | 10.8%     | 両方苦手     |
| 15-30% | 119 | **78.2%** | 5.0%       | 6.7%      | 10.1%     | 両方得意     |
| 30%+   | 65  | 58.5%     | **23.1%**  | 7.7%      | 10.8%     | 両方苦手     |

#### 重要な発見

1. **承諾率 0-5%で IRL が強い**（IRL のみ正解 12 件、うち離脱 10 件）

   - 「承諾率は低いが 0%ではない」微妙なケース
   - RF の単純な閾値（50%）では検出困難
   - IRL は他の特徴量も考慮して離脱を予測

2. **承諾率 0%は RF の独壇場**

   - 単純なルール「承諾率 0% → 離脱」が有効
   - IRL は活動量など他の特徴に影響される

3. **承諾率 5-15%、30%+は両方苦手**
   - 継続/離脱の境界領域で予測が難しい

---

## 3. 代表的な開発者のケーススタディ

### Case 1: aleksey.stupnikov@gmail.com（IRL のみ正解の典型例）

**プロファイル**: 依頼数 96 件、承諾率 8.3%（中高活動・低承諾率）

| パターン      | 真値 | IRL | RF      | 結果         |
| ------------- | ---- | --- | ------- | ------------ |
| 0-3m → 0-3m   | 離脱 | 45% | **99%** | IRL のみ正解 |
| 0-3m → 3-6m   | 離脱 | 45% | **92%** | IRL のみ正解 |
| 0-3m → 6-9m   | 離脱 | 45% | **94%** | IRL のみ正解 |
| 0-3m → 9-12m  | 継続 | 45% | 63%     | RF のみ正解  |
| 3-6m → 3-6m   | 離脱 | 46% | 69%     | IRL のみ正解 |
| 3-6m → 6-9m   | 離脱 | 46% | 15%     | 両方正解     |
| 3-6m → 9-12m  | 継続 | 46% | 7%      | 両方不正解   |
| 6-9m → 6-9m   | 離脱 | 48% | 10%     | 両方正解     |
| 6-9m → 9-12m  | 継続 | 48% | 7%      | 両方不正解   |
| 9-12m → 9-12m | 継続 | 48% | 9%      | IRL のみ正解 |

**考察**:

- RF は依頼数 96 件を見て「継続」と高確率で誤予測（最大 99%）
- IRL は承諾率 8.3%や他の特徴から「離脱傾向」を検出
- **IRL が 5 勝、RF が 1 勝、両方正解 2 回、両方不正解 2 回**

---

### Case 2: mlnx-openstack-ci@dev.mellanox.co.il（RF のみ正解の典型例）

**プロファイル**: 依頼数 407 件、承諾率 0%（高活動・CI ボット）

| パターン      | 真値 | IRL | RF  | 結果         |
| ------------- | ---- | --- | --- | ------------ |
| 0-3m → 0-3m   | 離脱 | 46% | 18% | RF のみ正解  |
| 0-3m → 3-6m   | 継続 | 46% | 19% | IRL のみ正解 |
| 0-3m → 6-9m   | 離脱 | 46% | 41% | RF のみ正解  |
| 0-3m → 9-12m  | 離脱 | 46% | 48% | RF のみ正解  |
| 3-6m → 3-6m   | 継続 | 47% | 9%  | IRL のみ正解 |
| 3-6m → 6-9m   | 離脱 | 47% | 9%  | RF のみ正解  |
| 3-6m → 9-12m  | 離脱 | 47% | 11% | RF のみ正解  |
| 6-9m → 6-9m   | 離脱 | 48% | 24% | RF のみ正解  |
| 6-9m → 9-12m  | 離脱 | 48% | 26% | RF のみ正解  |
| 9-12m → 9-12m | 離脱 | 48% | 27% | RF のみ正解  |

**考察**:

- RF は承諾率 0%を見て「離脱」と判定（単純だが有効）
- IRL は 407 件という高活動に惑わされて継続確率 47%を出力
- **RF が 8 勝、IRL が 2 勝**（CI ボットは RF の得意領域）

---

### Case 3: kchamart@redhat.com（両方不正解が多い典型例）

**プロファイル**: 依頼数 46 件、承諾率 34.8%（中程度・境界領域）

| パターン      | 真値 | IRL | RF  | 結果         |
| ------------- | ---- | --- | --- | ------------ |
| 0-3m → 0-3m   | 継続 | 45% | 41% | 両方不正解   |
| 0-3m → 3-6m   | 継続 | 45% | 47% | 両方不正解   |
| 0-3m → 6-9m   | 継続 | 45% | 14% | 両方不正解   |
| 0-3m → 9-12m  | 継続 | 45% | 37% | 両方不正解   |
| 3-6m → 3-6m   | 継続 | 46% | 22% | 両方不正解   |
| 3-6m → 6-9m   | 継続 | 46% | 2%  | 両方不正解   |
| 3-6m → 9-12m  | 継続 | 46% | 17% | 両方不正解   |
| 6-9m → 6-9m   | 継続 | 47% | 13% | 両方不正解   |
| 6-9m → 9-12m  | 継続 | 47% | 15% | 両方不正解   |
| 9-12m → 9-12m | 継続 | 47% | 25% | IRL のみ正解 |

**考察**:

- 中程度の活動量（46 件）+ 中程度の承諾率（35%）は両モデルの苦手領域
- 全 10 パターンで継続なのに、IRL も RF も離脱と予測し続けた
- **10 パターン中 9 回両方不正解**という極端な例

---

### Case 4: maksim.malchuk@gmail.com（期間で結果が変わる例）

**プロファイル**: 依頼数 3 件、承諾率 66.7%（低活動・高承諾率）

| パターン      | 真値 | IRL | RF  | 結果         |
| ------------- | ---- | --- | --- | ------------ |
| 0-3m → 0-3m   | 継続 | 45% | 5%  | 両方不正解   |
| 0-3m → 3-6m   | 離脱 | 45% | 12% | 両方正解     |
| 0-3m → 6-9m   | 離脱 | 45% | 8%  | 両方正解     |
| 0-3m → 9-12m  | 継続 | 45% | 11% | 両方不正解   |
| 3-6m → 3-6m   | 離脱 | 47% | 4%  | 両方正解     |
| 3-6m → 6-9m   | 離脱 | 47% | 4%  | 両方正解     |
| 3-6m → 9-12m  | 継続 | 47% | 7%  | 両方不正解   |
| 6-9m → 6-9m   | 離脱 | 48% | 13% | RF のみ正解  |
| 6-9m → 9-12m  | 継続 | 48% | 14% | IRL のみ正解 |
| 9-12m → 9-12m | 継続 | 48% | 42% | IRL のみ正解 |

**考察**:

- 同じ開発者でも評価期間によって**真値（継続/離脱）が変動**
- 低活動のため両モデルとも確信度が低い（IRL 45-48%、RF 4-42%）
- 期間によって得意なモデルが変化：早期は RF、後期は IRL

---

## 4. 期間別詳細分析

### 4.1 訓練期間: 0-3m（4 パターン）

**特徴**: 最も早い時期のデータで訓練。長期予測では IRL が優勢。

#### 0-3m → 0-3m (n=57)

| 分類         | 件数 | 割合  |
| ------------ | ---- | ----- |
| 両方正解     | 32   | 56.1% |
| 両方不正解   | 11   | 19.3% |
| IRL のみ正解 | 8    | 14.0% |
| RF のみ正解  | 6    | 10.5% |

**IRL のみ正解 (8 件: 継続 2/離脱 6)**
| 開発者 | 真値 | IRL | RF | 考察 |
|--------|------|-----|-----|------|
| nova_hyperv_ci@cloudbasesolutions.com | 離脱 | 0.45 | 0.63 | CI 系、履歴多いが承諾率低い |
| openstack@lightbitslabs.com | 離脱 | 0.46 | 0.65 | CI 系、同上 |
| aleksey.stupnikov@gmail.com | 離脱 | 0.45 | **0.99** | RF が極端に継続と誤予測 |
| openstack-ci@storpool.com | 離脱 | 0.45 | 0.69 | CI 系 |
| emc.scaleio.ci@emc.com | 継続 | 0.47 | 0.41 | CI 系だが継続 |
| auniyal@redhat.com | 継続 | 0.48 | 0.42 | 履歴 15 件と少ない継続者 |
| jichenjc@cn.ibm.com | 離脱 | 0.46 | 0.83 | RF が継続と誤予測 |
| hejie.xu@intel.com | 離脱 | 0.45 | 0.51 | 僅差で IRL が正解 |

**RF のみ正解 (6 件: 継続 2/離脱 4)**
| 開発者 | 真値 | IRL | RF | 考察 |
|--------|------|-----|-----|------|
| kvmpower@linux.vnet.ibm.com | 継続 | 0.45 | 0.61 | 履歴 1372 件の重要継続者 |
| mlnx-openstack-ci@dev.mellanox.co.il | 離脱 | 0.46 | 0.18 | RF が低確率で離脱予測 |
| zhangbailin@inspur.com | 離脱 | 0.47 | 0.09 | RF が強く離脱予測 |
| pierre-samuel.le-stang@corp.ovh.com | 離脱 | 0.46 | 0.31 | 同上 |
| tobias.urdin@binero.com | 継続 | 0.45 | 0.85 | RF が高確率で継続予測 |
| kinpaa@gmail.com | 離脱 | 0.47 | 0.05 | RF が強く離脱予測 |

**考察**: IRL は CI/ボット系の離脱を正確に検出。RF は履歴数が多い継続者と、承諾率 0%の離脱者を得意とする。

---

#### 0-3m → 3-6m (n=52)

| 分類         | 件数 | 割合      |
| ------------ | ---- | --------- |
| 両方正解     | 32   | 61.5%     |
| 両方不正解   | 9    | 17.3%     |
| IRL のみ正解 | 8    | **15.4%** |
| RF のみ正解  | 3    | 5.8%      |

**IRL のみ正解 (8 件: 継続 1/離脱 7)**
| 開発者 | 真値 | IRL | RF | 考察 |
|--------|------|-----|-----|------|
| nova_hyperv_ci@cloudbasesolutions.com | 離脱 | 0.45 | 0.55 | CI 系の離脱 |
| openstack@lightbitslabs.com | 離脱 | 0.46 | 0.56 | 同上 |
| mlnx-openstack-ci@dev.mellanox.co.il | **継続** | 0.46 | 0.19 | 継続者を RF が離脱と誤予測 |
| aleksey.stupnikov@gmail.com | 離脱 | 0.45 | **0.92** | RF が極端に継続と誤予測 |
| openstack-ci@storpool.com | 離脱 | 0.45 | 0.73 | CI 系 |
| jichenjc@cn.ibm.com | 離脱 | 0.46 | 0.62 | |
| bartosz@stackhpc.com | 離脱 | 0.44 | 0.53 | 履歴 3 件の新規離脱者 |
| tobias.urdin@binero.com | 離脱 | 0.45 | 0.61 | |

**考察**: IRL が圧倒的優勢（8 件 vs 3 件）。0-3m 訓練データからの 3-6m 予測では、IRL の汎化能力が高い。

---

#### 0-3m → 6-9m (n=39)

| 分類         | 件数 | 割合      |
| ------------ | ---- | --------- |
| 両方正解     | 28   | **71.8%** |
| 両方不正解   | 5    | 12.8%     |
| IRL のみ正解 | 5    | 12.8%     |
| RF のみ正解  | 1    | 2.6%      |

**IRL のみ正解 (5 件: 継続 0/離脱 5)** - 全て離脱者検出
| 開発者 | 真値 | IRL | RF |
|--------|------|-----|-----|
| aleksey.stupnikov@gmail.com | 離脱 | 0.45 | **0.94** |
| openstack-ci@storpool.com | 離脱 | 0.45 | 0.78 |
| rene.ribaud@gmail.com | 離脱 | 0.45 | 0.55 |
| tobias.urdin@binero.com | 離脱 | 0.45 | 0.74 |
| noonedeadpunk@gmail.com | 離脱 | 0.44 | 0.54 |

**考察**: IRL F1=0.774、RF F1=0.649 と大差。IRL は 0-3m 訓練から 6-9m 評価への長期予測が最も得意。

---

#### 0-3m → 9-12m (n=35)

| 分類         | 件数 | 割合      |
| ------------ | ---- | --------- |
| 両方正解     | 20   | 57.1%     |
| 両方不正解   | 9    | **25.7%** |
| IRL のみ正解 | 4    | 11.4%     |
| RF のみ正解  | 2    | 5.7%      |

**注目**: 両方不正解が 25.7%と高い。長期予測の限界。

**IRL のみ正解の開発者**: openstack-ci@storpool.com, rene.ribaud@gmail.com, tobias.urdin@binero.com, noonedeadpunk@gmail.com（全て離脱）

---

### 4.2 訓練期間: 3-6m（3 パターン）

**特徴**: RF が優勢になり始める。

#### 3-6m → 3-6m (n=52)

| 分類         | 件数 | 割合      |
| ------------ | ---- | --------- |
| 両方正解     | 35   | **67.3%** |
| 両方不正解   | 5    | 9.6%      |
| IRL のみ正解 | 6    | 11.5%     |
| RF のみ正解  | 6    | 11.5%     |

**完全に互角**。IRL は継続者(3 件)+離脱者(3 件)、RF も継続者(3 件)+離脱者(3 件)。

**IRL のみ正解の代表例**:

- mlnx-openstack-ci@dev.mellanox.co.il (継続, IRL:0.47, RF:0.09)
- sahid.ferdjaoui@industrialdiscipline.com (継続, IRL:0.48, RF:0.41)

**RF のみ正解の代表例**:

- melwittt@gmail.com (継続, IRL:0.47, RF:**0.98**)
- dms@danplanet.com (継続, IRL:0.47, RF:**1.00**)

---

#### 3-6m → 6-9m (n=39)

| 分類         | 件数 | 割合      |
| ------------ | ---- | --------- |
| 両方正解     | 30   | **76.9%** |
| 両方不正解   | 3    | 7.7%      |
| IRL のみ正解 | 1    | 2.6%      |
| RF のみ正解  | 5    | **12.8%** |

**RF が優勢**（F1: RF 0.786 vs IRL 0.636）

**RF のみ正解 (5 件: 継続 4/離脱 1)**
| 開発者 | 真値 | IRL | RF | 考察 |
|--------|------|-----|-----|------|
| mlnx-openstack-ci@dev.mellanox.co.il | 離脱 | 0.47 | 0.09 | 承諾率 0%を検出 |
| notartom@gmail.com | 継続 | 0.47 | 0.90 | 履歴 106 件 |
| melwittt@gmail.com | 継続 | 0.47 | **0.98** | 履歴 463 件 |
| panhongyin@yovole.com | 継続 | 0.47 | 0.80 | 履歴 104 件 |
| dms@danplanet.com | 継続 | 0.47 | **0.98** | 履歴 128 件 |

**考察**: RF は履歴が多い継続者を高確信度で検出。IRL は 0.47 前後で保守的。

---

#### 3-6m → 9-12m (n=35)

| 分類         | 件数 | 割合  |
| ------------ | ---- | ----- |
| 両方正解     | 23   | 65.7% |
| 両方不正解   | 7    | 20.0% |
| IRL のみ正解 | 1    | 2.9%  |
| RF のみ正解  | 4    | 11.4% |

**RF が優勢**（F1: RF 0.690 vs IRL 0.560）

---

### 4.3 訓練期間: 6-9m（2 パターン）

#### 6-9m → 6-9m (n=39)

| 分類         | 件数 | 割合      |
| ------------ | ---- | --------- |
| 両方正解     | 26   | 66.7%     |
| 両方不正解   | 3    | 7.7%      |
| IRL のみ正解 | 1    | 2.6%      |
| RF のみ正解  | 9    | **23.1%** |

**RF が圧倒的優勢**（F1: RF 0.759 vs IRL 0.581、AUC: RF 0.933 vs IRL 0.785）

**RF のみ正解 (9 件: 継続 2/離脱 7)**
| 開発者 | 真値 | IRL | RF | 考察 |
|--------|------|-----|-----|------|
| openstack@lightbitslabs.com | 離脱 | 0.48 | 0.24 | 承諾率 0.5% |
| mlnx-openstack-ci@dev.mellanox.co.il | 離脱 | 0.48 | 0.24 | 承諾率 0% |
| ratailor@redhat.com | 離脱 | 0.48 | 0.46 | 承諾率 3.6% |
| notartom@gmail.com | 継続 | 0.48 | 0.86 | 履歴 106 件 |
| kajinamit@oss.nttdata.com | 離脱 | 0.48 | **0.00** | 承諾率 4.8% |
| panhongyin@yovole.com | 継続 | 0.47 | 0.88 | 履歴 104 件 |
| maksim.malchuk@gmail.com | 離脱 | 0.48 | 0.13 | 履歴 3 件 |
| juliaashleykreger@gmail.com | 離脱 | 0.48 | 0.12 | 承諾率 50%だが離脱 |
| jay@jvf.cc | 離脱 | 0.48 | 0.13 | 承諾率 71%だが離脱 |

**考察**: IRL の確率が 0.47-0.48 に収束し、識別力が低下。RF は明確に離脱者を検出。

---

#### 6-9m → 9-12m (n=35)

| 分類         | 件数 | 割合  |
| ------------ | ---- | ----- |
| 両方正解     | 21   | 60.0% |
| 両方不正解   | 4    | 11.4% |
| IRL のみ正解 | 5    | 14.3% |
| RF のみ正解  | 5    | 14.3% |

**互角**（F1: IRL 0.706 vs RF 0.545、AUC: IRL 0.832 vs RF 0.780）

**IRL のみ正解 (5 件: 継続 3/離脱 2)** - 継続者検出が強い
| 開発者 | 真値 | IRL | RF | 考察 |
|--------|------|-----|-----|------|
| ratailor@redhat.com | **継続** | 0.48 | 0.26 | 前期間では離脱だった |
| panhongyin@yovole.com | 離脱 | 0.47 | 0.69 | |
| john.garbutt@stackhpc.com | 離脱 | 0.47 | 0.51 | |
| maksim.malchuk@gmail.com | **継続** | 0.48 | 0.14 | 履歴 3 件、承諾率 67% |
| jay@jvf.cc | **継続** | 0.48 | 0.21 | 履歴 7 件、承諾率 71% |

**考察**: 少履歴だが承諾率が高い継続者を IRL が検出。RF は履歴数の少なさから離脱と誤判断。

---

### 4.4 訓練期間: 9-12m（1 パターン）

#### 9-12m → 9-12m (n=35)

| 分類         | 件数 | 割合      |
| ------------ | ---- | --------- |
| 両方正解     | 17   | 48.6%     |
| 両方不正解   | 2    | 5.7%      |
| IRL のみ正解 | 7    | **20.0%** |
| RF のみ正解  | 9    | **25.7%** |

**最も不一致が多いパターン**。IRL と RF が異なる開発者を得意とする。

**IRL のみ正解 (7 件: 継続 5/離脱 2)** - **継続者検出に特化**
| 開発者 | 真値 | IRL | RF | 考察 |
|--------|------|-----|-----|------|
| aleksey.stupnikov@gmail.com | **継続** | 0.48 | 0.09 | 以前は離脱だったが継続に変化 |
| kchamart@redhat.com | **継続** | 0.47 | 0.25 | 承諾率 35%の継続者 |
| panhongyin@yovole.com | 離脱 | 0.47 | 0.58 | |
| john.garbutt@stackhpc.com | 離脱 | 0.47 | 0.57 | |
| maksim.malchuk@gmail.com | **継続** | 0.48 | 0.42 | 履歴 3 件、承諾率 67% |
| jay@jvf.cc | **継続** | 0.48 | 0.19 | 履歴 7 件、承諾率 71% |
| christian.rohmann@inovex.de | **継続** | 0.47 | 0.08 | 履歴 3 件、承諾率 0% |

**RF のみ正解 (9 件: 継続 0/離脱 9)** - **全て離脱者検出**
| 開発者 | 真値 | IRL | RF | 考察 |
|--------|------|-----|-----|------|
| openstack@lightbitslabs.com | 離脱 | 0.48 | 0.05 | 承諾率 0.5% |
| mlnx-openstack-ci@dev.mellanox.co.il | 離脱 | 0.48 | 0.27 | 承諾率 0% |
| openstack-ci@storpool.com | 離脱 | 0.48 | 0.04 | 承諾率 0% |
| kajinamit@oss.nttdata.com | 離脱 | 0.48 | **0.00** | 承諾率 4.8% |
| rene.ribaud@gmail.com | 離脱 | 0.47 | 0.01 | 承諾率 17% |
| hongda.xun@easystack.cn | 離脱 | 0.48 | 0.20 | |
| tobias.urdin@binero.com | 離脱 | 0.47 | 0.03 | |
| markgoddard86@gmail.com | 離脱 | 0.48 | **0.00** | 承諾率 5.3% |
| juliaashleykreger@gmail.com | 離脱 | 0.48 | 0.20 | |

**考察**:

- **IRL**: 継続者検出が得意（7 件中 5 件が継続者）。少履歴でも行動パターンから継続を推定。
- **RF**: 離脱者検出が得意（9 件全てが離脱者）。承諾率が低い開発者を強く離脱と判断。

---

## 5. モデル別得意ケースのまとめ

### 5.1 IRL のみ正解（46 件）

#### 概要

| 指標                 | 値            |
| -------------------- | ------------- |
| 継続者検出           | 14 件 (30.4%) |
| 離脱者検出           | 32 件 (69.6%) |
| 履歴依頼数（中央値） | 51 件         |
| 履歴承諾率（中央値） | 5.8%          |

**IRL の強み**: 履歴が少なく（中央値 51 件）、承諾率が低い（5.8%）開発者の予測が得意。

### 2.2 パターン別内訳

| パターン      | 件数 | 継続 | 離脱 |
| ------------- | ---- | ---- | ---- |
| 0-3m → 0-3m   | 8    | 2    | 6    |
| 0-3m → 3-6m   | 8    | 1    | 7    |
| 9-12m → 9-12m | 7    | 5    | 2    |
| 3-6m → 3-6m   | 6    | 3    | 3    |
| 0-3m → 6-9m   | 5    | 0    | 5    |
| 6-9m → 9-12m  | 5    | 3    | 2    |
| 0-3m → 9-12m  | 4    | 0    | 4    |
| その他        | 3    | 0    | 3    |

**特徴:**

- 0-3m 訓練パターンで**25 件**（全 46 件の 54%）を占める
- 後期（9-12m）では**継続者検出**が強い

### 2.3 複数パターンで登場する開発者

| 開発者                      | 出現回数 | 真値 | パターン                                                | 特徴                                                        |
| --------------------------- | -------- | ---- | ------------------------------------------------------- | ----------------------------------------------------------- |
| aleksey.stupnikov@gmail.com | 5 回     | 離脱 | 0-3m→0-3m, 0-3m→3-6m, 0-3m→6-9m, 3-6m→3-6m, 9-12m→9-12m | 履歴 96 件・承諾率 8.3%、RF は高確率(69-99%)で継続と誤予測  |
| panhongyin@yovole.com       | 4 回     | 離脱 | 3-6m→3-6m, 3-6m→9-12m, 6-9m→9-12m, 9-12m→9-12m          | 履歴 104 件・承諾率 5.8%、RF は高確率(58-79%)で継続と誤予測 |
| openstack-ci@storpool.com   | 4 回     | 離脱 | 0-3m→0-3m, 0-3m→3-6m, 0-3m→6-9m, 0-3m→9-12m             | 履歴 49 件・承諾率 0%、IRL は低確率(0.45)で正しく離脱予測   |
| tobias.urdin@binero.com     | 3 回     | 離脱 | 0-3m→3-6m, 0-3m→6-9m, 0-3m→9-12m                        | 履歴 25 件・承諾率 20%、IRL は安定して低確率(0.45)で予測    |

### 2.4 代表的な IRL のみ正解ケース

#### ケース 1: CI/ボット系の離脱検出

| 開発者                                | 真値 | IRL 確率 | RF 確率 | 履歴 | 承諾率 |
| ------------------------------------- | ---- | -------- | ------- | ---- | ------ |
| nova_hyperv_ci@cloudbasesolutions.com | 離脱 | 0.45     | 0.63    | 1724 | 0.3%   |
| openstack@lightbitslabs.com           | 離脱 | 0.46     | 0.65    | 563  | 0.5%   |

**考察**: IRL は履歴が多くても承諾率が極端に低い CI/ボット系を正しく離脱と判断。RF は履歴依頼数に引っ張られて継続と誤予測。

#### ケース 2: 後期の継続者検出

| 開発者                      | 真値 | IRL 確率 | RF 確率 | 履歴 | 承諾率 | パターン    |
| --------------------------- | ---- | -------- | ------- | ---- | ------ | ----------- |
| maksim.malchuk@gmail.com    | 継続 | 0.48     | 0.14    | 3    | 66.7%  | 6-9m→9-12m  |
| jay@jvf.cc                  | 継続 | 0.48     | 0.21    | 7    | 71.4%  | 6-9m→9-12m  |
| christian.rohmann@inovex.de | 継続 | 0.47     | 0.08    | 3    | 0%     | 9-12m→9-12m |

**考察**: IRL は履歴が少なくても、行動パターンから継続の可能性を見出せる。RF は履歴数の少なさから離脱と誤予測。

---

## 6. RF のみ正解（50 件）

### 6.1 概要

| 指標                 | 値            |
| -------------------- | ------------- |
| 継続者検出           | 16 件 (32.0%) |
| 離脱者検出           | 34 件 (68.0%) |
| 履歴依頼数（中央値） | 106 件        |
| 履歴承諾率（中央値） | 5.8%          |

**RF の強み**: 履歴が多い（中央値 106 件）開発者の予測が得意。

### 3.2 パターン別内訳

| パターン      | 件数 | 継続 | 離脱  |
| ------------- | ---- | ---- | ----- |
| 6-9m → 6-9m   | 9    | 2    | 7     |
| 9-12m → 9-12m | 9    | 0    | **9** |
| 0-3m → 0-3m   | 6    | 2    | 4     |
| 3-6m → 3-6m   | 6    | 3    | 3     |
| 3-6m → 6-9m   | 5    | 4    | 1     |
| 6-9m → 9-12m  | 5    | 0    | 5     |
| その他        | 10   | 5    | 5     |

**特徴:**

- 対角線評価（6-9m→6-9m, 9-12m→9-12m）で強い
- 後期の**離脱者検出**に特化（9-12m→9-12m は全て離脱）

### 3.3 複数パターンで登場する開発者

| 開発者                               | 出現回数 | 真値 | パターン                                    | 特徴                                                         |
| ------------------------------------ | -------- | ---- | ------------------------------------------- | ------------------------------------------------------------ |
| mlnx-openstack-ci@dev.mellanox.co.il | **8 回** | 離脱 | ほぼ全パターン                              | 履歴 407 件・承諾率 0%、RF は一貫して低確率(9-48%)で離脱予測 |
| notartom@gmail.com                   | 4 回     | 継続 | 3-6m→3-6m, 3-6m→6-9m, 3-6m→9-12m, 6-9m→6-9m | 履歴 106 件・承諾率 13%、RF は高確率(58-97%)で継続予測       |
| melwittt@gmail.com                   | 3 回     | 継続 | 3-6m→3-6m, 3-6m→6-9m, 3-6m→9-12m            | 履歴 463 件・承諾率 20%、RF は確信度 98%で継続予測           |
| dms@danplanet.com                    | 3 回     | 継続 | 3-6m→3-6m, 3-6m→6-9m, 3-6m→9-12m            | 履歴 128 件・承諾率 23%、RF は確信度 98-100%で継続予測       |

### 3.4 代表的な RF のみ正解ケース

#### ケース 1: 高活動度の継続者検出

| 開発者             | 真値 | IRL 確率 | RF 確率  | 履歴 | 承諾率 |
| ------------------ | ---- | -------- | -------- | ---- | ------ |
| melwittt@gmail.com | 継続 | 0.47     | **0.98** | 463  | 20.3%  |
| dms@danplanet.com  | 継続 | 0.47     | **1.00** | 128  | 22.7%  |
| notartom@gmail.com | 継続 | 0.47     | **0.97** | 106  | 13.2%  |

**考察**: RF は履歴依頼数が多く承諾率も適度にある開発者を高い確信度で継続と判断。IRL は確率が 0.47 前後と保守的。

#### ケース 2: 承諾率 0%の離脱者検出

| 開発者                               | 真値 | IRL 確率  | RF 確率       | 履歴 | 承諾率 |
| ------------------------------------ | ---- | --------- | ------------- | ---- | ------ |
| mlnx-openstack-ci@dev.mellanox.co.il | 離脱 | 0.46-0.48 | **0.09-0.27** | 407  | 0%     |
| kajinamit@oss.nttdata.com            | 離脱 | 0.48      | **0.00**      | 21   | 4.8%   |
| kinpaa@gmail.com                     | 離脱 | 0.47      | **0.03-0.07** | 7    | 0%     |

**考察**: RF は承諾率 0%または極端に低い開発者を強い確信度（確率 0-27%）で離脱と判断。IRL は 0.47 前後と中間的。

---

## 7. 両方不正解のケース（58 件）

### 5.1 概要

| 誤分類タイプ         | 件数 | 割合  |
| -------------------- | ---- | ----- |
| 継続者を離脱と誤予測 | 32   | 55.2% |
| 離脱者を継続と誤予測 | 26   | 44.8% |

### 4.2 複数パターンで不正解の開発者

| 開発者                      | 出現回数 | 真値 | IRL 平均確率 | RF 平均確率 | 履歴 | 承諾率 | 問題点                           |
| --------------------------- | -------- | ---- | ------------ | ----------- | ---- | ------ | -------------------------------- |
| **kchamart@redhat.com**     | **9 回** | 継続 | 0.460        | 0.23        | 46   | 34.8%  | 高承諾率なのに両方とも離脱と予測 |
| **takanattie@gmail.com**    | 7 回     | 離脱 | 0.470        | 0.75        | 451  | 5.3%   | 履歴多いため両方とも継続と予測   |
| wangzihao@yovole.com        | 5 回     | 離脱 | 0.469        | 0.74        | 44   | 9.1%   | 両方とも継続と予測               |
| likui@yovole.com            | 4 回     | 離脱 | 0.469        | 0.96        | 79   | 7.6%   | RF が特に高確率で継続と誤予測    |
| john.garbutt@stackhpc.com   | 4 回     | 離脱 | 0.467        | 0.64        | 53   | 3.8%   | 両方とも継続と予測               |
| maksim.malchuk@gmail.com    | 3 回     | 継続 | 0.453        | 0.08        | 3    | 66.7%  | 履歴少ないため両方とも離脱と予測 |
| christian.rohmann@inovex.de | 3 回     | 継続 | 0.462        | 0.12        | 3    | 0%     | 履歴・承諾率が低いため離脱と予測 |

### 4.3 両方不正解の典型パターン

#### パターン 1: 高承諾率なのに離脱と誤予測

| 開発者              | 真値     | IRL  | RF   | 履歴 | 承諾率    |
| ------------------- | -------- | ---- | ---- | ---- | --------- |
| kchamart@redhat.com | **継続** | 0.46 | 0.23 | 46   | **34.8%** |

**問題**: 承諾率が 34.8%と高いにもかかわらず、履歴依頼数が 46 件と中程度のため、両モデルとも離脱と判断。

#### パターン 2: 履歴が多いのに離脱

| 開発者               | 真値     | IRL  | RF       | 履歴    | 承諾率 |
| -------------------- | -------- | ---- | -------- | ------- | ------ |
| takanattie@gmail.com | **離脱** | 0.47 | **0.75** | **451** | 5.3%   |
| likui@yovole.com     | **離脱** | 0.47 | **0.96** | 79      | 7.6%   |

**問題**: 履歴依頼数が多い（451 件、79 件）ため、特に RF が継続と強く予測。しかし実際は離脱。

#### パターン 3: 新規参加者の継続

| 開発者                      | 真値     | IRL  | RF   | 履歴  | 承諾率 |
| --------------------------- | -------- | ---- | ---- | ----- | ------ |
| maksim.malchuk@gmail.com    | **継続** | 0.45 | 0.08 | **3** | 66.7%  |
| christian.rohmann@inovex.de | **継続** | 0.46 | 0.12 | **3** | 0%     |

**問題**: 履歴依頼数が極端に少ない（3 件）ため、両モデルとも離脱と判断。しかし実際は継続。

---

## 8. 考察と結論

### 6.1 期間別傾向のまとめ

| 訓練期間         | IRL の強さ     | RF の強さ      | 特徴                 |
| ---------------- | -------------- | -------------- | -------------------- |
| 0-3m（長期予測） | **優勢**       | やや弱い       | IRL は汎化能力が高い |
| 3-6m             | 互角           | 互角           | 両方のバランスが良い |
| 6-9m             | やや弱い       | **優勢**       | RF の離脱検出が光る  |
| 9-12m            | 継続検出に強い | 離脱検出に強い | 明確な役割分担       |

### 6.2 IRL の強み

1. **長期予測**: 0-3m 訓練からの長期予測で優勢（25 件 vs RF 12 件）
2. **CI/ボット系の識別**: 履歴が多くても承諾率が極端に低いケースを正しく離脱と判断
3. **少履歴の継続者検出**: 履歴が少なくても行動パターンから継続可能性を推定
4. **安定した予測**: 確率が 0.45-0.48 に収束し、極端な予測を避ける

### 6.3 RF の強み

1. **対角線評価**: 同一期間での評価（6-9m→6-9m, 9-12m→9-12m）で強い
2. **高活動度の継続者**: 履歴が多く承諾率も適度にある開発者を高確信度で検出
3. **承諾率 0%の離脱者**: 承諾率が極端に低い開発者を確信度高く離脱と判断
4. **後期の離脱者検出**: 9-12m→9-12m では離脱者を 9 件全て正しく検出

### 6.4 両手法の弱点

| 弱点                     | IRL | RF            |
| ------------------------ | --- | ------------- |
| 高承諾率・中履歴の継続者 | ✗   | ✗             |
| 高履歴の離脱者           | ✗   | ✗✗ (特に弱い) |
| 超低履歴の継続者         | ✗   | ✗✗ (特に弱い) |

### 6.5 補完性

- **一致率**: 約 70%（30%は異なる予測）
- IRL と RF は**異なるタイプの開発者**を得意としている
- **アンサンブル**により性能向上の可能性が高い

### 6.6 実務への示唆

1. **継続者の検出を重視する場合**: IRL を推奨（特に後期）
2. **離脱者の検出を重視する場合**: RF を推奨（特に対角線評価）
3. **バランスを取る場合**: 両手法のアンサンブルを検討

---

## 9. 補足データ

### 7.1 出力ファイル

| ファイル                                                 | 説明                 |
| -------------------------------------------------------- | -------------------- |
| `outputs/irl_rf_10pattern_analysis/irl_only_correct.csv` | IRL のみ正解の 46 件 |
| `outputs/irl_rf_10pattern_analysis/rf_only_correct.csv`  | RF のみ正解の 50 件  |
| `outputs/irl_rf_10pattern_analysis/both_wrong.csv`       | 両方不正解の 58 件   |
| `outputs/irl_rf_10pattern_analysis/both_correct.csv`     | 両方正解の 264 件    |

### 7.2 分析条件

- **プロジェクト**: Nova (OpenStack)
- **訓練期間**: 2021 年
- **評価期間**: 2023 年
- **評価パターン**: 訓練期間 ≤ 評価期間 の 10 パターン
- **IRL**: 26 特徴量、LSTM-Reward、最適閾値
- **RF (Case2)**: 2 特徴量（履歴依頼数、履歴承諾率）、閾値 0.5

---

## 10. 活動量・承諾率に基づく詳細考察

### 10.1 なぜ中高活動層でIRLが優勢なのか

中高活動層（依頼数44-164件）では、IRLのみ正解が20.2%、RFのみ正解が11.5%と、IRLが明確に優勢であった。この差が生じる理由を、具体的な開発者の特性から考察する。

この層でIRLのみが正解した21件のうち、18件が離脱者の検出であった。代表例として、aleksey.stupnikov@gmail.com（依頼数96件、承諾率8.3%）を挙げる。この開発者に対し、RFは最大99%という極めて高い確率で「継続」と予測した。RFにとって、依頼数96件は十分に「活発」と判断される値であり、承諾率8.3%も閾値50%を下回るものの、依頼数の影響が強く出た結果と考えられる。

一方、IRLは一貫して45-48%の確率を出力し、離脱と正しく判定した。IRLが使用する26特徴量には、単純な依頼数や承諾率だけでなく、レビュー対象のファイル数、コメント傾向、プロジェクト内での役割など、**活動の「質」を表す指標**が含まれる。aleksey.stupnikov@gmail.comの場合、依頼数は多いものの、これらの質的指標が「離脱傾向」を示していた可能性が高い。

このパターンは、**「見かけ上は活発だが、実質的なプロジェクト貢献度が低下している」**開発者を検出するIRLの能力を示している。OSSプロジェクトにおいて、依頼数だけで継続性を判断することの危険性を示唆する重要な知見である。

### 10.2 なぜ高活動層でRFが優勢なのか

高活動層（依頼数164件超）では、RFのみ正解が18.6%、IRLのみ正解が6.9%と、RFが明確に優勢であった。この層でRFのみが正解した19件のうち、14件が離脱者の検出であった。

代表例として、mlnx-openstack-ci@dev.mellanox.co.il（依頼数407件、承諾率0%）を挙げる。これはCIボット（継続的インテグレーション用の自動化アカウント）であり、レビュー依頼は自動的に送信されるが、一度も承諾していない。RFはこのパターンを「承諾率0% → 離脱」という単純なルールで正確に検出した。

IRLはこの開発者に対し、47%前後の確率を出力した。407件という高い依頼数が、IRLの予測に影響を与えたと考えられる。IRLの26特徴量には活動量に関連する指標が複数含まれており、これらが「高活動 → 継続傾向」という方向に引っ張った可能性がある。

この結果は、**CIボットや自動化アカウントの検出においては、シンプルなルールベースのアプローチが有効**であることを示している。複雑なモデルが常に優れているわけではなく、問題の性質に応じた手法選択が重要である。

### 10.3 なぜ承諾率0-5%でIRLが優勢なのか

承諾率0-5%の帯域では、IRLのみ正解が23.1%と、全帯域で最高の値を示した。この帯域でIRLのみが正解した12件のうち、10件が離脱者の検出であった。

この帯域の特徴は、**「承諾率は極端に低いが、0%ではない」**という点にある。承諾率0%であれば、RFの単純なルールで検出できる。しかし、承諾率が1-5%の場合、RFは「少なくとも一部は承諾している」と解釈し、継続と誤判定する傾向がある。

具体例として、jichenjc@cn.ibm.com（依頼数74件、承諾率2.7%）を挙げる。この開発者は74件の依頼のうち2件のみ承諾しており、RFは72.5%の確率で継続と予測した。しかし実際には離脱しており、IRLのみが正しく検出した。

IRLがこのパターンを検出できる理由は、**承諾率以外の特徴量も総合的に評価している**ためと考えられる。承諾したレビューの内容、コメントの傾向、他のレビュアーとの関係性など、「なぜ承諾率が低いのか」の背景を捉える特徴量が有効に機能していると推測される。

### 10.4 なぜ承諾率30%以上で両方苦手なのか

承諾率30%以上の帯域では、両方不正解が23.1%と高く、両モデルとも予測が困難であった。この帯域で両方不正解となった15件のうち、注目すべきパターンがある。

kchamart@redhat.com（依頼数46件、承諾率34.8%）は、10パターン中9回で両方不正解という極端な例である。この開発者は全10パターンで継続者であったにもかかわらず、両モデルとも離脱と予測し続けた。

この開発者の特性は、**「中程度の活動量」+「中程度の承諾率」**という、最も「平均的」な組み合わせである。IRLもRFも、極端なパターン（高活動・低承諾率など）は比較的正確に予測できるが、平均的な特性を持つ開発者の行動予測は困難である。

この結果は、**継続/離脱の境界領域には、現在の特徴量では捉えきれない要因が存在する**ことを示唆している。具体的には、以下の追加特徴量の導入が有効と考えられる：

1. **時系列的な変化**: 承諾率や活動量の「傾き」（増加傾向/減少傾向）
2. **外部要因**: 所属組織の変更、他プロジェクトへの関与度の変化
3. **質的指標**: レビューコメントの詳細度、議論への参加度

### 10.5 期間による真値の変動と予測精度

maksim.malchuk@gmail.com（依頼数3件、承諾率66.7%）は、評価期間によって真値（継続/離脱）が変動する興味深いケースである。この開発者は以下のパターンを示した：

- 0-3m→0-3m: 継続 → 両方不正解
- 0-3m→3-6m: 離脱 → 両方正解
- 6-9m→6-9m: 離脱 → RFのみ正解
- 6-9m→9-12m: 継続 → IRLのみ正解
- 9-12m→9-12m: 継続 → IRLのみ正解

このパターンから、**IRLは後期（6-9m以降）の継続予測に強く、RFは早期（0-3m）の離脱予測に強い**という傾向が読み取れる。

この差は、両モデルが捉える「時間スケール」の違いに起因すると考えられる。IRLは長期的な行動パターンから報酬関数を学習しており、「一時的な離脱からの復帰」パターンを捉えやすい。一方、RFは直近の履歴統計を重視しており、「現時点での活動低下」を敏感に検出する。

### 10.6 総合考察：モデル選択の指針

以上の分析から、IRL vs RFのモデル選択について以下の指針を提案する：

**IRLを選択すべきケース：**
1. 中高活動層（依頼数44-164件）の開発者が多い場合
2. 承諾率0-5%の「微妙な低承諾率」開発者の検出が重要な場合
3. 6ヶ月以上先の長期予測を行う場合
4. 「見かけ上活発だが離脱する」開発者の検出を重視する場合

**RFを選択すべきケース：**
1. 高活動層（依頼数164件超）の開発者が多い場合
2. 承諾率0%のCIボット・自動化アカウントの識別が重要な場合
3. 同一期間内（対角線評価）の予測を行う場合
4. シンプルで解釈可能なモデルが求められる場合

**アンサンブルを検討すべきケース：**
1. 開発者の活動量・承諾率が多様な場合
2. 予測の安定性を重視する場合
3. 両モデルの予測が分かれる30%のケースでの精度向上を狙う場合
